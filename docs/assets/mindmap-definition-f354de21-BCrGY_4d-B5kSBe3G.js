import{l as xn,c as la,au as eu,t as tu,av as Jr,d as ei,h as nu,aF as ru,aG as iu,aH as au,ax as ou}from"./mermaid.core-CrY0-6Yn-C5lqaAFf.js";import{b as ua,c as su}from"./data-DfohTZf7.js";import{U as lu}from"./createText-6b48ae7d-Brm7TOmQ-zdFC0ZQE.js";import"./index-Cd5zatPZ.js";import"./step-CFLd_UlD-CAA9ZoWn.js";function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(e)}function ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ha(e,t,n){return t&&uu(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){return cu(e)||hu(e,t)||is(e,t)||du()}function cu(e){if(Array.isArray(e))return e}function hu(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,l;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(s){o=!0,l=s}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw l}}return r}}function is(e,t){if(e){if(typeof e=="string")return za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return za(e,t)}}function za(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function du(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pu(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=is(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var s=n.next();return o=s.done,s},e:function(s){a=!0,l=s},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw l}}}}var Ve=typeof window>"u"?null:window,Ga=Ve?Ve.navigator:null;Ve&&Ve.document;var gu=je(""),as=je({}),fu=je(function(){}),vu=typeof HTMLElement>"u"?"undefined":je(HTMLElement),wr=function(e){return e&&e.instanceString&&Re(e.instanceString)?e.instanceString():null},he=function(e){return e!=null&&je(e)==gu},Re=function(e){return e!=null&&je(e)===fu},Me=function(e){return!ft(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},_e=function(e){return e!=null&&je(e)===as&&!Me(e)&&e.constructor===Object},yu=function(e){return e!=null&&je(e)===as},ne=function(e){return e!=null&&je(e)===je(1)&&!isNaN(e)},mu=function(e){return ne(e)&&Math.floor(e)===e},ti=function(e){if(vu!=="undefined")return e!=null&&e instanceof HTMLElement},ft=function(e){return Er(e)||os(e)},Er=function(e){return wr(e)==="collection"&&e._private.single},os=function(e){return wr(e)==="collection"&&!e._private.single},da=function(e){return wr(e)==="core"},ss=function(e){return wr(e)==="stylesheet"},bu=function(e){return wr(e)==="event"},Qt=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},xu=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},wu=function(e){return _e(e)&&ne(e.x1)&&ne(e.x2)&&ne(e.y1)&&ne(e.y2)},Eu=function(e){return yu(e)&&Re(e.then)},_u=function(){return Ga&&Ga.userAgent.match(/msie|trident|edge/i)},cr=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);return r.join("$")});var n=function r(){var i=this,o=arguments,a,l=t.apply(i,o),s=r.cache;return(a=s[l])||(a=s[l]=e.apply(i,o)),a};return n.cache={},n},pa=cr(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),di=cr(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),ls=cr(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Ya=function(e){return Qt(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Ue="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Tu="rgb[a]?\\(("+Ue+"[%]?)\\s*,\\s*("+Ue+"[%]?)\\s*,\\s*("+Ue+"[%]?)(?:\\s*,\\s*("+Ue+"))?\\)",Cu="rgb[a]?\\((?:"+Ue+"[%]?)\\s*,\\s*(?:"+Ue+"[%]?)\\s*,\\s*(?:"+Ue+"[%]?)(?:\\s*,\\s*(?:"+Ue+"))?\\)",Du="hsl[a]?\\(("+Ue+")\\s*,\\s*("+Ue+"[%])\\s*,\\s*("+Ue+"[%])(?:\\s*,\\s*("+Ue+"))?\\)",Au="hsl[a]?\\((?:"+Ue+")\\s*,\\s*(?:"+Ue+"[%])\\s*,\\s*(?:"+Ue+"[%])(?:\\s*,\\s*(?:"+Ue+"))?\\)",ku="\\#[0-9a-fA-F]{3}",Lu="\\#[0-9a-fA-F]{6}",us=function(e,t){return e<t?-1:e>t?1:0},Nu=function(e,t){return-1*us(e,t)},ve=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(r!=null)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];e[a]=r[a]}}return e},Mu=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,r,i,o=16;return t?(n=parseInt(e[1]+e[1],o),r=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),r=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,r,i]}},Su=function(e){var t,n,r,i,o,a,l,s;function u(d,p,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?d+(p-d)*6*v:v<1/2?p:v<2/3?d+(p-d)*(2/3-v)*6:d}var c=new RegExp("^"+Du+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,r=parseFloat(c[2]),r<0||r>100||(r=r/100,i=parseFloat(c[3]),i<0||i>100)||(i=i/100,o=c[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(r===0)a=l=s=Math.round(i*255);else{var h=i<.5?i*(1+r):i+r-i*r,g=2*i-h;a=Math.round(255*u(g,h,n+1/3)),l=Math.round(255*u(g,h,n)),s=Math.round(255*u(g,h,n-1/3))}t=[a,l,s,o]}return t},Ou=function(e){var t,n=new RegExp("^"+Tu+"$").exec(e);if(n){t=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var a=r[1]||r[2]||r[3],l=r[1]&&r[2]&&r[3];if(a&&!l)return;var s=n[4];if(s!==void 0){if(s=parseFloat(s),s<0||s>1)return;t.push(s)}}return t},Iu=function(e){return Ru[e.toLowerCase()]},Pu=function(e){return(Me(e)?e:null)||Iu(e)||Mu(e)||Ou(e)||Su(e)},Ru={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cs=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(_e(o))throw Error("Tried to set map with object key");i<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},hs=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(_e(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t};function Bu(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var pn=Bu,rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fu(e,t){return t={exports:{}},e(t,t.exports),t.exports}var zu=typeof rr=="object"&&rr&&rr.Object===Object&&rr,Gu=zu,Yu=typeof self=="object"&&self&&self.Object===Object&&self,Vu=Gu||Yu||Function("return this")(),pi=Vu,Xu=function(){return pi.Date.now()},Si=Xu,Uu=/\s/;function ju(e){for(var t=e.length;t--&&Uu.test(e.charAt(t)););return t}var qu=ju,Hu=/^\s+/;function Wu(e){return e&&e.slice(0,qu(e)+1).replace(Hu,"")}var $u=Wu,Ku=pi.Symbol,Rn=Ku,ds=Object.prototype,Zu=ds.hasOwnProperty,Qu=ds.toString,Qn=Rn?Rn.toStringTag:void 0;function Ju(e){var t=Zu.call(e,Qn),n=e[Qn];try{e[Qn]=void 0;var r=!0}catch{}var i=Qu.call(e);return r&&(t?e[Qn]=n:delete e[Qn]),i}var ec=Ju,tc=Object.prototype,nc=tc.toString;function rc(e){return nc.call(e)}var ic=rc,ac="[object Null]",oc="[object Undefined]",Va=Rn?Rn.toStringTag:void 0;function sc(e){return e==null?e===void 0?oc:ac:Va&&Va in Object(e)?ec(e):ic(e)}var ps=sc;function lc(e){return e!=null&&typeof e=="object"}var uc=lc,cc="[object Symbol]";function hc(e){return typeof e=="symbol"||uc(e)&&ps(e)==cc}var _r=hc,Xa=NaN,dc=/^[-+]0x[0-9a-f]+$/i,pc=/^0b[01]+$/i,gc=/^0o[0-7]+$/i,fc=parseInt;function vc(e){if(typeof e=="number")return e;if(_r(e))return Xa;if(pn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=$u(e);var n=pc.test(e);return n||gc.test(e)?fc(e.slice(2),n?2:8):dc.test(e)?Xa:+e}var Ua=vc,yc="Expected a function",mc=Math.max,bc=Math.min;function xc(e,t,n){var r,i,o,a,l,s,u=0,c=!1,h=!1,g=!0;if(typeof e!="function")throw new TypeError(yc);t=Ua(t)||0,pn(n)&&(c=!!n.leading,h="maxWait"in n,o=h?mc(Ua(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g);function d(C){var y=r,w=i;return r=i=void 0,u=C,a=e.apply(w,y),a}function p(C){return u=C,l=setTimeout(f,t),c?d(C):a}function v(C){var y=C-s,w=C-u,E=t-y;return h?bc(E,o-w):E}function b(C){var y=C-s,w=C-u;return s===void 0||y>=t||y<0||h&&w>=o}function f(){var C=Si();if(b(C))return m(C);l=setTimeout(f,v(C))}function m(C){return l=void 0,g&&r?d(C):(r=i=void 0,a)}function x(){l!==void 0&&clearTimeout(l),u=0,r=s=i=l=void 0}function T(){return l===void 0?a:m(Si())}function _(){var C=Si(),y=b(C);if(r=arguments,i=this,s=C,y){if(l===void 0)return p(s);if(h)return clearTimeout(l),l=setTimeout(f,t),d(s)}return l===void 0&&(l=setTimeout(f,t)),a}return _.cancel=x,_.flush=T,_}var gi=xc,Oi=Ve?Ve.performance:null,gs=Oi&&Oi.now?function(){return Oi.now()}:function(){return Date.now()},wc=function(){if(Ve){if(Ve.requestAnimationFrame)return function(e){Ve.requestAnimationFrame(e)};if(Ve.mozRequestAnimationFrame)return function(e){Ve.mozRequestAnimationFrame(e)};if(Ve.webkitRequestAnimationFrame)return function(e){Ve.webkitRequestAnimationFrame(e)};if(Ve.msRequestAnimationFrame)return function(e){Ve.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(gs())},1e3/60)}}(),ni=function(e){return wc(e)},Yt=gs,Ln=9261,fs=65599,ir=5381,vs=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ln,n=t,r;r=e.next(),!r.done;)n=n*fs+r.value|0;return n},hr=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ln;return t*fs+e|0},dr=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir;return(t<<5)+t+e|0},Ec=function(e,t){return e*2097152+t},qt=function(e){return e[0]*2097152+e[1]},Sr=function(e,t){return[hr(e[0],t[0]),dr(e[1],t[1])]},_c=function(e,t){var n={value:0,done:!1},r=0,i=e.length,o={next:function(){return r<i?n.value=e[r++]:n.done=!0,n}};return vs(o,t)},gn=function(e,t){var n={value:0,done:!1},r=0,i=e.length,o={next:function(){return r<i?n.value=e.charCodeAt(r++):n.done=!0,n}};return vs(o,t)},ys=function(){return Tc(arguments)},Tc=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];n===0?t=gn(r):t=gn(r,t)}return t},ja=!0,Cc=console.warn!=null,Dc=console.trace!=null,ga=Number.MAX_SAFE_INTEGER||9007199254740991,ms=function(){return!0},ri=function(){return!1},qa=function(){return 0},fa=function(){},Be=function(e){throw new Error(e)},bs=function(e){if(e!==void 0)ja=!!e;else return ja},ke=function(e){bs()&&(Cc?console.warn(e):(console.log(e),Dc&&console.trace()))},Ac=function(e){return ve({},e)},It=function(e){return e==null?e:Me(e)?e.slice():_e(e)?Ac(e):e},kc=function(e){return e.slice()},xs=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},Lc={},ws=function(){return Lc},et=function(e){var t=Object.keys(e);return function(n){for(var r={},i=0;i<t.length;i++){var o=t[i],a=n==null?void 0:n[o];r[o]=a===void 0?e[o]:a}return r}},Jt=function(e,t,n){for(var r=e.length-1;r>=0&&!(e[r]===t&&(e.splice(r,1),n));r--);},va=function(e){e.splice(0,e.length)},Nc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},At=function(e,t,n){return n&&(t=ls(n,t)),e[t]},Wt=function(e,t,n,r){n&&(t=ls(n,t)),e[t]=r},Mc=function(){function e(){ca(this,e),this._obj={}}return ha(e,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),e}(),Pt=typeof Map<"u"?Map:Mc,Sc="undefined",Oc=function(){function e(t){if(ca(this,e),this._obj=Object.create(null),this.size=0,t!=null){var n;t.instanceString!=null&&t.instanceString()===this.instanceString()?n=t.toArray():n=t;for(var r=0;r<n.length;r++)this.add(n[r])}}return ha(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),e}(),Gn=(typeof Set>"u"?"undefined":je(Set))!==Sc?Set:Oc,fi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!da(e)){Be("An element must have a core reference and parameters set");return}var r=t.group;if(r==null&&(t.data&&t.data.source!=null&&t.data.target!=null?r="edges":r="nodes"),r!=="nodes"&&r!=="edges"){Be("An element must be of type `nodes` or `edges`; you specified `"+r+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?r==="edges":!!t.pannable,active:!1,classes:new Gn,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,a=e.pan(),l=e.zoom();i.position={x:(o.x-a.x)/l,y:(o.y-a.y)/l}}var s=[];Me(t.classes)?s=t.classes:he(t.classes)&&(s=t.classes.split(/\s+/));for(var u=0,c=s.length;u<c;u++){var h=s[u];!h||h===""||i.classes.add(h)}this.createEmitter();var g=t.style||t.css;g&&(ke("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g)),(n===void 0||n)&&this.restore()},Ha=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,r){var i;_e(t)&&!ft(t)&&(i=t,t=i.roots||i.root,n=i.visit,r=i.directed),r=arguments.length===2&&!Re(n)?n:r,n=Re(n)?n:function(){};for(var o=this._private.cy,a=t=he(t)?this.filter(t):t,l=[],s=[],u={},c={},h={},g=0,d,p=this.byGroup(),v=p.nodes,b=p.edges,f=0;f<a.length;f++){var m=a[f],x=m.id();m.isNode()&&(l.unshift(m),e.bfs&&(h[x]=!0,s.push(m)),c[x]=0)}for(var T=function(){var D=e.bfs?l.shift():l.pop(),A=D.id();if(e.dfs){if(h[A])return"continue";h[A]=!0,s.push(D)}var k=c[A],M=u[A],L=M!=null?M.source():null,O=M!=null?M.target():null,R=M==null?void 0:D.same(L)?O[0]:L[0],I=void 0;if(I=n(D,M,R,g++,k),I===!0)return d=D,"break";if(I===!1)return"break";for(var S=D.connectedEdges().filter(function(Y){return(!r||Y.source().same(D))&&b.has(Y)}),P=0;P<S.length;P++){var z=S[P],F=z.connectedNodes().filter(function(Y){return!Y.same(D)&&v.has(Y)}),G=F.id();F.length!==0&&!h[G]&&(F=F[0],l.push(F),e.bfs&&(h[G]=!0,s.push(F)),u[G]=z,c[G]=c[A]+1)}};l.length!==0;){var _=T();if(_!=="continue"&&_==="break")break}for(var C=o.collection(),y=0;y<s.length;y++){var w=s[y],E=u[w.id()];E!=null&&C.push(E),C.push(w)}return{path:o.collection(C),found:o.collection(d)}}},pr={breadthFirstSearch:Ha({bfs:!0}),depthFirstSearch:Ha({dfs:!0})};pr.bfs=pr.breadthFirstSearch;pr.dfs=pr.depthFirstSearch;var Ic=Fu(function(e,t){(function(){var n,r,i,o,a,l,s,u,c,h,g,d,p,v,b;i=Math.floor,h=Math.min,r=function(f,m){return f<m?-1:f>m?1:0},c=function(f,m,x,T,_){var C;if(x==null&&(x=0),_==null&&(_=r),x<0)throw new Error("lo must be non-negative");for(T==null&&(T=f.length);x<T;)C=i((x+T)/2),_(m,f[C])<0?T=C:x=C+1;return[].splice.apply(f,[x,x-x].concat(m)),m},l=function(f,m,x){return x==null&&(x=r),f.push(m),v(f,0,f.length-1,x)},a=function(f,m){var x,T;return m==null&&(m=r),x=f.pop(),f.length?(T=f[0],f[0]=x,b(f,0,m)):T=x,T},u=function(f,m,x){var T;return x==null&&(x=r),T=f[0],f[0]=m,b(f,0,x),T},s=function(f,m,x){var T;return x==null&&(x=r),f.length&&x(f[0],m)<0&&(T=[f[0],m],m=T[0],f[0]=T[1],b(f,0,x)),m},o=function(f,m){var x,T,_,C,y,w;for(m==null&&(m=r),C=(function(){w=[];for(var E=0,D=i(f.length/2);0<=D?E<D:E>D;0<=D?E++:E--)w.push(E);return w}).apply(this).reverse(),y=[],T=0,_=C.length;T<_;T++)x=C[T],y.push(b(f,x,m));return y},p=function(f,m,x){var T;if(x==null&&(x=r),T=f.indexOf(m),T!==-1)return v(f,0,T,x),b(f,T,x)},g=function(f,m,x){var T,_,C,y,w;if(x==null&&(x=r),_=f.slice(0,m),!_.length)return _;for(o(_,x),w=f.slice(m),C=0,y=w.length;C<y;C++)T=w[C],s(_,T,x);return _.sort(x).reverse()},d=function(f,m,x){var T,_,C,y,w,E,D,A,k;if(x==null&&(x=r),m*10<=f.length){if(C=f.slice(0,m).sort(x),!C.length)return C;for(_=C[C.length-1],D=f.slice(m),y=0,E=D.length;y<E;y++)T=D[y],x(T,_)<0&&(c(C,T,0,null,x),C.pop(),_=C[C.length-1]);return C}for(o(f,x),k=[],w=0,A=h(m,f.length);0<=A?w<A:w>A;0<=A?++w:--w)k.push(a(f,x));return k},v=function(f,m,x,T){var _,C,y;for(T==null&&(T=r),_=f[x];x>m;){if(y=x-1>>1,C=f[y],T(_,C)<0){f[x]=C,x=y;continue}break}return f[x]=_},b=function(f,m,x){var T,_,C,y,w;for(x==null&&(x=r),_=f.length,w=m,C=f[m],T=2*m+1;T<_;)y=T+1,y<_&&!(x(f[T],f[y])<0)&&(T=y),f[m]=f[T],m=T,T=2*m+1;return f[m]=C,v(f,w,m,x)},n=function(){f.push=l,f.pop=a,f.replace=u,f.pushpop=s,f.heapify=o,f.updateItem=p,f.nlargest=g,f.nsmallest=d;function f(m){this.cmp=m??r,this.nodes=[]}return f.prototype.push=function(m){return l(this.nodes,m,this.cmp)},f.prototype.pop=function(){return a(this.nodes,this.cmp)},f.prototype.peek=function(){return this.nodes[0]},f.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},f.prototype.replace=function(m){return u(this.nodes,m,this.cmp)},f.prototype.pushpop=function(m){return s(this.nodes,m,this.cmp)},f.prototype.heapify=function(){return o(this.nodes,this.cmp)},f.prototype.updateItem=function(m){return p(this.nodes,m,this.cmp)},f.prototype.clear=function(){return this.nodes=[]},f.prototype.empty=function(){return this.nodes.length===0},f.prototype.size=function(){return this.nodes.length},f.prototype.clone=function(){var m;return m=new f,m.nodes=this.nodes.slice(0),m},f.prototype.toArray=function(){return this.nodes.slice(0)},f.prototype.insert=f.prototype.push,f.prototype.top=f.prototype.peek,f.prototype.front=f.prototype.peek,f.prototype.has=f.prototype.contains,f.prototype.copy=f.prototype.clone,f}(),function(f,m){return e.exports=m()}(this,function(){return n})}).call(rr)}),Tr=Ic,Pc=et({root:null,weight:function(e){return 1},directed:!1}),Rc={dijkstra:function(e){if(!_e(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Pc(e),r=n.root,i=n.weight,o=n.directed,a=this,l=i,s=he(r)?this.filter(r)[0]:r[0],u={},c={},h={},g=this.byGroup(),d=g.nodes,p=g.edges;p.unmergeBy(function(L){return L.isLoop()});for(var v=function(L){return u[L.id()]},b=function(L,O){u[L.id()]=O,f.updateItem(L)},f=new Tr(function(L,O){return v(L)-v(O)}),m=0;m<d.length;m++){var x=d[m];u[x.id()]=x.same(s)?0:1/0,f.push(x)}for(var T=function(L,O){for(var R=(o?L.edgesTo(O):L.edgesWith(O)).intersect(p),I=1/0,S,P=0;P<R.length;P++){var z=R[P],F=l(z);(F<I||!S)&&(I=F,S=z)}return{edge:S,dist:I}};f.size()>0;){var _=f.pop(),C=v(_),y=_.id();if(h[y]=C,C!==1/0)for(var w=_.neighborhood().intersect(d),E=0;E<w.length;E++){var D=w[E],A=D.id(),k=T(_,D),M=C+k.dist;M<v(D)&&(b(D,M),c[A]={node:_,edge:k.edge})}}return{distanceTo:function(L){var O=he(L)?d.filter(L)[0]:L[0];return h[O.id()]},pathTo:function(L){var O=he(L)?d.filter(L)[0]:L[0],R=[],I=O,S=I.id();if(O.length>0)for(R.unshift(O);c[S];){var P=c[S];R.unshift(P.edge),R.unshift(P.node),I=P.node,S=I.id()}return a.spawn(R)}}}},Bc={kruskal:function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,i=n.length,o=new Array(i),a=n,l=function(m){for(var x=0;x<o.length;x++){var T=o[x];if(T.has(m))return x}},s=0;s<i;s++)o[s]=this.spawn(n[s]);for(var u=r.sort(function(m,x){return e(m)-e(x)}),c=0;c<u.length;c++){var h=u[c],g=h.source()[0],d=h.target()[0],p=l(g),v=l(d),b=o[p],f=o[v];p!==v&&(a.merge(h),b.merge(f),o.splice(v,1))}return a}},Fc=et({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),zc={aStar:function(e){var t=this.cy(),n=Fc(e),r=n.root,i=n.goal,o=n.heuristic,a=n.directed,l=n.weight;r=t.collection(r)[0],i=t.collection(i)[0];var s=r.id(),u=i.id(),c={},h={},g={},d=new Tr(function(P,z){return h[P.id()]-h[z.id()]}),p=new Gn,v={},b={},f=function(P,z){d.push(P),p.add(z)},m,x,T=function(){m=d.pop(),x=m.id(),p.delete(x)},_=function(P){return p.has(P)};f(r,s),c[s]=0,h[s]=o(r);for(var C=0;d.size()>0;){if(T(),C++,x===u){for(var y=[],w=i,E=u,D=b[E];y.unshift(w),D!=null&&y.unshift(D),w=v[E],w!=null;)E=w.id(),D=b[E];return{found:!0,distance:c[x],path:this.spawn(y),steps:C}}g[x]=!0;for(var A=m._private.edges,k=0;k<A.length;k++){var M=A[k];if(this.hasElementWithId(M.id())&&!(a&&M.data("source")!==x)){var L=M.source(),O=M.target(),R=L.id()!==x?L:O,I=R.id();if(this.hasElementWithId(I)&&!g[I]){var S=c[x]+l(M);if(!_(I)){c[I]=S,h[I]=S+o(R),f(R,I),v[I]=m,b[I]=M;continue}S<c[I]&&(c[I]=S,h[I]=S+o(R),v[I]=m,b[I]=M)}}}}return{found:!1,distance:void 0,path:void 0,steps:C}}},Gc=et({weight:function(e){return 1},directed:!1}),Yc={floydWarshall:function(e){for(var t=this.cy(),n=Gc(e),r=n.weight,i=n.directed,o=r,a=this.byGroup(),l=a.nodes,s=a.edges,u=l.length,c=u*u,h=function(F){return l.indexOf(F)},g=function(F){return l[F]},d=new Array(c),p=0;p<c;p++){var v=p%u,b=(p-v)/u;b===v?d[p]=0:d[p]=1/0}for(var f=new Array(c),m=new Array(c),x=0;x<s.length;x++){var T=s[x],_=T.source()[0],C=T.target()[0];if(_!==C){var y=h(_),w=h(C),E=y*u+w,D=o(T);if(d[E]>D&&(d[E]=D,f[E]=w,m[E]=T),!i){var A=w*u+y;!i&&d[A]>D&&(d[A]=D,f[A]=y,m[A]=T)}}}for(var k=0;k<u;k++)for(var M=0;M<u;M++)for(var L=M*u+k,O=0;O<u;O++){var R=M*u+O,I=k*u+O;d[L]+d[I]<d[R]&&(d[R]=d[L]+d[I],f[R]=f[L])}var S=function(F){return(he(F)?t.filter(F):F)[0]},P=function(F){return h(S(F))},z={distance:function(F,G){var Y=P(F),W=P(G);return d[Y*u+W]},path:function(F,G){var Y=P(F),W=P(G),Q=g(Y);if(Y===W)return Q.collection();if(f[Y*u+W]==null)return t.collection();var B=t.collection(),U=Y,X;for(B.merge(Q);Y!==W;)U=Y,Y=f[Y*u+W],X=m[U*u+Y],B.merge(X),B.merge(g(Y));return B}};return z}},Vc=et({weight:function(e){return 1},directed:!1,root:null}),Xc={bellmanFord:function(e){var t=this,n=Vc(e),r=n.weight,i=n.directed,o=n.root,a=r,l=this,s=this.cy(),u=this.byGroup(),c=u.edges,h=u.nodes,g=h.length,d=new Pt,p=!1,v=[];o=s.collection(o)[0],c.unmergeBy(function(ie){return ie.isLoop()});for(var b=c.length,f=function(ie){var ce=d.get(ie.id());return ce||(ce={},d.set(ie.id(),ce)),ce},m=function(ie){return(he(ie)?s.$(ie):ie)[0]},x=function(ie){return f(m(ie)).dist},T=function(ie){for(var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,ye=m(ie),be=[],xe=ye;;){if(xe==null)return t.spawn();var Le=f(xe),we=Le.edge,Te=Le.pred;if(be.unshift(xe[0]),xe.same(ce)&&be.length>0)break;we!=null&&be.unshift(we),xe=Te}return l.spawn(be)},_=0;_<g;_++){var C=h[_],y=f(C);C.same(o)?y.dist=0:y.dist=1/0,y.pred=null,y.edge=null}for(var w=!1,E=function(ie,ce,ye,be,xe,Le){var we=be.dist+Le;we<xe.dist&&!ye.same(be.edge)&&(xe.dist=we,xe.pred=ie,xe.edge=ye,w=!0)},D=1;D<g;D++){w=!1;for(var A=0;A<b;A++){var k=c[A],M=k.source(),L=k.target(),O=a(k),R=f(M),I=f(L);E(M,L,k,R,I,O),i||E(L,M,k,I,R,O)}if(!w)break}if(w)for(var S=[],P=0;P<b;P++){var z=c[P],F=z.source(),G=z.target(),Y=a(z),W=f(F).dist,Q=f(G).dist;if(W+Y<Q||!i&&Q+Y<W)if(p||(ke("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var B=[];W+Y<Q&&B.push(F),!i&&Q+Y<W&&B.push(G);for(var U=B.length,X=0;X<U;X++){var $=B[X],Z=[$];Z.push(f($).edge);for(var re=f($).pred;Z.indexOf(re)===-1;)Z.push(re),Z.push(f(re).edge),re=f(re).pred;Z=Z.slice(Z.indexOf(re));for(var ge=Z[0].id(),de=0,J=2;J<Z.length;J+=2)Z[J].id()<ge&&(ge=Z[J].id(),de=J);Z=Z.slice(de).concat(Z.slice(0,de)),Z.push(Z[0]);var oe=Z.map(function(ie){return ie.id()}).join(",");S.indexOf(oe)===-1&&(v.push(l.spawn(Z)),S.push(oe))}}else break}return{distanceTo:x,pathTo:T,hasNegativeWeightCycle:p,negativeWeightCycles:v}}},Uc=Math.sqrt(2),jc=function(e,t,n){n.length===0&&Be("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],i=r[1],o=r[2],a=t[i],l=t[o],s=n,u=s.length-1;u>=0;u--){var c=s[u],h=c[1],g=c[2];(t[h]===a&&t[g]===l||t[h]===l&&t[g]===a)&&s.splice(u,1)}for(var d=0;d<s.length;d++){var p=s[d];p[1]===l?(s[d]=p.slice(),s[d][1]=a):p[2]===l&&(s[d]=p.slice(),s[d][2]=a)}for(var v=0;v<t.length;v++)t[v]===l&&(t[v]=a);return s},Ii=function(e,t,n,r){for(;n>r;){var i=Math.floor(Math.random()*t.length);t=jc(i,e,t),n--}return t},qc={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,r=t.edges;r.unmergeBy(function(I){return I.isLoop()});var i=n.length,o=r.length,a=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/Uc);if(i<2){Be("At least 2 nodes are required for Karger-Stein algorithm");return}for(var s=[],u=0;u<o;u++){var c=r[u];s.push([u,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,g=[],d=new Array(i),p=new Array(i),v=new Array(i),b=function(I,S){for(var P=0;P<i;P++)S[P]=I[P]},f=0;f<=a;f++){for(var m=0;m<i;m++)p[m]=m;var x=Ii(p,s.slice(),i,l),T=x.slice();b(p,v);var _=Ii(p,x,l,2),C=Ii(v,T,l,2);_.length<=C.length&&_.length<h?(h=_.length,g=_,b(p,d)):C.length<=_.length&&C.length<h&&(h=C.length,g=C,b(v,d))}for(var y=this.spawn(g.map(function(I){return r[I[0]]})),w=this.spawn(),E=this.spawn(),D=d[0],A=0;A<d.length;A++){var k=d[A],M=n[A];k===D?w.merge(M):E.merge(M)}var L=function(I){var S=e.spawn();return I.forEach(function(P){S.merge(P),P.connectedEdges().forEach(function(z){e.contains(z)&&!y.contains(z)&&S.merge(z)})}),S},O=[L(w),L(E)],R={cut:y,components:O,partition1:w,partition2:E};return R}},Hc=function(e){return{x:e.x,y:e.y}},vi=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Es=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Nn=function(e){return{x:e[0],y:e[1]}},Wc=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(r=Math.min(o,r))}return r},$c=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(r=Math.max(o,r))}return r},Kc=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=0,i=0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(r+=a,i++)}return r/i},Zc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;r?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var a=0,l=e.length-1;l>=0;l--){var s=e[l];o?isFinite(s)||(e[l]=-1/0,a++):e.splice(l,1)}i&&e.sort(function(h,g){return h-g});var u=e.length,c=Math.floor(u/2);return u%2!==0?e[c+1+a]:(e[c-1+a]+e[c+a])/2},Qc=function(e){return Math.PI*e/180},Or=function(e,t){return Math.atan2(t,e)-Math.PI/2},ya=Math.log2||function(e){return Math.log(e)/Math.log(2)},_s=function(e){return e>0?1:e<0?-1:0},fn=function(e,t){return Math.sqrt(ln(e,t))},ln=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},Jc=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},$e=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},Sn=function(e,t,n,r){return{x:$e(e.x,t.x,n.x,r),y:$e(e.y,t.y,n.y,r)}},eh=function(e,t,n,r){var i={x:t.x-e.x,y:t.y-e.y},o=fn(e,t),a={x:i.x/o,y:i.y/o};return n=n??0,r=r??n*o,{x:e.x+a.x*r,y:e.y+a.y*r}},gr=function(e,t,n){return Math.max(e,Math.min(n,t))},pt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},th=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},nh=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},rh=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},Ts=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},ih=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Ur=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},jr=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,r,i,o;if(t.length===1)n=r=i=o=t[0];else if(t.length===2)n=i=t[0],o=r=t[1];else if(t.length===4){var a=Ct(t,4);n=a[0],r=a[1],i=a[2],o=a[3]}return e.x1-=o,e.x2+=r,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Wa=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},ma=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},Bn=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},ah=function(e,t){return Bn(e,t.x,t.y)},Cs=function(e,t){return Bn(e,t.x1,t.y1)&&Bn(e,t.x2,t.y2)},Ds=function(e,t,n,r,i,o,a){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",s=l==="auto"?vn(i,o):l,u=i/2,c=o/2;s=Math.min(s,u,c);var h=s!==u,g=s!==c,d;if(h){var p=n-u+s-a,v=r-c-a,b=n+u-s+a,f=v;if(d=$t(e,t,n,r,p,v,b,f,!1),d.length>0)return d}if(g){var m=n+u+a,x=r-c+s-a,T=m,_=r+c-s+a;if(d=$t(e,t,n,r,m,x,T,_,!1),d.length>0)return d}if(h){var C=n-u+s-a,y=r+c+a,w=n+u-s+a,E=y;if(d=$t(e,t,n,r,C,y,w,E,!1),d.length>0)return d}if(g){var D=n-u-a,A=r-c+s-a,k=D,M=r+c-s+a;if(d=$t(e,t,n,r,D,A,k,M,!1),d.length>0)return d}var L;{var O=n-u+s,R=r-c+s;if(L=ar(e,t,n,r,O,R,s+a),L.length>0&&L[0]<=O&&L[1]<=R)return[L[0],L[1]]}{var I=n+u-s,S=r-c+s;if(L=ar(e,t,n,r,I,S,s+a),L.length>0&&L[0]>=I&&L[1]<=S)return[L[0],L[1]]}{var P=n+u-s,z=r+c-s;if(L=ar(e,t,n,r,P,z,s+a),L.length>0&&L[0]>=P&&L[1]>=z)return[L[0],L[1]]}{var F=n-u+s,G=r+c-s;if(L=ar(e,t,n,r,F,G,s+a),L.length>0&&L[0]<=F&&L[1]>=G)return[L[0],L[1]]}return[]},oh=function(e,t,n,r,i,o,a){var l=a,s=Math.min(n,i),u=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return s-l<=e&&e<=u+l&&c-l<=t&&t<=h+l},sh=function(e,t,n,r,i,o,a,l,s){var u={x1:Math.min(n,a,i)-s,x2:Math.max(n,a,i)+s,y1:Math.min(r,l,o)-s,y2:Math.max(r,l,o)+s};return!(e<u.x1||e>u.x2||t<u.y1||t>u.y2)},lh=function(e,t,n,r){n-=r;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),a=2*e,l=(-t+o)/a,s=(-t-o)/a;return[l,s]},uh=function(e,t,n,r,i){var o=1e-5;e===0&&(e=o),t/=e,n/=e,r/=e;var a,l,s,u,c,h,g,d;if(l=(3*n-t*t)/9,s=-(27*r)+t*(9*n-2*(t*t)),s/=54,a=l*l*l+s*s,i[1]=0,g=t/3,a>0){c=s+Math.sqrt(a),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),h=s-Math.sqrt(a),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),i[0]=-g+c+h,g+=(c+h)/2,i[4]=i[2]=-g,g=Math.sqrt(3)*(-h+c)/2,i[3]=g,i[5]=-g;return}if(i[5]=i[3]=0,a===0){d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-g+2*d,i[4]=i[2]=-(d+g);return}l=-l,u=l*l*l,u=Math.acos(s/Math.sqrt(u)),d=2*Math.sqrt(l),i[0]=-g+d*Math.cos(u/3),i[2]=-g+d*Math.cos((u+2*Math.PI)/3),i[4]=-g+d*Math.cos((u+4*Math.PI)/3)},ch=function(e,t,n,r,i,o,a,l){var s=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*l+4*o*o-4*o*l+l*l,u=1*9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*l-6*o*o+3*o*l,c=1*3*n*n-6*n*i+n*a-n*e+2*i*i+2*i*e-a*e+3*r*r-6*r*o+r*l-r*t+2*o*o+2*o*t-l*t,h=1*n*i-n*n+n*e-i*e+r*o-r*r+r*t-o*t,g=[];uh(s,u,c,h,g);for(var d=1e-7,p=[],v=0;v<6;v+=2)Math.abs(g[v+1])<d&&g[v]>=0&&g[v]<=1&&p.push(g[v]);p.push(1),p.push(0);for(var b=-1,f,m,x,T=0;T<p.length;T++)f=Math.pow(1-p[T],2)*n+2*(1-p[T])*p[T]*i+p[T]*p[T]*a,m=Math.pow(1-p[T],2)*r+2*(1-p[T])*p[T]*o+p[T]*p[T]*l,x=Math.pow(f-e,2)+Math.pow(m-t,2),b>=0?x<b&&(b=x):b=x;return b},hh=function(e,t,n,r,i,o){var a=[e-n,t-r],l=[i-n,o-r],s=l[0]*l[0]+l[1]*l[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*l[0]+a[1]*l[1],h=c*c/s;return c<0?u:h>s?(e-i)*(e-i)+(t-o)*(t-o):u-h},dt=function(e,t,n){for(var r,i,o,a,l,s=0,u=0;u<n.length/2;u++)if(r=n[u*2],i=n[u*2+1],u+1<n.length/2?(o=n[(u+1)*2],a=n[(u+1)*2+1]):(o=n[(u+1-n.length/2)*2],a=n[(u+1-n.length/2)*2+1]),!(r==e&&o==e))if(r>=e&&e>=o||r<=e&&e<=o)l=(e-r)/(o-r)*(a-i)+i,l>t&&s++;else continue;return s%2!==0},Vt=function(e,t,n,r,i,o,a,l,s){var u=new Array(n.length),c;l[0]!=null?(c=Math.atan(l[1]/l[0]),l[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=l;for(var h=Math.cos(-c),g=Math.sin(-c),d=0;d<u.length/2;d++)u[d*2]=o/2*(n[d*2]*h-n[d*2+1]*g),u[d*2+1]=a/2*(n[d*2+1]*h+n[d*2]*g),u[d*2]+=r,u[d*2+1]+=i;var p;if(s>0){var v=ai(u,-s);p=ii(v)}else p=u;return dt(e,t,p)},dh=function(e,t,n,r,i,o,a,l){for(var s=new Array(n.length*2),u=0;u<l.length;u++){var c=l[u];s[u*4+0]=c.startX,s[u*4+1]=c.startY,s[u*4+2]=c.stopX,s[u*4+3]=c.stopY;var h=Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2);if(h<=Math.pow(c.radius,2))return!0}return dt(e,t,s)},ii=function(e){for(var t=new Array(e.length/2),n,r,i,o,a,l,s,u,c=0;c<e.length/4;c++){n=e[c*4],r=e[c*4+1],i=e[c*4+2],o=e[c*4+3],c<e.length/4-1?(a=e[(c+1)*4],l=e[(c+1)*4+1],s=e[(c+1)*4+2],u=e[(c+1)*4+3]):(a=e[0],l=e[1],s=e[2],u=e[3]);var h=$t(n,r,i,o,a,l,s,u,!0);t[c*2]=h[0],t[c*2+1]=h[1]}return t},ai=function(e,t){for(var n=new Array(e.length*2),r,i,o,a,l=0;l<e.length/2;l++){r=e[l*2],i=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],a=e[(l+1)*2+1]):(o=e[0],a=e[1]);var s=a-i,u=-(o-r),c=Math.sqrt(s*s+u*u),h=s/c,g=u/c;n[l*4]=r+h*t,n[l*4+1]=i+g*t,n[l*4+2]=o+h*t,n[l*4+3]=a+g*t}return n},ph=function(e,t,n,r,i,o){var a=n-e,l=r-t;a/=i,l/=o;var s=Math.sqrt(a*a+l*l),u=s-1;if(u<0)return[];var c=u/s;return[(n-e)*c+e,(r-t)*c+t]},dn=function(e,t,n,r,i,o,a){return e-=i,t-=o,e/=n/2+a,t/=r/2+a,e*e+t*t<=1},ar=function(e,t,n,r,i,o,a){var l=[n-e,r-t],s=[e-i,t-o],u=l[0]*l[0]+l[1]*l[1],c=2*(s[0]*l[0]+s[1]*l[1]),h=s[0]*s[0]+s[1]*s[1]-a*a,g=c*c-4*u*h;if(g<0)return[];var d=(-c+Math.sqrt(g))/(2*u),p=(-c-Math.sqrt(g))/(2*u),v=Math.min(d,p),b=Math.max(d,p),f=[];if(v>=0&&v<=1&&f.push(v),b>=0&&b<=1&&f.push(b),f.length===0)return[];var m=f[0]*l[0]+e,x=f[0]*l[1]+t;if(f.length>1){if(f[0]==f[1])return[m,x];var T=f[1]*l[0]+e,_=f[1]*l[1]+t;return[m,x,T,_]}else return[m,x]},Pi=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},$t=function(e,t,n,r,i,o,a,l,s){var u=e-i,c=n-e,h=a-i,g=t-o,d=r-t,p=l-o,v=h*g-p*u,b=c*g-d*u,f=p*c-h*d;if(f!==0){var m=v/f,x=b/f,T=.001,_=0-T,C=1+T;return _<=m&&m<=C&&_<=x&&x<=C?[e+m*c,t+m*d]:s?[e+m*c,t+m*d]:[]}else return v===0||b===0?Pi(e,n,a)===a?[a,l]:Pi(e,n,i)===i?[i,o]:Pi(i,a,n)===n?[n,r]:[]:[]},fr=function(e,t,n,r,i,o,a,l){var s=[],u,c=new Array(n.length),h=!0;o==null&&(h=!1);var g;if(h){for(var d=0;d<c.length/2;d++)c[d*2]=n[d*2]*o+r,c[d*2+1]=n[d*2+1]*a+i;if(l>0){var p=ai(c,-l);g=ii(p)}else g=c}else g=n;for(var v,b,f,m,x=0;x<g.length/2;x++)v=g[x*2],b=g[x*2+1],x<g.length/2-1?(f=g[(x+1)*2],m=g[(x+1)*2+1]):(f=g[0],m=g[1]),u=$t(e,t,r,i,v,b,f,m),u.length!==0&&s.push(u[0],u[1]);return s},gh=function(e,t,n,r,i,o,a,l,s){var u=[],c,h=new Array(n.length*2);s.forEach(function(f,m){m===0?(h[h.length-2]=f.startX,h[h.length-1]=f.startY):(h[m*4-2]=f.startX,h[m*4-1]=f.startY),h[m*4]=f.stopX,h[m*4+1]=f.stopY,c=ar(e,t,r,i,f.cx,f.cy,f.radius),c.length!==0&&u.push(c[0],c[1])});for(var g=0;g<h.length/4;g++)c=$t(e,t,r,i,h[g*4],h[g*4+1],h[g*4+2],h[g*4+3],!1),c.length!==0&&u.push(c[0],c[1]);if(u.length>2){for(var d=[u[0],u[1]],p=Math.pow(d[0]-e,2)+Math.pow(d[1]-t,2),v=1;v<u.length/2;v++){var b=Math.pow(u[v*2]-e,2)+Math.pow(u[v*2+1]-t,2);b<=p&&(d[0]=u[v*2],d[1]=u[v*2+1],p=b)}return d}return u},Ir=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*r[0],t[1]+o*r[1]]},ut=function(e,t){var n=ji(e,t);return n=As(n),n},As=function(e){for(var t,n,r=e.length/2,i=1/0,o=1/0,a=-1/0,l=-1/0,s=0;s<r;s++)t=e[2*s],n=e[2*s+1],i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),l=Math.max(l,n);for(var u=2/(a-i),c=2/(l-o),h=0;h<r;h++)t=e[2*h]=e[2*h]*u,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var g=0;g<r;g++)n=e[2*g+1]=e[2*g+1]+(-1-o);return e},ji=function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i=new Array(e*2),o,a=0;a<e;a++)o=a*n+r,i[2*a]=Math.cos(o),i[2*a+1]=Math.sin(-o);return i},vn=function(e,t){return Math.min(e/4,t/4,8)},ks=function(e,t){return Math.min(e/10,t/10,8)},ba=function(){return 8},fh=function(e,t,n){return[e-2*t+n,2*(t-e),e]},qi=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},vh=et({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),yh={pageRank:function(e){for(var t=vh(e),n=t.dampingFactor,r=t.precision,i=t.iterations,o=t.weight,a=this._private.cy,l=this.byGroup(),s=l.nodes,u=l.edges,c=s.length,h=c*c,g=u.length,d=new Array(h),p=new Array(c),v=(1-n)/c,b=0;b<c;b++){for(var f=0;f<c;f++){var m=b*c+f;d[m]=0}p[b]=0}for(var x=0;x<g;x++){var T=u[x],_=T.data("source"),C=T.data("target");if(_!==C){var y=s.indexOfId(_),w=s.indexOfId(C),E=o(T),D=w*c+y;d[D]+=E,p[y]+=E}}for(var A=1/c+v,k=0;k<c;k++)if(p[k]===0)for(var M=0;M<c;M++){var L=M*c+k;d[L]=A}else for(var O=0;O<c;O++){var R=O*c+k;d[R]=d[R]/p[k]+v}for(var I=new Array(c),S=new Array(c),P,z=0;z<c;z++)I[z]=1;for(var F=0;F<i;F++){for(var G=0;G<c;G++)S[G]=0;for(var Y=0;Y<c;Y++)for(var W=0;W<c;W++){var Q=Y*c+W;S[Y]+=d[Q]*I[W]}Jc(S),P=I,I=S,S=P;for(var B=0,U=0;U<c;U++){var X=P[U]-I[U];B+=X*X}if(B<r)break}var $={rank:function(Z){return Z=a.collection(Z)[0],I[s.indexOf(Z)]}};return $}},$a=et({root:null,weight:function(e){return 1},directed:!1,alpha:0}),On={degreeCentralityNormalized:function(e){e=$a(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var i={},o={},a=0,l=0,s=0;s<r;s++){var u=n[s],c=u.id();e.root=u;var h=this.degreeCentrality(e);a<h.indegree&&(a=h.indegree),l<h.outdegree&&(l=h.outdegree),i[c]=h.indegree,o[c]=h.outdegree}return{indegree:function(f){return a==0?0:(he(f)&&(f=t.filter(f)),i[f.id()]/a)},outdegree:function(f){return l===0?0:(he(f)&&(f=t.filter(f)),o[f.id()]/l)}}}else{for(var g={},d=0,p=0;p<r;p++){var v=n[p];e.root=v;var b=this.degreeCentrality(e);d<b.degree&&(d=b.degree),g[v.id()]=b.degree}return{degree:function(f){return d===0?0:(he(f)&&(f=t.filter(f)),g[f.id()]/d)}}}},degreeCentrality:function(e){e=$a(e);var t=this.cy(),n=this,r=e,i=r.root,o=r.weight,a=r.directed,l=r.alpha;if(i=t.collection(i)[0],a){for(var s=i.connectedEdges(),u=s.filter(function(_){return _.target().same(i)&&n.has(_)}),c=s.filter(function(_){return _.source().same(i)&&n.has(_)}),h=u.length,g=c.length,d=0,p=0,v=0;v<u.length;v++)d+=o(u[v]);for(var b=0;b<c.length;b++)p+=o(c[b]);return{indegree:Math.pow(h,1-l)*Math.pow(d,l),outdegree:Math.pow(g,1-l)*Math.pow(p,l)}}else{for(var f=i.connectedEdges().intersection(n),m=f.length,x=0,T=0;T<f.length;T++)x+=o(f[T]);return{degree:Math.pow(m,1-l)*Math.pow(x,l)}}}};On.dc=On.degreeCentrality;On.dcn=On.degreeCentralityNormalised=On.degreeCentralityNormalized;var Ka=et({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),In={closenessCentralityNormalized:function(e){for(var t=Ka(e),n=t.harmonic,r=t.weight,i=t.directed,o=this.cy(),a={},l=0,s=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),c=0;c<s.length;c++){for(var h=0,g=s[c],d=0;d<s.length;d++)if(c!==d){var p=u.distance(g,s[d]);n?h+=1/p:h+=p}n||(h=1/h),l<h&&(l=h),a[g.id()]=h}return{closeness:function(v){return l==0?0:(he(v)?v=o.filter(v)[0].id():v=v.id(),a[v]/l)}}},closenessCentrality:function(e){var t=Ka(e),n=t.root,r=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),l=0,s=this.nodes(),u=0;u<s.length;u++){var c=s[u];if(!c.same(n)){var h=a.distanceTo(c);o?l+=1/h:l+=h}}return o?l:1/l}};In.cc=In.closenessCentrality;In.ccn=In.closenessCentralityNormalised=In.closenessCentralityNormalized;var mh=et({weight:null,directed:!1}),Hi={betweennessCentrality:function(e){for(var t=mh(e),n=t.directed,r=t.weight,i=r!=null,o=this.cy(),a=this.nodes(),l={},s={},u=0,c={set:function(f,m){s[f]=m,m>u&&(u=m)},get:function(f){return s[f]}},h=0;h<a.length;h++){var g=a[h],d=g.id();n?l[d]=g.outgoers().nodes():l[d]=g.openNeighborhood().nodes(),c.set(d,0)}for(var p=function(f){for(var m=a[f].id(),x=[],T={},_={},C={},y=new Tr(function(Y,W){return C[Y]-C[W]}),w=0;w<a.length;w++){var E=a[w].id();T[E]=[],_[E]=0,C[E]=1/0}for(_[m]=1,C[m]=0,y.push(m);!y.empty();){var D=y.pop();if(x.push(D),i)for(var A=0;A<l[D].length;A++){var k=l[D][A],M=o.getElementById(D),L=void 0;M.edgesTo(k).length>0?L=M.edgesTo(k)[0]:L=k.edgesTo(M)[0];var O=r(L);k=k.id(),C[k]>C[D]+O&&(C[k]=C[D]+O,y.nodes.indexOf(k)<0?y.push(k):y.updateItem(k),_[k]=0,T[k]=[]),C[k]==C[D]+O&&(_[k]=_[k]+_[D],T[k].push(D))}else for(var R=0;R<l[D].length;R++){var I=l[D][R].id();C[I]==1/0&&(y.push(I),C[I]=C[D]+1),C[I]==C[D]+1&&(_[I]=_[I]+_[D],T[I].push(D))}}for(var S={},P=0;P<a.length;P++)S[a[P].id()]=0;for(;x.length>0;){for(var z=x.pop(),F=0;F<T[z].length;F++){var G=T[z][F];S[G]=S[G]+_[G]/_[z]*(1+S[z])}z!=a[f].id()&&c.set(z,c.get(z)+S[z])}},v=0;v<a.length;v++)p(v);var b={betweenness:function(f){var m=o.collection(f).id();return c.get(m)},betweennessNormalized:function(f){if(u==0)return 0;var m=o.collection(f).id();return c.get(m)/u}};return b.betweennessNormalised=b.betweennessNormalized,b}};Hi.bc=Hi.betweennessCentrality;var bh=et({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),xh=function(e){return bh(e)},wh=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},Eh=function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n},Ls=function(e,t){for(var n,r=0;r<t;r++){n=0;for(var i=0;i<t;i++)n+=e[i*t+r];for(var o=0;o<t;o++)e[o*t+r]=e[o*t+r]/n}},_h=function(e,t,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var l=0;l<n;l++)r[i*n+l]+=e[i*n+a]*t[a*n+l]}return r},Th=function(e,t,n){for(var r=e.slice(0),i=1;i<n;i++)e=_h(e,r,t);return e},Ch=function(e,t,n){for(var r=new Array(t*t),i=0;i<t*t;i++)r[i]=Math.pow(e[i],n);return Ls(r,t),r},Dh=function(e,t,n,r){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r),a=Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r);if(o!==a)return!1}return!0},Ah=function(e,t,n,r){for(var i=[],o=0;o<t;o++){for(var a=[],l=0;l<t;l++)Math.round(e[o*t+l]*1e3)/1e3>0&&a.push(n[l]);a.length!==0&&i.push(r.collection(a))}return i},kh=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},Lh=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&kh(e[t],e[n])&&e.splice(n,1);return e},Za=function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),i=xh(e),o={},a=0;a<t.length;a++)o[t[a].id()]=a;for(var l=t.length,s=l*l,u=new Array(s),c,h=0;h<s;h++)u[h]=0;for(var g=0;g<n.length;g++){var d=n[g],p=o[d.source().id()],v=o[d.target().id()],b=wh(d,i.attributes);u[p*l+v]+=b,u[v*l+p]+=b}Eh(u,l,i.multFactor),Ls(u,l);for(var f=!0,m=0;f&&m<i.maxIterations;)f=!1,c=Th(u,l,i.expandFactor),u=Ch(c,l,i.inflateFactor),Dh(u,c,s,4)||(f=!0),m++;var x=Ah(u,l,t,r);return x=Lh(x),x},Nh={markovClustering:Za,mcl:Za},Mh=function(e){return e},Ns=function(e,t){return Math.abs(t-e)},Qa=function(e,t,n){return e+Ns(t,n)},Ja=function(e,t,n){return e+Math.pow(n-t,2)},Sh=function(e){return Math.sqrt(e)},Oh=function(e,t,n){return Math.max(e,Ns(t,n))},Jn=function(e,t,n,r,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Mh,a=r,l,s,u=0;u<e;u++)l=t(u),s=n(u),a=i(a,l,s);return o(a)},Fn={euclidean:function(e,t,n){return e>=2?Jn(e,t,n,0,Ja,Sh):Jn(e,t,n,0,Qa)},squaredEuclidean:function(e,t,n){return Jn(e,t,n,0,Ja)},manhattan:function(e,t,n){return Jn(e,t,n,0,Qa)},max:function(e,t,n){return Jn(e,t,n,-1/0,Oh)}};Fn["squared-euclidean"]=Fn.squaredEuclidean;Fn.squaredeuclidean=Fn.squaredEuclidean;function yi(e,t,n,r,i,o){var a;return Re(e)?a=e:a=Fn[e]||Fn.euclidean,t===0&&Re(e)?a(i,o):a(t,n,r,i,o)}var Ih=et({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),xa=function(e){return Ih(e)},oi=function(e,t,n,r,i){var o=i!=="kMedoids",a=o?function(c){return n[c]}:function(c){return r[c](n)},l=function(c){return r[c](t)},s=n,u=t;return yi(e,r.length,a,l,s,u)},Ri=function(e,t,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(t),l=null,s=0;s<r;s++)i[s]=e.min(n[s]).value,o[s]=e.max(n[s]).value;for(var u=0;u<t;u++){l=[];for(var c=0;c<r;c++)l[c]=Math.random()*(o[c]-i[c])+i[c];a[u]=l}return a},Ms=function(e,t,n,r,i){for(var o=1/0,a=0,l=0;l<t.length;l++){var s=oi(n,e,t[l],r,i);s<o&&(o=s,a=l)}return a},Ss=function(e,t,n){for(var r=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&r.push(i);return r},Ph=function(e,t,n){return Math.abs(t-e)<=n},Rh=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++){var o=Math.abs(e[r][i]-t[r][i]);if(o>n)return!1}return!0},Bh=function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},eo=function(e,t){var n=new Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var i=e[Math.floor(Math.random()*e.length)];Bh(i,n,r);)i=e[Math.floor(Math.random()*e.length)];n[r]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},to=function(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=oi("manhattan",t[i],e,n,"kMedoids");return r},Fh=function(e){var t=this.cy(),n=this.nodes(),r=null,i=xa(e),o=new Array(i.k),a={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=Ri(n,i.k,i.attributes)):je(i.testCentroids)==="object"?l=i.testCentroids:l=Ri(n,i.k,i.attributes):l=Ri(n,i.k,i.attributes);for(var s=!0,u=0;s&&u<i.maxIterations;){for(var c=0;c<n.length;c++)r=n[c],a[r.id()]=Ms(r,l,i.distance,i.attributes,"kMeans");s=!1;for(var h=0;h<i.k;h++){var g=Ss(h,n,a);if(g.length!==0){for(var d=i.attributes.length,p=l[h],v=new Array(d),b=new Array(d),f=0;f<d;f++){b[f]=0;for(var m=0;m<g.length;m++)r=g[m],b[f]+=i.attributes[f](r);v[f]=b[f]/g.length,Ph(v[f],p[f],i.sensitivityThreshold)||(s=!0)}l[h]=v,o[h]=t.collection(g)}}u++}return o},zh=function(e){var t=this.cy(),n=this.nodes(),r=null,i=xa(e),o=new Array(i.k),a,l={},s,u=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(je(i.testCentroids)==="object"?a=i.testCentroids:a=eo(n,i.k)):a=eo(n,i.k);for(var c=!0,h=0;c&&h<i.maxIterations;){for(var g=0;g<n.length;g++)r=n[g],l[r.id()]=Ms(r,a,i.distance,i.attributes,"kMedoids");c=!1;for(var d=0;d<a.length;d++){var p=Ss(d,n,l);if(p.length!==0){u[d]=to(a[d],p,i.attributes);for(var v=0;v<p.length;v++)s=to(p[v],p,i.attributes),s<u[d]&&(u[d]=s,a[d]=p[v],c=!0);o[d]=t.collection(p)}}h++}return o},Gh=function(e,t,n,r,i){for(var o,a,l=0;l<t.length;l++)for(var s=0;s<e.length;s++)r[l][s]=Math.pow(n[l][s],i.m);for(var u=0;u<e.length;u++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var h=0;h<t.length;h++)o+=r[h][u]*i.attributes[c](t[h]),a+=r[h][u];e[u][c]=o/a}},Yh=function(e,t,n,r,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var a,l,s,u=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<r.length;h++){a=0;for(var g=0;g<n.length;g++)l=oi(i.distance,r[h],n[c],i.attributes,"cmeans"),s=oi(i.distance,r[h],n[g],i.attributes,"cmeans"),a+=Math.pow(l/s,u);e[h][c]=1/a}},Vh=function(e,t,n,r){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var a,l,s=0;s<t.length;s++){a=-1/0,l=-1;for(var u=0;u<t[0].length;u++)t[s][u]>a&&(a=t[s][u],l=u);i[l].push(e[s])}for(var c=0;c<i.length;c++)i[c]=r.collection(i[c]);return i},no=function(e){var t=this.cy(),n=this.nodes(),r=xa(e),i,o,a,l,s;l=new Array(n.length);for(var u=0;u<n.length;u++)l[u]=new Array(r.k);a=new Array(n.length);for(var c=0;c<n.length;c++)a[c]=new Array(r.k);for(var h=0;h<n.length;h++){for(var g=0,d=0;d<r.k;d++)a[h][d]=Math.random(),g+=a[h][d];for(var p=0;p<r.k;p++)a[h][p]=a[h][p]/g}o=new Array(r.k);for(var v=0;v<r.k;v++)o[v]=new Array(r.attributes.length);s=new Array(n.length);for(var b=0;b<n.length;b++)s[b]=new Array(r.k);for(var f=!0,m=0;f&&m<r.maxIterations;)f=!1,Gh(o,n,a,s,r),Yh(a,l,o,n,r),Rh(a,l,r.sensitivityThreshold)||(f=!0),m++;return i=Vh(n,a,r,t),{clusters:i,degreeOfMembership:a}},Xh={kMeans:Fh,kMedoids:zh,fuzzyCMeans:no,fcm:no},Uh=et({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),jh={single:"min",complete:"max"},qh=function(e){var t=Uh(e),n=jh[t.linkage];return n!=null&&(t.linkage=n),t},ro=function(e,t,n,r,i){for(var o=0,a=1/0,l,s=i.attributes,u=function(y,w){return yi(i.distance,s.length,function(E){return s[E](y)},function(E){return s[E](w)},y,w)},c=0;c<e.length;c++){var h=e[c].key,g=n[h][r[h]];g<a&&(o=h,a=g)}if(i.mode==="threshold"&&a>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var d=t[o],p=t[r[o]],v;i.mode==="dendrogram"?v={left:d,right:p,key:d.key}:v={value:d.value.concat(p.value),key:d.key},e[d.index]=v,e.splice(p.index,1),t[d.key]=v;for(var b=0;b<e.length;b++){var f=e[b];d.key===f.key?l=1/0:i.linkage==="min"?(l=n[d.key][f.key],n[d.key][f.key]>n[p.key][f.key]&&(l=n[p.key][f.key])):i.linkage==="max"?(l=n[d.key][f.key],n[d.key][f.key]<n[p.key][f.key]&&(l=n[p.key][f.key])):i.linkage==="mean"?l=(n[d.key][f.key]*d.size+n[p.key][f.key]*p.size)/(d.size+p.size):i.mode==="dendrogram"?l=u(f.value,d.value):l=u(f.value[0],d.value[0]),n[d.key][f.key]=n[f.key][d.key]=l}for(var m=0;m<e.length;m++){var x=e[m].key;if(r[x]===d.key||r[x]===p.key){for(var T=x,_=0;_<e.length;_++){var C=e[_].key;n[x][C]<n[x][T]&&(T=C)}r[x]=T}e[m].index=m}return d.key=p.key=d.index=p.index=null,!0},Pr=function e(t,n,r){t&&(t.value?n.push(t.value):(t.left&&e(t.left,n),t.right&&e(t.right,n)))},Hh=function e(t,n){if(!t)return"";if(t.left&&t.right){var r=e(t.left,n),i=e(t.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}else if(t.value)return t.value.id()},Wh=function e(t,n,r){if(!t)return[];var i=[],o=[],a=[];return n===0?(t.left&&Pr(t.left,i),t.right&&Pr(t.right,o),a=i.concat(o),[r.collection(a)]):n===1?t.value?[r.collection(t.value)]:(t.left&&Pr(t.left,i),t.right&&Pr(t.right,o),[r.collection(i),r.collection(o)]):t.value?[r.collection(t.value)]:(t.left&&(i=e(t.left,n-1,r)),t.right&&(o=e(t.right,n-1,r)),i.concat(o))},io=function(e){for(var t=this.cy(),n=this.nodes(),r=qh(e),i=r.attributes,o=function(f,m){return yi(r.distance,i.length,function(x){return i[x](f)},function(x){return i[x](m)},f,m)},a=[],l=[],s=[],u=[],c=0;c<n.length;c++){var h={value:r.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};a[c]=h,u[c]=h,l[c]=[],s[c]=0}for(var g=0;g<a.length;g++)for(var d=0;d<=g;d++){var p=void 0;r.mode==="dendrogram"?p=g===d?1/0:o(a[g].value,a[d].value):p=g===d?1/0:o(a[g].value[0],a[d].value[0]),l[g][d]=p,l[d][g]=p,p<l[g][s[g]]&&(s[g]=d)}for(var v=ro(a,u,l,s,r);v;)v=ro(a,u,l,s,r);var b;return r.mode==="dendrogram"?(b=Wh(a[0],r.dendrogramDepth,t),r.addDendrogram&&Hh(a[0],t)):(b=new Array(a.length),a.forEach(function(f,m){f.key=f.index=null,b[m]=t.collection(f.value)})),b},$h={hierarchicalClustering:io,hca:io},Kh=et({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Zh=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||Be("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(i){return i===n})||ne(n)||Be("Preference must be one of [".concat(r.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Kh(e)},Qh=function(e,t,n,r){var i=function(o,a){return r[a](o)};return-yi(e,r.length,function(o){return i(t,o)},function(o){return i(n,o)},t,n)},Jh=function(e,t){var n=null;return t==="median"?n=Zc(e):t==="mean"?n=Kc(e):t==="min"?n=Wc(e):t==="max"?n=$c(e):n=t,n},ed=function(e,t,n){for(var r=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&r.push(i);return r},ao=function(e,t,n){for(var r=[],i=0;i<e;i++){for(var o=-1,a=-1/0,l=0;l<n.length;l++){var s=n[l];t[i*e+s]>a&&(o=s,a=t[i*e+s])}o>0&&r.push(o)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},td=function(e,t,n){for(var r=ao(e,t,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var l=-1,s=-1/0,u=0;u<o.length;u++){for(var c=0,h=0;h<o.length;h++)c+=t[o[h]*e+o[u]];c>s&&(l=u,s=c)}n[i]=o[l]}return r=ao(e,t,n),r},oo=function(e){for(var t=this.cy(),n=this.nodes(),r=Zh(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var a,l,s,u,c,h;a=n.length,l=a*a,s=new Array(l);for(var g=0;g<l;g++)s[g]=-1/0;for(var d=0;d<a;d++)for(var p=0;p<a;p++)d!==p&&(s[d*a+p]=Qh(r.distance,n[d],n[p],r.attributes));u=Jh(s,r.preference);for(var v=0;v<a;v++)s[v*a+v]=u;c=new Array(l);for(var b=0;b<l;b++)c[b]=0;h=new Array(l);for(var f=0;f<l;f++)h[f]=0;for(var m=new Array(a),x=new Array(a),T=new Array(a),_=0;_<a;_++)m[_]=0,x[_]=0,T[_]=0;for(var C=new Array(a*r.minIterations),y=0;y<C.length;y++)C[y]=0;var w;for(w=0;w<r.maxIterations;w++){for(var E=0;E<a;E++){for(var D=-1/0,A=-1/0,k=-1,M=0,L=0;L<a;L++)m[L]=c[E*a+L],M=h[E*a+L]+s[E*a+L],M>=D?(A=D,D=M,k=L):M>A&&(A=M);for(var O=0;O<a;O++)c[E*a+O]=(1-r.damping)*(s[E*a+O]-D)+r.damping*m[O];c[E*a+k]=(1-r.damping)*(s[E*a+k]-A)+r.damping*m[k]}for(var R=0;R<a;R++){for(var I=0,S=0;S<a;S++)m[S]=h[S*a+R],x[S]=Math.max(0,c[S*a+R]),I+=x[S];I-=x[R],x[R]=c[R*a+R],I+=x[R];for(var P=0;P<a;P++)h[P*a+R]=(1-r.damping)*Math.min(0,I-x[P])+r.damping*m[P];h[R*a+R]=(1-r.damping)*(I-x[R])+r.damping*m[R]}for(var z=0,F=0;F<a;F++){var G=h[F*a+F]+c[F*a+F]>0?1:0;C[w%r.minIterations*a+F]=G,z+=G}if(z>0&&(w>=r.minIterations-1||w==r.maxIterations-1)){for(var Y=0,W=0;W<a;W++){T[W]=0;for(var Q=0;Q<r.minIterations;Q++)T[W]+=C[Q*a+W];(T[W]===0||T[W]===r.minIterations)&&Y++}if(Y===a)break}}for(var B=ed(a,c,h),U=td(a,s,B),X={},$=0;$<B.length;$++)X[B[$]]=[];for(var Z=0;Z<n.length;Z++){var re=i[n[Z].id()],ge=U[re];ge!=null&&X[ge].push(n[Z])}for(var de=new Array(B.length),J=0;J<B.length;J++)de[J]=t.collection(X[B[J]]);return de},nd={affinityPropagation:oo,ap:oo},rd=et({root:void 0,directed:!1}),id={hierholzer:function(e){if(!_e(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=rd(e),r=n.root,i=n.directed,o=this,a=!1,l,s,u;r&&(u=he(r)?this.filter(r)[0].id():r[0].id());var c={},h={};i?o.forEach(function(f){var m=f.id();if(f.isNode()){var x=f.indegree(!0),T=f.outdegree(!0),_=x-T,C=T-x;_==1?l?a=!0:l=m:C==1?s?a=!0:s=m:(C>1||_>1)&&(a=!0),c[m]=[],f.outgoers().forEach(function(y){y.isEdge()&&c[m].push(y.id())})}else h[m]=[void 0,f.target().id()]}):o.forEach(function(f){var m=f.id();if(f.isNode()){var x=f.degree(!0);x%2&&(l?s?a=!0:s=m:l=m),c[m]=[],f.connectedEdges().forEach(function(T){return c[m].push(T.id())})}else h[m]=[f.source().id(),f.target().id()]});var g={found:!1,trail:void 0};if(a)return g;if(s&&l)if(i){if(u&&s!=u)return g;u=s}else{if(u&&s!=u&&l!=u)return g;u||(u=s)}else u||(u=o[0].id());var d=function(f){for(var m=f,x=[f],T,_,C;c[m].length;)T=c[m].shift(),_=h[T][0],C=h[T][1],m!=C?(c[C]=c[C].filter(function(y){return y!=T}),m=C):!i&&m!=_&&(c[_]=c[_].filter(function(y){return y!=T}),m=_),x.unshift(T),x.unshift(m);return x},p=[],v=[];for(v=d(u);v.length!=1;)c[v[0]].length==0?(p.unshift(o.getElementById(v.shift())),p.unshift(o.getElementById(v.shift()))):v=d(v.shift()).concat(v);p.unshift(o.getElementById(v.shift()));for(var b in c)if(c[b].length)return g;return g.found=!0,g.trail=this.spawn(p,!0),g}},Rr=function(){var e=this,t={},n=0,r=0,i=[],o=[],a={},l=function(c,h){for(var g=o.length-1,d=[],p=e.spawn();o[g].x!=c||o[g].y!=h;)d.push(o.pop().edge),g--;d.push(o.pop().edge),d.forEach(function(v){var b=v.connectedNodes().intersection(e);p.merge(v),b.forEach(function(f){var m=f.id(),x=f.connectedEdges().intersection(e);p.merge(f),t[m].cutVertex?p.merge(x.filter(function(T){return T.isLoop()})):p.merge(x)})}),i.push(p)},s=function c(h,g,d){h===d&&(r+=1),t[g]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(g).connectedEdges().intersection(e);if(p.size()===0)i.push(e.spawn(e.getElementById(g)));else{var v,b,f,m;p.forEach(function(x){v=x.source().id(),b=x.target().id(),f=v===g?b:v,f!==d&&(m=x.id(),a[m]||(a[m]=!0,o.push({x:g,y:f,edge:x})),f in t?t[g].low=Math.min(t[g].low,t[f].id):(c(h,f,g),t[g].low=Math.min(t[g].low,t[f].low),t[g].id<=t[f].low&&(t[g].cutVertex=!0,l(g,f))))})}};e.forEach(function(c){if(c.isNode()){var h=c.id();h in t||(r=0,s(h,h),t[h].cutVertex=r>1)}});var u=Object.keys(t).filter(function(c){return t[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(u),components:i}},ad={hopcroftTarjanBiconnected:Rr,htbc:Rr,htb:Rr,hopcroftTarjanBiconnectedComponents:Rr},Br=function(){var e=this,t={},n=0,r=[],i=[],o=e.spawn(e),a=function l(s){i.push(s),t[s]={index:n,low:n++,explored:!1};var u=e.getElementById(s).connectedEdges().intersection(e);if(u.forEach(function(p){var v=p.target().id();v!==s&&(v in t||l(v),t[v].explored||(t[s].low=Math.min(t[s].low,t[v].low)))}),t[s].index===t[s].low){for(var c=e.spawn();;){var h=i.pop();if(c.merge(e.getElementById(h)),t[h].low=t[s].index,t[h].explored=!0,h===s)break}var g=c.edgesWith(c),d=c.merge(g);r.push(d),o=o.difference(d)}};return e.forEach(function(l){if(l.isNode()){var s=l.id();s in t||a(s)}}),{cut:o,components:r}},od={tarjanStronglyConnected:Br,tsc:Br,tscc:Br,tarjanStronglyConnectedComponents:Br},Os={};[pr,Rc,Bc,zc,Yc,Xc,qc,yh,On,In,Hi,Nh,Xh,$h,nd,id,ad,od].forEach(function(e){ve(Os,e)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Is=0,Ps=1,Rs=2,Xt=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=Is,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof t=="function"&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Xt.prototype={fulfill:function(e){return so(this,Ps,"fulfillValue",e)},reject:function(e){return so(this,Rs,"rejectReason",e)},then:function(e,t){var n=this,r=new Xt;return n.onFulfilled.push(uo(e,r,"fulfill")),n.onRejected.push(uo(t,r,"reject")),Bs(n),r.proxy}};var so=function(e,t,n,r){return e.state===Is&&(e.state=t,e[n]=r,Bs(e)),e},Bs=function(e){e.state===Ps?lo(e,"onFulfilled",e.fulfillValue):e.state===Rs&&lo(e,"onRejected",e.rejectReason)},lo=function(e,t,n){if(e[t].length!==0){var r=e[t];e[t]=[];var i=function(){for(var o=0;o<r.length;o++)r[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},uo=function(e,t,n){return function(r){if(typeof e!="function")t[n].call(t,r);else{var i;try{i=e(r)}catch(o){t.reject(o);return}sd(t,i)}}},sd=function e(t,n){if(t===n||t.proxy===n){t.reject(new TypeError("cannot resolve promise with itself"));return}var r;if(je(n)==="object"&&n!==null||typeof n=="function")try{r=n.then}catch(o){t.reject(o);return}if(typeof r=="function"){var i=!1;try{r.call(n,function(o){i||(i=!0,o===n?t.reject(new TypeError("circular thenable chain")):e(t,o))},function(o){i||(i=!0,t.reject(o))})}catch(o){i||t.reject(o)}return}t.fulfill(n)};Xt.all=function(e){return new Xt(function(t,n){for(var r=new Array(e.length),i=0,o=function(l,s){r[l]=s,i++,i===e.length&&t(r)},a=0;a<e.length;a++)(function(l){var s=e[l],u=s!=null&&s.then!=null;if(u)s.then(function(h){o(l,h)},function(h){n(h)});else{var c=s;o(l,c)}})(a)})};Xt.resolve=function(e){return new Xt(function(t,n){t(e)})};Xt.reject=function(e){return new Xt(function(t,n){n(e)})};var Yn=typeof Promise<"u"?Promise:Xt,Wi=function(e,t,n){var r=da(e),i=!r,o=this._private=ve({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Re(o.complete)&&o.completes.push(o.complete),i){var a=e.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(r){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},yn=Wi.prototype;ve(yn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),ft(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,s){var u=e[l];u!=null&&(e[l]=e[s],e[s]=u)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var i=e.style[r],o=i.name,a=e.startStyle[o];e.startStyle[o]=i,e.style[r]=a}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Yn(function(r,i){n.push(function(){r()})})}});yn.complete=yn.completed;yn.run=yn.play;yn.running=yn.playing;var ld={animated:function(){return function(){var e=this,t=e.length!==void 0,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];if(i)return i._private.animation.current.length>0}},clearQueue:function(){return function(){var e=this,t=e.length!==void 0,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var o=n[i];o._private.animation.queue=[]}return this}},delay:function(){return function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this,a=!r,l=!a;if(!o.styleEnabled())return this;var s=o.style();e=ve({},e,t);var u=Object.keys(e).length===0;if(u)return new Wi(i[0],e);switch(e.duration===void 0&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(l&&(e.style=s.getPropsList(e.style||e.css),e.css=void 0),l&&e.renderedPosition!=null){var c=e.renderedPosition,h=o.pan(),g=o.zoom();e.position=Es(c,g,h)}if(a&&e.panBy!=null){var d=e.panBy,p=o.pan();e.pan={x:p.x+d.x,y:p.y+d.y}}var v=e.center||e.centre;if(a&&v!=null){var b=o.getCenterPan(v.eles,e.zoom);b!=null&&(e.pan=b)}if(a&&e.fit!=null){var f=e.fit,m=o.getFitViewport(f.eles||f.boundingBox,f.padding);m!=null&&(e.pan=m.pan,e.zoom=m.zoom)}if(a&&_e(e.zoom)){var x=o.getZoomedViewport(e.zoom);x!=null?(x.zoomed&&(e.zoom=x.zoom),x.panned&&(e.pan=x.pan)):e.zoom=null}return new Wi(i[0],e)}},animate:function(){return function(e,t){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;t&&(e=ve({},e,t));for(var a=0;a<i.length;a++){var l=i[a],s=l.animated()&&(e.queue===void 0||e.queue),u=l.animation(e,s?{queue:!0}:void 0);u.play()}return this}},stop:function(){return function(e,t){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var l=i[a],s=l._private,u=s.animation.current,c=0;c<u.length;c++){var h=u[c],g=h._private;t&&(g.duration=0)}e&&(s.animation.queue=[]),t||(s.animation.current=[])}return o.notify("draw"),this}}},ud=Array.isArray,mi=ud,cd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hd=/^\w*$/;function dd(e,t){if(mi(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||_r(e)?!0:hd.test(e)||!cd.test(e)||t!=null&&e in Object(t)}var pd=dd,gd="[object AsyncFunction]",fd="[object Function]",vd="[object GeneratorFunction]",yd="[object Proxy]";function md(e){if(!pn(e))return!1;var t=ps(e);return t==fd||t==vd||t==gd||t==yd}var bd=md,xd=pi["__core-js_shared__"],Bi=xd,co=function(){var e=/[^.]+$/.exec(Bi&&Bi.keys&&Bi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wd(e){return!!co&&co in e}var Ed=wd,_d=Function.prototype,Td=_d.toString;function Cd(e){if(e!=null){try{return Td.call(e)}catch{}try{return e+""}catch{}}return""}var Dd=Cd,Ad=/[\\^$.*+?()[\]{}|]/g,kd=/^\[object .+?Constructor\]$/,Ld=Function.prototype,Nd=Object.prototype,Md=Ld.toString,Sd=Nd.hasOwnProperty,Od=RegExp("^"+Md.call(Sd).replace(Ad,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Id(e){if(!pn(e)||Ed(e))return!1;var t=bd(e)?Od:kd;return t.test(Dd(e))}var Pd=Id;function Rd(e,t){return e==null?void 0:e[t]}var Bd=Rd;function Fd(e,t){var n=Bd(e,t);return Pd(n)?n:void 0}var wa=Fd,zd=wa(Object,"create"),vr=zd;function Gd(){this.__data__=vr?vr(null):{},this.size=0}var Yd=Gd;function Vd(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Xd=Vd,Ud="__lodash_hash_undefined__",jd=Object.prototype,qd=jd.hasOwnProperty;function Hd(e){var t=this.__data__;if(vr){var n=t[e];return n===Ud?void 0:n}return qd.call(t,e)?t[e]:void 0}var Wd=Hd,$d=Object.prototype,Kd=$d.hasOwnProperty;function Zd(e){var t=this.__data__;return vr?t[e]!==void 0:Kd.call(t,e)}var Qd=Zd,Jd="__lodash_hash_undefined__";function ep(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vr&&t===void 0?Jd:t,this}var tp=ep;function Vn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vn.prototype.clear=Yd;Vn.prototype.delete=Xd;Vn.prototype.get=Wd;Vn.prototype.has=Qd;Vn.prototype.set=tp;var ho=Vn;function np(){this.__data__=[],this.size=0}var rp=np;function ip(e,t){return e===t||e!==e&&t!==t}var Fs=ip;function ap(e,t){for(var n=e.length;n--;)if(Fs(e[n][0],t))return n;return-1}var bi=ap,op=Array.prototype,sp=op.splice;function lp(e){var t=this.__data__,n=bi(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():sp.call(t,n,1),--this.size,!0}var up=lp;function cp(e){var t=this.__data__,n=bi(t,e);return n<0?void 0:t[n][1]}var hp=cp;function dp(e){return bi(this.__data__,e)>-1}var pp=dp;function gp(e,t){var n=this.__data__,r=bi(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var fp=gp;function Xn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Xn.prototype.clear=rp;Xn.prototype.delete=up;Xn.prototype.get=hp;Xn.prototype.has=pp;Xn.prototype.set=fp;var vp=Xn,yp=wa(pi,"Map"),mp=yp;function bp(){this.size=0,this.__data__={hash:new ho,map:new(mp||vp),string:new ho}}var xp=bp;function wp(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Ep=wp;function _p(e,t){var n=e.__data__;return Ep(t)?n[typeof t=="string"?"string":"hash"]:n.map}var xi=_p;function Tp(e){var t=xi(this,e).delete(e);return this.size-=t?1:0,t}var Cp=Tp;function Dp(e){return xi(this,e).get(e)}var Ap=Dp;function kp(e){return xi(this,e).has(e)}var Lp=kp;function Np(e,t){var n=xi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Mp=Np;function Un(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Un.prototype.clear=xp;Un.prototype.delete=Cp;Un.prototype.get=Ap;Un.prototype.has=Lp;Un.prototype.set=Mp;var zs=Un,Sp="Expected a function";function Ea(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Sp);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ea.Cache||zs),n}Ea.Cache=zs;var Op=Ea,Ip=500;function Pp(e){var t=Op(e,function(r){return n.size===Ip&&n.clear(),r}),n=t.cache;return t}var Rp=Pp,Bp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fp=/\\(\\)?/g,zp=Rp(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Bp,function(n,r,i,o){t.push(i?o.replace(Fp,"$1"):r||n)}),t}),Gs=zp;function Gp(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Ys=Gp,Yp=1/0,po=Rn?Rn.prototype:void 0,go=po?po.toString:void 0;function Vs(e){if(typeof e=="string")return e;if(mi(e))return Ys(e,Vs)+"";if(_r(e))return go?go.call(e):"";var t=e+"";return t=="0"&&1/e==-Yp?"-0":t}var Vp=Vs;function Xp(e){return e==null?"":Vp(e)}var Xs=Xp;function Up(e,t){return mi(e)?e:pd(e,t)?[e]:Gs(Xs(e))}var Us=Up,jp=1/0;function qp(e){if(typeof e=="string"||_r(e))return e;var t=e+"";return t=="0"&&1/e==-jp?"-0":t}var _a=qp;function Hp(e,t){t=Us(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[_a(t[n++])];return n&&n==r?e:void 0}var Wp=Hp;function $p(e,t,n){var r=e==null?void 0:Wp(e,t);return r===void 0?n:r}var Kp=$p,Zp=function(){try{var e=wa(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fo=Zp;function Qp(e,t,n){t=="__proto__"&&fo?fo(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Jp=Qp,eg=Object.prototype,tg=eg.hasOwnProperty;function ng(e,t,n){var r=e[t];(!(tg.call(e,t)&&Fs(r,n))||n===void 0&&!(t in e))&&Jp(e,t,n)}var rg=ng,ig=9007199254740991,ag=/^(?:0|[1-9]\d*)$/;function og(e,t){var n=typeof e;return t=t??ig,!!t&&(n=="number"||n!="symbol"&&ag.test(e))&&e>-1&&e%1==0&&e<t}var sg=og;function lg(e,t,n,r){if(!pn(e))return e;t=Us(t,e);for(var i=-1,o=t.length,a=o-1,l=e;l!=null&&++i<o;){var s=_a(t[i]),u=n;if(s==="__proto__"||s==="constructor"||s==="prototype")return e;if(i!=a){var c=l[s];u=r?r(c,s,l):void 0,u===void 0&&(u=pn(c)?c:sg(t[i+1])?[]:{})}rg(l,s,u),l=l[s]}return e}var ug=lg;function cg(e,t,n){return e==null?e:ug(e,t,n)}var hg=cg;function dg(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var pg=dg;function gg(e){return mi(e)?Ys(e,_a):_r(e)?[e]:pg(Gs(Xs(e)))}var fg=gg,vg={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(n){},beforeSet:function(n,r){},onSet:function(n){},canSet:function(n){return!0}};return e=ve({},t,e),function(n,r){var i=e,o=this,a=o.length!==void 0,l=a?o:[o],s=a?o[0]:o;if(he(n)){var u=n.indexOf(".")!==-1,c=u&&fg(n);if(i.allowGetting&&r===void 0){var h;return s&&(i.beforeGet(s),c&&s._private[i.field][n]===void 0?h=Kp(s._private[i.field],c):h=s._private[i.field][n]),h}else if(i.allowSetting&&r!==void 0){var g=!i.immutableKeys[n];if(g){var d=rs({},n,r);i.beforeSet(o,d);for(var p=0,v=l.length;p<v;p++){var b=l[p];i.canSet(b)&&(c&&s._private[i.field][n]===void 0?hg(b._private[i.field],c,r):b._private[i.field][n]=r)}i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&_e(n)){var f=n,m,x,T=Object.keys(f);i.beforeSet(o,f);for(var _=0;_<T.length;_++){m=T[_],x=f[m];var C=!i.immutableKeys[m];if(C)for(var y=0;y<l.length;y++){var w=l[y];i.canSet(w)&&(w._private[i.field][m]=x)}}i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&Re(n)){var E=n;o.on(i.bindingEvent,E)}else if(i.allowGetting&&n===void 0){var D;return s&&(i.beforeGet(s),D=s._private[i.field]),D}return o}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=ve({},t,e),function(n){var r=e,i=this,o=i.length!==void 0,a=o?i:[i];if(he(n)){for(var l=n.split(/\s+/),s=l.length,u=0;u<s;u++){var c=l[u];if(!Qt(c)){var h=!r.immutableKeys[c];if(h)for(var g=0,d=a.length;g<d;g++)a[g]._private[r.field][c]=void 0}}r.triggerEvent&&i[r.triggerFnName](r.event)}else if(n===void 0){for(var p=0,v=a.length;p<v;p++)for(var b=a[p]._private[r.field],f=Object.keys(b),m=0;m<f.length;m++){var x=f[m],T=!r.immutableKeys[x];T&&(b[x]=void 0)}r.triggerEvent&&i[r.triggerFnName](r.event)}return i}}},yg={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,r){var i=this,o=Array.prototype.slice.call(arguments,0);return new Yn(function(a,l){var s=function(h){i.off.apply(i,c),a(h)},u=o.concat([s]),c=u.concat([]);i.on.apply(i,u)})}}},Ae={};[ld,vg,yg].forEach(function(e){ve(Ae,e)});var mg={animate:Ae.animate(),animation:Ae.animation(),animated:Ae.animated(),clearQueue:Ae.clearQueue(),delay:Ae.delay(),delayAnimation:Ae.delayAnimation(),stop:Ae.stop()},qr={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(d){return n.push(d)}),n}else Me(e)||(e=(e||"").match(/\S+/g)||[]);for(var r=[],i=new Gn(e),o=0;o<t.length;o++){for(var a=t[o],l=a._private,s=l.classes,u=!1,c=0;c<e.length;c++){var h=e[c],g=s.has(h);if(!g){u=!0;break}}u||(u=s.size!==e.length),u&&(l.classes=i,r.push(a))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){Me(e)||(e=e.match(/\S+/g)||[]);for(var n=this,r=t===void 0,i=[],o=0,a=n.length;o<a;o++)for(var l=n[o],s=l._private.classes,u=!1,c=0;c<e.length;c++){var h=e[c],g=s.has(h),d=!1;t||r&&!g?(s.add(h),d=!0):(!t||r&&g)&&(s.delete(h),d=!0),!u&&d&&(i.push(l),u=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};qr.className=qr.classNames=qr.classes;var Ee={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Ue,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ee.variable="(?:[\\w-.]|(?:\\\\"+Ee.metaChar+"))+";Ee.className="(?:[\\w-]|(?:\\\\"+Ee.metaChar+"))+";Ee.value=Ee.string+"|"+Ee.number;Ee.id=Ee.variable;(function(){var e,t,n;for(e=Ee.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],Ee.comparatorOp+="|@"+t;for(e=Ee.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],!(t.indexOf("!")>=0)&&t!=="="&&(Ee.comparatorOp+="|\\!"+t)})();var Ne=function(){return{checks:[]}},ae={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},$i=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return Nu(e.selector,t.selector)}),bg=function(){for(var e={},t,n=0;n<$i.length;n++)t=$i[n],e[t.selector]=t.matches;return e}(),xg=function(e,t){return bg[e](t)},wg="("+$i.map(function(e){return e.selector}).join("|")+")",_n=function(e){return e.replace(new RegExp("\\\\("+Ee.metaChar+")","g"),function(t,n){return n})},Ht=function(e,t,n){e[e.length-1]=n},Ki=[{name:"group",query:!0,regex:"("+Ee.group+")",populate:function(e,t,n){var r=Ct(n,1),i=r[0];t.checks.push({type:ae.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:wg,populate:function(e,t,n){var r=Ct(n,1),i=r[0];t.checks.push({type:ae.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Ee.id+")",populate:function(e,t,n){var r=Ct(n,1),i=r[0];t.checks.push({type:ae.ID,value:_n(i)})}},{name:"className",query:!0,regex:"\\.("+Ee.className+")",populate:function(e,t,n){var r=Ct(n,1),i=r[0];t.checks.push({type:ae.CLASS,value:_n(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ee.variable+")\\s*\\]",populate:function(e,t,n){var r=Ct(n,1),i=r[0];t.checks.push({type:ae.DATA_EXIST,field:_n(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ee.variable+")\\s*("+Ee.comparatorOp+")\\s*("+Ee.value+")\\s*\\]",populate:function(e,t,n){var r=Ct(n,3),i=r[0],o=r[1],a=r[2],l=new RegExp("^"+Ee.string+"$").exec(a)!=null;l?a=a.substring(1,a.length-1):a=parseFloat(a),t.checks.push({type:ae.DATA_COMPARE,field:_n(i),operator:o,value:a})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ee.boolOp+")\\s*("+Ee.variable+")\\s*\\]",populate:function(e,t,n){var r=Ct(n,2),i=r[0],o=r[1];t.checks.push({type:ae.DATA_BOOL,field:_n(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ee.meta+")\\s*("+Ee.comparatorOp+")\\s*("+Ee.number+")\\s*\\]\\]",populate:function(e,t,n){var r=Ct(n,3),i=r[0],o=r[1],a=r[2];t.checks.push({type:ae.META_COMPARE,field:_n(i),operator:o,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:Ee.separator,populate:function(e,t){var n=e.currentSubject,r=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=r,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var a=e[e.length++]=Ne();return a}},{name:"directedEdge",separator:!0,regex:Ee.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Ne(),r=t,i=Ne();return n.checks.push({type:ae.DIRECTED_EDGE,source:r,target:i}),Ht(e,t,n),e.edgeCount++,i}else{var o=Ne(),a=t,l=Ne();return o.checks.push({type:ae.NODE_SOURCE,source:a,target:l}),Ht(e,t,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Ee.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Ne(),r=t,i=Ne();return n.checks.push({type:ae.UNDIRECTED_EDGE,nodes:[r,i]}),Ht(e,t,n),e.edgeCount++,i}else{var o=Ne(),a=t,l=Ne();return o.checks.push({type:ae.NODE_NEIGHBOR,node:a,neighbor:l}),Ht(e,t,o),l}}},{name:"child",separator:!0,regex:Ee.child,populate:function(e,t){if(e.currentSubject==null){var n=Ne(),r=Ne(),i=e[e.length-1];return n.checks.push({type:ae.CHILD,parent:i,child:r}),Ht(e,t,n),e.compoundCount++,r}else if(e.currentSubject===t){var o=Ne(),a=e[e.length-1],l=Ne(),s=Ne(),u=Ne(),c=Ne();return o.checks.push({type:ae.COMPOUND_SPLIT,left:a,right:l,subject:s}),s.checks=t.checks,t.checks=[{type:ae.TRUE}],c.checks.push({type:ae.TRUE}),l.checks.push({type:ae.PARENT,parent:c,child:u}),Ht(e,a,o),e.currentSubject=s,e.compoundCount++,u}else{var h=Ne(),g=Ne(),d=[{type:ae.PARENT,parent:h,child:g}];return h.checks=t.checks,t.checks=d,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:Ee.descendant,populate:function(e,t){if(e.currentSubject==null){var n=Ne(),r=Ne(),i=e[e.length-1];return n.checks.push({type:ae.DESCENDANT,ancestor:i,descendant:r}),Ht(e,t,n),e.compoundCount++,r}else if(e.currentSubject===t){var o=Ne(),a=e[e.length-1],l=Ne(),s=Ne(),u=Ne(),c=Ne();return o.checks.push({type:ae.COMPOUND_SPLIT,left:a,right:l,subject:s}),s.checks=t.checks,t.checks=[{type:ae.TRUE}],c.checks.push({type:ae.TRUE}),l.checks.push({type:ae.ANCESTOR,ancestor:c,descendant:u}),Ht(e,a,o),e.currentSubject=s,e.compoundCount++,u}else{var h=Ne(),g=Ne(),d=[{type:ae.ANCESTOR,ancestor:h,descendant:g}];return h.checks=t.checks,t.checks=d,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:Ee.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return ke("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],r=n.checks[0],i=r==null?null:r.type;i===ae.DIRECTED_EDGE?r.type=ae.NODE_TARGET:i===ae.UNDIRECTED_EDGE&&(r.type=ae.NODE_NEIGHBOR,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];Ki.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var Eg=function(e){for(var t,n,r,i=0;i<Ki.length;i++){var o=Ki[i],a=o.name,l=e.match(o.regexObj);if(l!=null){n=l,t=o,r=a;var s=l[0];e=e.substring(s.length);break}}return{expr:t,match:n,name:r,remaining:e}},_g=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},Tg=function(e){var t=this,n=t.inputText=e,r=t[0]=Ne();for(t.length=1,n=_g(n);;){var i=Eg(n);if(i.expr==null)return ke("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),a=i.expr.populate(t,r,o);if(a===!1)return!1;if(a!=null&&(r=a),n=i.remaining,n.match(/^\s*$/))break}var l=t[t.length-1];t.currentSubject!=null&&(l.subject=t.currentSubject),l.edgeCount=t.edgeCount,l.compoundCount=t.compoundCount;for(var s=0;s<t.length;s++){var u=t[s];if(u.compoundCount>0&&u.edgeCount>0)return ke("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(u.edgeCount>1)return ke("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;u.edgeCount===1&&ke("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Cg=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(s){return s??""},t=function(s){return he(s)?'"'+s+'"':e(s)},n=function(s){return" "+s+" "},r=function(s,u){var c=s.type,h=s.value;switch(c){case ae.GROUP:{var g=e(h);return g.substring(0,g.length-1)}case ae.DATA_COMPARE:{var d=s.field,p=s.operator;return"["+d+n(e(p))+t(h)+"]"}case ae.DATA_BOOL:{var v=s.operator,b=s.field;return"["+e(v)+b+"]"}case ae.DATA_EXIST:{var f=s.field;return"["+f+"]"}case ae.META_COMPARE:{var m=s.operator,x=s.field;return"[["+x+n(e(m))+t(h)+"]]"}case ae.STATE:return h;case ae.ID:return"#"+h;case ae.CLASS:return"."+h;case ae.PARENT:case ae.CHILD:return i(s.parent,u)+n(">")+i(s.child,u);case ae.ANCESTOR:case ae.DESCENDANT:return i(s.ancestor,u)+" "+i(s.descendant,u);case ae.COMPOUND_SPLIT:{var T=i(s.left,u),_=i(s.subject,u),C=i(s.right,u);return T+(T.length>0?" ":"")+_+C}case ae.TRUE:return""}},i=function(s,u){return s.checks.reduce(function(c,h,g){return c+(u===s&&g===0?"$":"")+r(h,u)},"")},o="",a=0;a<this.length;a++){var l=this[a];o+=i(l,l.subject),this.length>1&&a<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Dg={parse:Tg,toString:Cg},js=function(e,t,n){var r,i=he(e),o=ne(e),a=he(n),l,s,u=!1,c=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(i||a||u)&&(l=!i&&!o?"":""+e,s=""+n),u&&(e=l=l.toLowerCase(),n=s=s.toLowerCase()),t){case"*=":r=l.indexOf(s)>=0;break;case"$=":r=l.indexOf(s,l.length-s.length)>=0;break;case"^=":r=l.indexOf(s)===0;break;case"=":r=e===n;break;case">":h=!0,r=e>n;break;case">=":h=!0,r=e>=n;break;case"<":h=!0,r=e<n;break;case"<=":h=!0,r=e<=n;break;default:r=!1;break}return c&&(e!=null||!h)&&(r=!r),r},Ag=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},kg=function(e){return e!==void 0},Ta=function(e,t){return e.data(t)},Lg=function(e,t){return e[t]()},Fe=[],Ie=function(e,t){return e.checks.every(function(n){return Fe[n.type](n,t)})};Fe[ae.GROUP]=function(e,t){var n=e.value;return n==="*"||n===t.group()};Fe[ae.STATE]=function(e,t){var n=e.value;return xg(n,t)};Fe[ae.ID]=function(e,t){var n=e.value;return t.id()===n};Fe[ae.CLASS]=function(e,t){var n=e.value;return t.hasClass(n)};Fe[ae.META_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return js(Lg(t,n),r,i)};Fe[ae.DATA_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return js(Ta(t,n),r,i)};Fe[ae.DATA_BOOL]=function(e,t){var n=e.field,r=e.operator;return Ag(Ta(t,n),r)};Fe[ae.DATA_EXIST]=function(e,t){var n=e.field;return e.operator,kg(Ta(t,n))};Fe[ae.UNDIRECTED_EDGE]=function(e,t){var n=e.nodes[0],r=e.nodes[1],i=t.source(),o=t.target();return Ie(n,i)&&Ie(r,o)||Ie(r,i)&&Ie(n,o)};Fe[ae.NODE_NEIGHBOR]=function(e,t){return Ie(e.node,t)&&t.neighborhood().some(function(n){return n.isNode()&&Ie(e.neighbor,n)})};Fe[ae.DIRECTED_EDGE]=function(e,t){return Ie(e.source,t.source())&&Ie(e.target,t.target())};Fe[ae.NODE_SOURCE]=function(e,t){return Ie(e.source,t)&&t.outgoers().some(function(n){return n.isNode()&&Ie(e.target,n)})};Fe[ae.NODE_TARGET]=function(e,t){return Ie(e.target,t)&&t.incomers().some(function(n){return n.isNode()&&Ie(e.source,n)})};Fe[ae.CHILD]=function(e,t){return Ie(e.child,t)&&Ie(e.parent,t.parent())};Fe[ae.PARENT]=function(e,t){return Ie(e.parent,t)&&t.children().some(function(n){return Ie(e.child,n)})};Fe[ae.DESCENDANT]=function(e,t){return Ie(e.descendant,t)&&t.ancestors().some(function(n){return Ie(e.ancestor,n)})};Fe[ae.ANCESTOR]=function(e,t){return Ie(e.ancestor,t)&&t.descendants().some(function(n){return Ie(e.descendant,n)})};Fe[ae.COMPOUND_SPLIT]=function(e,t){return Ie(e.subject,t)&&Ie(e.left,t)&&Ie(e.right,t)};Fe[ae.TRUE]=function(){return!0};Fe[ae.COLLECTION]=function(e,t){var n=e.value;return n.has(t)};Fe[ae.FILTER]=function(e,t){var n=e.value;return n(t)};var Ng=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===ae.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(r){for(var i=0;i<t.length;i++){var o=t[i];if(Ie(o,r))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},Mg=function(e){for(var t=this,n=0;n<t.length;n++){var r=t[n];if(Ie(r,e))return!0}return!1},Sg={matches:Mg,filter:Ng},en=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||he(e)&&e.match(/^\s*$/)||(ft(e)?this.addQuery({checks:[{type:ae.COLLECTION,value:e.collection()}]}):Re(e)?this.addQuery({checks:[{type:ae.FILTER,value:e}]}):he(e)?this.parse(e)||(this.invalid=!0):Be("A selector must be created from a string; found "))},tn=en.prototype;[Dg,Sg].forEach(function(e){return ve(tn,e)});tn.text=function(){return this.inputText};tn.size=function(){return this.length};tn.eq=function(e){return this[e]};tn.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()};tn.addQuery=function(e){this[this.length++]=e};tn.selector=tn.toString;var Kt={allAre:function(e){var t=new en(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new en(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(r){return e.hasElementWithId(r.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Kt.allAreNeighbours=Kt.allAreNeighbors;Kt.has=Kt.contains;Kt.equal=Kt.equals=Kt.same;var bt=function(e,t){return function(n,r,i,o){var a=n,l=this,s;if(a==null?s="":ft(a)&&a.length===1&&(s=a.id()),l.length===1&&s){var u=l[0]._private,c=u.traversalCache=u.traversalCache||{},h=c[t]=c[t]||[],g=gn(s),d=h[g];return d||(h[g]=e.call(l,n,r,i,o))}else return e.call(l,n,r,i,o)}},zn={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r],o=i._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n],i=r.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:bt(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n],i=r._private.children,o=0;o<i.length;o++)t.push(i[o]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(r){for(var i=0;i<r.length;i++){var o=r[i];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function Ca(e,t,n,r){for(var i=[],o=new Gn,a=e.cy(),l=a.hasCompoundNodes(),s=0;s<e.length;s++){var u=e[s];n?i.push(u):l&&r(i,o,u)}for(;i.length>0;){var c=i.shift();t(c),o.add(c.id()),l&&r(i,o,c)}return e}function qs(e,t,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];t.has(o.id())||e.push(o)}}zn.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ca(this,e,t,qs)};function Hs(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}zn.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ca(this,e,t,Hs)};function Og(e,t,n){Hs(e,t,n),qs(e,t,n)}zn.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ca(this,e,t,Og)};zn.ancestors=zn.parents;var yr,Ws;yr=Ws={data:Ae.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ae.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ae.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ae.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ae.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ae.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};yr.attr=yr.data;yr.removeAttr=yr.removeData;var Ig=Ws,wi={};function Fi(e){return function(t){var n=this;if(t===void 0&&(t=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var l=o[a];!t&&l.isLoop()||(r+=e(i,l))}return r}else return}}ve(wi,{degree:Fi(function(e,t){return t.source().same(t.target())?2:1}),indegree:Fi(function(e,t){return t.target().same(e)?1:0}),outdegree:Fi(function(e,t){return t.source().same(e)?1:0})});function Tn(e,t){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],l=a[e](n);l!==void 0&&(r===void 0||t(l,r))&&(r=l)}return r}}ve(wi,{minDegree:Tn("degree",function(e,t){return e<t}),maxDegree:Tn("degree",function(e,t){return e>t}),minIndegree:Tn("indegree",function(e,t){return e<t}),maxIndegree:Tn("indegree",function(e,t){return e>t}),minOutdegree:Tn("outdegree",function(e,t){return e<t}),maxOutdegree:Tn("outdegree",function(e,t){return e>t})});ve(wi,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}});var kt,$s,Ks=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(!i.locked()){var o=i._private.position,a={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};i.isParent()&&!(a.x===0&&a.y===0)&&i.children().shift(a,n),i.dirtyBoundingBoxCache()}}},vo={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Ks(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};kt=$s={position:Ae.data(vo),silentPosition:Ae.data(ve({},vo,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Ks(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(_e(e))t?this.silentPosition(e):this.position(e);else if(Re(e)){var n=e,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o=this[i],a=void 0;(a=n(o,i))&&(t?o.silentPosition(a):o.position(a))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var r;if(_e(e)?(r={x:ne(e.x)?e.x:0,y:ne(e.y)?e.y:0},n=t):he(e)&&ne(t)&&(r={x:0,y:0},r[e]=t),r!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o];if(!(i.hasCompoundNodes()&&a.isChild()&&a.ancestors().anySame(this))){var l=a.position(),s={x:l.x+r.x,y:l.y+r.y};n?a.silentPosition(s):a.position(s)}}i.endBatch()}return this},silentShift:function(e,t){return _e(e)?this.shift(e,!0):he(e)&&ne(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=_e(e)?e:void 0,l=a!==void 0||t!==void 0&&he(e);if(n&&n.isNode())if(l)for(var s=0;s<this.length;s++){var u=this[s];t!==void 0?u.position(e,(t-o[e])/i):a!==void 0&&u.position(Es(a,i,o))}else{var c=n.position();return a=vi(c,i,o),e===void 0?a:a[e]}else if(!l)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=_e(e)?e:void 0,o=i!==void 0||t!==void 0&&he(e),a=r.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var s=this[l],u=a?s.parent():null,c=u&&u.length>0,h=c;c&&(u=u[0]);var g=h?u.position():{x:0,y:0};t!==void 0?s.position(e,t+g[e]):i!==void 0&&s.position({x:i.x+g.x,y:i.y+g.y})}else{var d=n.position(),p=a?n.parent():null,v=p&&p.length>0,b=v;v&&(p=p[0]);var f=b?p.position():{x:0,y:0};return i={x:d.x-f.x,y:d.y-f.y},e===void 0?i:i[e]}else if(!o)return;return this}};kt.modelPosition=kt.point=kt.position;kt.modelPositions=kt.points=kt.positions;kt.renderedPoint=kt.renderedPosition;kt.relativePoint=kt.relativePosition;var Pg=$s,Pn,an;Pn=an={};an.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),o=t.x1*r+i.x,a=t.x2*r+i.x,l=t.y1*r+i.y,s=t.y2*r+i.y;return{x1:o,x2:a,y1:l,y2:s,w:a-o,h:s-l}};an.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();return!t.styleEnabled()||!t.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,e||n.emitAndNotify("bounds")}}),this)};an.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function n(a){if(!a.isParent())return;var l=a._private,s=a.children(),u=a.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},h=s.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),g=l.position;(h.w===0||h.h===0)&&(h={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},h.x1=g.x-h.w/2,h.x2=g.x+h.w/2,h.y1=g.y-h.h/2,h.y2=g.y+h.h/2);function d(E,D,A){var k=0,M=0,L=D+A;return E>0&&L>0&&(k=D/L*E,M=A/L*E),{biasDiff:k,biasComplementDiff:M}}function p(E,D,A,k){if(A.units==="%")switch(k){case"width":return E>0?A.pfValue*E:0;case"height":return D>0?A.pfValue*D:0;case"average":return E>0&&D>0?A.pfValue*(E+D)/2:0;case"min":return E>0&&D>0?E>D?A.pfValue*D:A.pfValue*E:0;case"max":return E>0&&D>0?E>D?A.pfValue*E:A.pfValue*D:0;default:return 0}else return A.units==="px"?A.pfValue:0}var v=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(v=v*100/c.width.val);var b=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(b=b*100/c.width.val);var f=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(f=f*100/c.height.val);var m=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var x=d(c.width.val-h.w,v,b),T=x.biasDiff,_=x.biasComplementDiff,C=d(c.height.val-h.h,f,m),y=C.biasDiff,w=C.biasComplementDiff;l.autoPadding=p(h.w,h.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),l.autoWidth=Math.max(h.w,c.width.val),g.x=(-T+h.x1+h.x2+_)/2,l.autoHeight=Math.max(h.h,c.height.val),g.y=(-y+h.y1+h.y2+w)/2}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;(!o.compoundBoundsClean||e)&&(n(i),t.batching()||(o.compoundBoundsClean=!0))}return this};var mt=function(e){return e===1/0||e===-1/0?0:e},Dt=function(e,t,n,r,i){r-t===0||i-n===0||t==null||n==null||r==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},un=function(e,t){return t==null?e:Dt(e,t.x1,t.y1,t.x2,t.y2)},er=function(e,t,n){return At(e,t,n)},Fr=function(e,t,n){if(!t.cy().headless()){var r=t._private,i=r.rstyle,o=i.arrowWidth/2,a=t.pstyle(n+"-arrow-shape").value,l,s;if(a!=="none"){n==="source"?(l=i.srcX,s=i.srcY):n==="target"?(l=i.tgtX,s=i.tgtY):(l=i.midX,s=i.midY);var u=r.arrowBounds=r.arrowBounds||{},c=u[n]=u[n]||{};c.x1=l-o,c.y1=s-o,c.x2=l+o,c.y2=s+o,c.w=c.x2-c.x1,c.h=c.y2-c.y1,Ur(c,1),Dt(e,c.x1,c.y1,c.x2,c.y2)}}},zi=function(e,t,n){if(!t.cy().headless()){var r;n?r=n+"-":r="";var i=t._private,o=i.rstyle,a=t.pstyle(r+"label").strValue;if(a){var l=t.pstyle("text-halign"),s=t.pstyle("text-valign"),u=er(o,"labelWidth",n),c=er(o,"labelHeight",n),h=er(o,"labelX",n),g=er(o,"labelY",n),d=t.pstyle(r+"text-margin-x").pfValue,p=t.pstyle(r+"text-margin-y").pfValue,v=t.isEdge(),b=t.pstyle(r+"text-rotation"),f=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,x=m/2,T=t.pstyle("text-background-padding").pfValue,_=2,C=c,y=u,w=y/2,E=C/2,D,A,k,M;if(v)D=h-w,A=h+w,k=g-E,M=g+E;else{switch(l.value){case"left":D=h-y,A=h;break;case"center":D=h-w,A=h+w;break;case"right":D=h,A=h+y;break}switch(s.value){case"top":k=g-C,M=g;break;case"center":k=g-E,M=g+E;break;case"bottom":k=g,M=g+C;break}}D+=d-Math.max(f,x)-T-_,A+=d+Math.max(f,x)+T+_,k+=p-Math.max(f,x)-T-_,M+=p+Math.max(f,x)+T+_;var L=n||"main",O=i.labelBounds,R=O[L]=O[L]||{};R.x1=D,R.y1=k,R.x2=A,R.y2=M,R.w=A-D,R.h=M-k;var I=v&&b.strValue==="autorotate",S=b.pfValue!=null&&b.pfValue!==0;if(I||S){var P=I?er(i.rstyle,"labelAngle",n):b.pfValue,z=Math.cos(P),F=Math.sin(P),G=(D+A)/2,Y=(k+M)/2;if(!v){switch(l.value){case"left":G=A;break;case"right":G=D;break}switch(s.value){case"top":Y=M;break;case"bottom":Y=k;break}}var W=function(re,ge){return re=re-G,ge=ge-Y,{x:re*z-ge*F+G,y:re*F+ge*z+Y}},Q=W(D,k),B=W(D,M),U=W(A,k),X=W(A,M);D=Math.min(Q.x,B.x,U.x,X.x),A=Math.max(Q.x,B.x,U.x,X.x),k=Math.min(Q.y,B.y,U.y,X.y),M=Math.max(Q.y,B.y,U.y,X.y)}var $=L+"Rot",Z=O[$]=O[$]||{};Z.x1=D,Z.y1=k,Z.x2=A,Z.y2=M,Z.w=A-D,Z.h=M-k,Dt(e,D,k,A,M),Dt(i.labelBounds.all,D,k,A,M)}return e}},Rg=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,r=t.pstyle("outline-width").value;if(n>0&&r>0){var i=t.pstyle("outline-offset").value,o=t.pstyle("shape").value,a=r+i,l=(e.w+a*2)/e.w,s=(e.h+a*2)/e.h,u=0,c=0;["diamond","pentagon","round-triangle"].includes(o)?(l=(e.w+a*2.4)/e.w,c=-a/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?l=(e.w+a*2.4)/e.w:o==="star"?(l=(e.w+a*2.8)/e.w,s=(e.h+a*2.6)/e.h,c=-a/3.8):o==="triangle"?(l=(e.w+a*2.8)/e.w,s=(e.h+a*2.4)/e.h,c=-a/1.4):o==="vee"&&(l=(e.w+a*4.4)/e.w,s=(e.h+a*3.8)/e.h,c=-a*.5);var h=e.h*s-e.h,g=e.w*l-e.w;if(jr(e,[Math.ceil(h/2),Math.ceil(g/2)]),u!=0||c!==0){var d=rh(e,u,c);Ts(e,d)}}}},Bg=function(e,t){var n=e._private.cy,r=n.styleEnabled(),i=n.headless(),o=pt(),a=e._private,l=e.isNode(),s=e.isEdge(),u,c,h,g,d,p,v=a.rstyle,b=l&&r?e.pstyle("bounds-expansion").pfValue:[0],f=function(J){return J.pstyle("display").value!=="none"},m=!r||f(e)&&(!s||f(e.source())&&f(e.target()));if(m){var x=0,T=0;r&&t.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(T=e.pstyle("overlay-padding").value));var _=0,C=0;r&&t.includeUnderlays&&(_=e.pstyle("underlay-opacity").value,_!==0&&(C=e.pstyle("underlay-padding").value));var y=Math.max(T,C),w=0,E=0;if(r&&(w=e.pstyle("width").pfValue,E=w/2),l&&t.includeNodes){var D=e.position();d=D.x,p=D.y;var A=e.outerWidth(),k=A/2,M=e.outerHeight(),L=M/2;u=d-k,c=d+k,h=p-L,g=p+L,Dt(o,u,h,c,g),r&&t.includeOutlines&&Rg(o,e)}else if(s&&t.includeEdges)if(r&&!i){var O=e.pstyle("curve-style").strValue;if(u=Math.min(v.srcX,v.midX,v.tgtX),c=Math.max(v.srcX,v.midX,v.tgtX),h=Math.min(v.srcY,v.midY,v.tgtY),g=Math.max(v.srcY,v.midY,v.tgtY),u-=E,c+=E,h-=E,g+=E,Dt(o,u,h,c,g),O==="haystack"){var R=v.haystackPts;if(R&&R.length===2){if(u=R[0].x,h=R[0].y,c=R[1].x,g=R[1].y,u>c){var I=u;u=c,c=I}if(h>g){var S=h;h=g,g=S}Dt(o,u-E,h-E,c+E,g+E)}}else if(O==="bezier"||O==="unbundled-bezier"||O.endsWith("segments")||O.endsWith("taxi")){var P;switch(O){case"bezier":case"unbundled-bezier":P=v.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":P=v.linePts;break}if(P!=null)for(var z=0;z<P.length;z++){var F=P[z];u=F.x-E,c=F.x+E,h=F.y-E,g=F.y+E,Dt(o,u,h,c,g)}}}else{var G=e.source(),Y=G.position(),W=e.target(),Q=W.position();if(u=Y.x,c=Q.x,h=Y.y,g=Q.y,u>c){var B=u;u=c,c=B}if(h>g){var U=h;h=g,g=U}u-=E,c+=E,h-=E,g+=E,Dt(o,u,h,c,g)}if(r&&t.includeEdges&&s&&(Fr(o,e,"mid-source"),Fr(o,e,"mid-target"),Fr(o,e,"source"),Fr(o,e,"target")),r){var X=e.pstyle("ghost").value==="yes";if(X){var $=e.pstyle("ghost-offset-x").pfValue,Z=e.pstyle("ghost-offset-y").pfValue;Dt(o,o.x1+$,o.y1+Z,o.x2+$,o.y2+Z)}}var re=a.bodyBounds=a.bodyBounds||{};Wa(re,o),jr(re,b),Ur(re,1),r&&(u=o.x1,c=o.x2,h=o.y1,g=o.y2,Dt(o,u-y,h-y,c+y,g+y));var ge=a.overlayBounds=a.overlayBounds||{};Wa(ge,o),jr(ge,b),Ur(ge,1);var de=a.labelBounds=a.labelBounds||{};de.all!=null?nh(de.all):de.all=pt(),r&&t.includeLabels&&(t.includeMainLabels&&zi(o,e,null),s&&(t.includeSourceLabels&&zi(o,e,"source"),t.includeTargetLabels&&zi(o,e,"target")))}return o.x1=mt(o.x1),o.y1=mt(o.y1),o.x2=mt(o.x2),o.y2=mt(o.y2),o.w=mt(o.x2-o.x1),o.h=mt(o.y2-o.y1),o.w>0&&o.h>0&&m&&(jr(o,b),Ur(o,1)),o},Zs=function(e){var t=0,n=function(i){return(i?1:0)<<t++},r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeMainLabels),r+=n(e.includeSourceLabels),r+=n(e.includeTargetLabels),r+=n(e.includeOverlays),r+=n(e.includeOutlines),r},Qs=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),r=function(i){return Math.round(i)};return _c([r(t.x),r(t.y),r(n.x),r(n.y)])}else return 0},yo=function(e,t){var n=e._private,r,i=e.isEdge(),o=t==null?mo:Zs(t),a=o===mo,l=Qs(e),s=n.bbCachePosKey===l,u=t.useCache&&s,c=function(d){return d._private.bbCache==null||d._private.styleDirty},h=!u||c(e)||i&&c(e.source())||c(e.target());if(h?(s||e.recalculateRenderedStyle(u),r=Bg(e,mr),n.bbCache=r,n.bbCachePosKey=l):r=n.bbCache,!a){var g=e.isNode();r=pt(),(t.includeNodes&&g||t.includeEdges&&!g)&&(t.includeOverlays?un(r,n.overlayBounds):un(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?un(r,n.labelBounds.all):(t.includeMainLabels&&un(r,n.labelBounds.mainRot),t.includeSourceLabels&&un(r,n.labelBounds.sourceRot),t.includeTargetLabels&&un(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},mr={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},mo=Zs(mr),bo=et(mr);an.boundingBox=function(e){var t;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(e===void 0||e.useCache===void 0||e.useCache===!0))e===void 0?e=mr:e=bo(e),t=yo(this[0],e);else{t=pt(),e=e||mr;var n=bo(e),r=this,i=r.cy(),o=i.styleEnabled();if(o)for(var a=0;a<r.length;a++){var l=r[a],s=l._private,u=Qs(l),c=s.bbCachePosKey===u,h=n.useCache&&c&&!s.styleDirty;l.recalculateRenderedStyle(h)}this.updateCompoundBounds(!e.useCache);for(var g=0;g<r.length;g++){var d=r[g];un(t,yo(d,n))}}return t.x1=mt(t.x1),t.y1=mt(t.y1),t.x2=mt(t.x2),t.y2=mt(t.y2),t.w=mt(t.x2-t.x1),t.h=mt(t.y2-t.y1),t};an.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};an.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=t.filter(function(u){return u.isParent()}),t=t.not(i)),_e(e)){var o=e;e=function(){return o}}var a=function(u,c){return u._private.bbAtOldPos=e(u,c)},l=function(u){return u._private.bbAtOldPos};n.startBatch(),t.forEach(a).silentPositions(e),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var s=th(this.boundingBox({useCache:!1}));return t.silentPositions(l),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),s};Pn.boundingbox=Pn.bb=Pn.boundingBox;Pn.renderedBoundingbox=Pn.renderedBoundingBox;var Fg=an,or,Cr;or=Cr={};var Js=function(e){e.uppercaseName=Ya(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Ya(e.outerName),or[e.name]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t)if(i){if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var o=t.pstyle(e.name);switch(o.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},or["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t)if(i){var o=t[e.name](),a=t.pstyle("border-width").pfValue,l=2*t.padding();return o+a+l}else return 1},or["rendered"+e.uppercaseName]=function(){var t=this[0];if(t){var n=t[e.name]();return n*this.cy().zoom()}},or["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t){var n=t[e.outerName]();return n*this.cy().zoom()}}};Js({name:"width"});Js({name:"height"});Cr.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),t.autoPadding!==void 0?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue};Cr.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()};Cr.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var zg=Cr,Gg=function(e,t){if(e.isEdge())return t(e)},Yg=function(e,t){if(e.isEdge()){var n=e.cy();return vi(t(e),n.zoom(),n.pan())}},Vg=function(e,t){if(e.isEdge()){var n=e.cy(),r=n.pan(),i=n.zoom();return t(e).map(function(o){return vi(o,i,r)})}},Xg=function(e){return e.renderer().getControlPoints(e)},Ug=function(e){return e.renderer().getSegmentPoints(e)},jg=function(e){return e.renderer().getSourceEndpoint(e)},qg=function(e){return e.renderer().getTargetEndpoint(e)},Hg=function(e){return e.renderer().getEdgeMidpoint(e)},xo={controlPoints:{get:Xg,mult:!0},segmentPoints:{get:Ug,mult:!0},sourceEndpoint:{get:jg},targetEndpoint:{get:qg},midpoint:{get:Hg}},Wg=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},$g=Object.keys(xo).reduce(function(e,t){var n=xo[t],r=Wg(t);return e[t]=function(){return Gg(this,n.get)},n.mult?e[r]=function(){return Vg(this,n.get)}:e[r]=function(){return Yg(this,n.get)},e},{}),Kg=ve({},Pg,Fg,zg,$g);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var el=function(e,t){this.recycle(e,t)};function tr(){return!1}function zr(){return!0}el.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=tr,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?zr:tr):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=zr;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=zr;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=zr,this.stopPropagation()},isDefaultPrevented:tr,isPropagationStopped:tr,isImmediatePropagationStopped:tr};var tl=/^([^.]+)(\.(?:[^.]+))?$/,Zg=".*",nl={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},wo=Object.keys(nl),Qg={};function Ei(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qg,t=arguments.length>1?arguments[1]:void 0,n=0;n<wo.length;n++){var r=wo[n];this[r]=e[r]||nl[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}var nn=Ei.prototype,rl=function(e,t,n,r,i,o,a){Re(r)&&(i=r,r=null),a&&(o==null?o=a:o=ve({},o,a));for(var l=Me(n)?n:n.split(/\s+/),s=0;s<l.length;s++){var u=l[s];if(!Qt(u)){var c=u.match(tl);if(c){var h=c[1],g=c[2]?c[2]:null,d=t(e,u,h,g,r,i,o);if(d===!1)break}}}},Eo=function(e,t){return e.addEventFields(e.context,t),new el(t.type,t)},Jg=function(e,t,n){if(bu(n)){t(e,n);return}else if(_e(n)){t(e,Eo(e,n));return}for(var r=Me(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!Qt(o)){var a=o.match(tl);if(a){var l=a[1],s=a[2]?a[2]:null,u=Eo(e,{type:l,namespace:s,target:e.context});t(e,u)}}}};nn.on=nn.addListener=function(e,t,n,r,i){return rl(this,function(o,a,l,s,u,c,h){Re(c)&&o.listeners.push({event:a,callback:c,type:l,namespace:s,qualifier:u,conf:h})},e,t,n,r,i),this};nn.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})};nn.removeListener=nn.off=function(e,t,n,r){var i=this;this.emitting!==0&&(this.listeners=kc(this.listeners));for(var o=this.listeners,a=function(s){var u=o[s];rl(i,function(c,h,g,d,p,v){if((u.type===g||e==="*")&&(!d&&u.namespace!==".*"||u.namespace===d)&&(!p||c.qualifierCompare(u.qualifier,p))&&(!v||u.callback===v))return o.splice(s,1),!1},e,t,n,r)},l=o.length-1;l>=0;l--)a(l);return this};nn.removeAllListeners=function(){return this.removeListener("*")};nn.emit=nn.trigger=function(e,t,n){var r=this.listeners,i=r.length;return this.emitting++,Me(t)||(t=[t]),Jg(this,function(o,a){n!=null&&(r=[{event:a.event,type:a.type,namespace:a.namespace,callback:n}],i=r.length);for(var l=function(u){var c=r[u];if(c.type===a.type&&(!c.namespace||c.namespace===a.namespace||c.namespace===Zg)&&o.eventMatches(o.context,c,a)){var h=[a];t!=null&&Nc(h,t),o.beforeEmit(o.context,c,a),c.conf&&c.conf.one&&(o.listeners=o.listeners.filter(function(p){return p!==c}));var g=o.callbackContext(o.context,c,a),d=c.callback.apply(g,h);o.afterEmit(o.context,c,a),d===!1&&(a.stopPropagation(),a.preventDefault())}},s=0;s<i;s++)l(s);o.bubble(o.context)&&!a.isPropagationStopped()&&o.parent(o.context).emit(a,t)},e),this.emitting--,this};var ef={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return r!=null?e!==n.target&&Er(n.target)&&r.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Gr=function(e){return he(e)?new en(e):e},il={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Ei(ef,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=Gr(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,r,n)}return this},removeListener:function(e,t,n){for(var r=Gr(t),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,r,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var r=Gr(t),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,r,n)}return this},once:function(e,t,n){for(var r=Gr(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,r,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Ae.eventAliasesOn(il);var al={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):t.push(r)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(he(e)||ft(e))return new en(e).filter(this);if(Re(e)){for(var n=this.spawn(),r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);a&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){he(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var r=this[n],i=e.has(r);i||t.push(r)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(he(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),r=this,i=e,o=this.length<e.length,a=o?r:i,l=o?i:r,s=0;s<a.length;s++){var u=a[s];l.has(u)&&n.push(u)}return n},xor:function(e){var t=this._private.cy;he(e)&&(e=t.$(e));var n=this.spawn(),r=this,i=e,o=function(a,l){for(var s=0;s<a.length;s++){var u=a[s],c=u._private.data.id,h=l.hasElementWithId(c);h||n.push(u)}};return o(r,i),o(i,r),n},diff:function(e){var t=this._private.cy;he(e)&&(e=t.$(e));var n=this.spawn(),r=this.spawn(),i=this.spawn(),o=this,a=e,l=function(s,u,c){for(var h=0;h<s.length;h++){var g=s[h],d=g._private.data.id,p=u.hasElementWithId(d);p?i.merge(g):c.push(g)}};return l(o,a,n),l(a,o,r),{left:n,right:r,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(he(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],a=!this.has(o);a&&r.push(o)}return r},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&he(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=t.map,o=0;o<e.length;o++){var a=e[o],l=a._private.data.id,s=!i.has(l);if(s){var u=this.length++;this[u]=a,i.set(l,{ele:a,index:u})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),r=this._private,i=r.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var a=this.length-1,l=this[a],s=l._private.data.id;this[a]=void 0,this[e]=l,i.set(s,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map,i=r.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&he(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);n.push(a)}return n},reduce:function(e,t){for(var n=t,r=this,i=0;i<r.length;i++)n=e(n,r[i],i,r);return n},max:function(e,t){for(var n=-1/0,r,i=this,o=0;o<i.length;o++){var a=i[o],l=t?e.apply(t,[a,o,i]):e(a,o,i);l>n&&(n=l,r=a)}return{value:n,ele:r}},min:function(e,t){for(var n=1/0,r,i=this,o=0;o<i.length;o++){var a=i[o],l=t?e.apply(t,[a,o,i]):e(a,o,i);l<n&&(n=l,r=a)}return{value:n,ele:r}}},De=al;De.u=De["|"]=De["+"]=De.union=De.or=De.add;De["\\"]=De["!"]=De["-"]=De.difference=De.relativeComplement=De.subtract=De.not;De.n=De["&"]=De["."]=De.and=De.intersection=De.intersect;De["^"]=De["(+)"]=De["(-)"]=De.symmetricDifference=De.symdiff=De.xor;De.fnFilter=De.filterFn=De.stdFilter=De.filter;De.complement=De.abscomp=De.absoluteComplement;var tf={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},ol=function(e,t){var n=e.cy(),r=n.hasCompoundNodes();function i(u){var c=u.pstyle("z-compound-depth");return c.value==="auto"?r?u.zDepth():0:c.value==="bottom"?-1:c.value==="top"?ga:0}var o=i(e)-i(t);if(o!==0)return o;function a(u){var c=u.pstyle("z-index-compare");return c.value==="auto"&&u.isNode()?1:0}var l=a(e)-a(t);if(l!==0)return l;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return s!==0?s:e.poolIndex()-t.poolIndex()},si={forEach:function(e,t){if(Re(e))for(var n=this.length,r=0;r<n;r++){var i=this[r],o=t?e.apply(t,[i,r,this]):e(i,r,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;t==null&&(t=r),e==null&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var i=e;i>=0&&i<t&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Re(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(ol)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:ga-1}else{var i=t.source,o=t.target,a=i.zDepth(),l=o.zDepth();return Math.max(a,l,0)}}}};si.each=si.forEach;var nf=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":je(Symbol))!=e&&je(Symbol.iterator)!=e;t&&(si[Symbol.iterator]=function(){var n=this,r={value:void 0,done:!1},i=0,o=this.length;return rs({next:function(){return i<o?r.value=n[i++]:(r.value=void 0,r.done=!0),r}},Symbol.iterator,function(){return this})})};nf();var rf=et({nodeDimensionsIncludeLabels:!1}),Hr={layoutDimensions:function(e){e=rf(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var r=this.nodes().filter(function(T){return!T.isParent()}),i=this.cy(),o=t.eles,a=function(T){return T.id()},l=cr(n,a);e.emit({type:"layoutstart",layout:e}),e.animations=[];var s=function(T,_,C){var y={x:_.x1+_.w/2,y:_.y1+_.h/2},w={x:(C.x-y.x)*T,y:(C.y-y.y)*T};return{x:y.x+w.x,y:y.y+w.y}},u=t.spacingFactor&&t.spacingFactor!==1,c=function(){if(!u)return null;for(var T=pt(),_=0;_<r.length;_++){var C=r[_],y=l(C,_);ih(T,y.x,y.y)}return T},h=c(),g=cr(function(T,_){var C=l(T,_);if(u){var y=Math.abs(t.spacingFactor);C=s(y,h,C)}return t.transform!=null&&(C=t.transform(T,C)),C},a);if(t.animate){for(var d=0;d<r.length;d++){var p=r[d],v=g(p,d),b=t.animateFilter==null||t.animateFilter(p,d);if(b){var f=p.animation({position:v,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(f)}else p.position(v)}if(t.fit){var m=i.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var x=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}e.animations.forEach(function(T){return T.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Yn.all(e.animations.map(function(T){return T.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(g),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(ve({},e,{eles:this}))}};Hr.createLayout=Hr.makeLayout=Hr.layout;function sl(e,t,n){var r=n._private,i=r.styleCache=r.styleCache||[],o;return(o=i[e])!=null||(o=i[e]=t(n)),o}function _i(e,t){return e=gn(e),function(n){return sl(e,t,n)}}function Ti(e,t){e=gn(e);var n=function(r){return t.call(r)};return function(){var r=this[0];if(r)return sl(e,n,r)}}var Qe={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(r){return r._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(r){t(r),r.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var r=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),r&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(a){return a._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i??(t?r.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,i=n.style();if(_e(e)){var o=e;i.applyBypass(this,o,r),this.emitAndNotify("style")}else if(he(e))if(t===void 0){var a=this[0];return a?i.getStylePropertyValue(a,e):void 0}else i.applyBypass(this,e,t,r),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var a=i[o];r.removeAllBypasses(a,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var s=i[l];r.removeBypasses(s,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var l=o[a],s=l.pstyle("opacity").value;i=s*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function Gi(e,t){var n=e._private,r=n.data.parent?e.parents():null;if(r)for(var i=0;i<r.length;i++){var o=r[i];if(!t(o))return!1}return!0}function Da(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var o=this[0],a=i.hasCompoundNodes();if(o){var l=o._private;if(!t(o))return!1;if(o.isNode())return!a||Gi(o,r);var s=l.source,u=l.target;return n(s)&&(!a||Gi(s,n))&&(s===u||n(u)&&(!a||Gi(u,n)))}}}var jn=_i("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:!0)});Qe.takesUpSpace=Ti("takesUpSpace",Da({ok:jn}));var af=_i("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&jn(e)}),of=_i("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&jn(e)});Qe.interactive=Ti("interactive",Da({ok:af,parentOk:of,edgeOkViaNode:jn}));Qe.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var sf=_i("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&jn(e)}),lf=jn;Qe.visible=Ti("visible",Da({ok:sf,edgeOkViaNode:lf}));Qe.hidden=function(){var e=this[0];if(e)return!e.visible()};Qe.isBundledBezier=Ti("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Qe.bypass=Qe.css=Qe.style;Qe.renderedCss=Qe.renderedStyle;Qe.removeBypass=Qe.removeCss=Qe.removeStyle;Qe.pstyle=Qe.parsedStyle;var Zt={};function _o(e){return function(){var t=arguments,n=[];if(t.length===2){var r=t[0],i=t[1];this.on(e.event,r,i)}else if(t.length===1&&Re(t[0])){var o=t[0];this.on(e.event,o)}else if(t.length===0||t.length===1&&Me(t[0])){for(var a=t.length===1?t[0]:null,l=0;l<this.length;l++){var s=this[l],u=!e.ableField||s._private[e.ableField],c=s._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(s);if(h!==void 0&&(u=h,!h))return this}u&&(s._private[e.field]=e.value,c&&n.push(s))}var g=this.spawn(n);g.updateStyle(),g.emit(e.event),a&&g.emit(a)}return this}}function qn(e){Zt[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(n!==void 0)return n}return t._private[e.field]}},Zt[e.on]=_o({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),Zt[e.off]=_o({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}qn({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});qn({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});qn({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});qn({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Zt.deselect=Zt.unselect;Zt.grabbed=function(){var e=this[0];if(e)return e._private.grabbed};qn({field:"active",on:"activate",off:"unactivate"});qn({field:"pannable",on:"panify",off:"unpanify"});Zt.inactive=function(){var e=this[0];if(e)return!e._private.active};var it={},To=function(e){return function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){for(var a=!1,l=o.connectedEdges(),s=0;s<l.length;s++){var u=l[s],c=u.source(),h=u.target();if(e.noIncomingEdges&&h===o&&c!==o||e.noOutgoingEdges&&c===o&&h!==o){a=!0;break}}a||r.push(o)}}return this.spawn(r,!0).filter(t)}},Co=function(e){return function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var a=o.connectedEdges(),l=0;l<a.length;l++){var s=a[l],u=s.source(),c=s.target();e.outgoing&&u===o?(r.push(s),r.push(c)):e.incoming&&c===o&&(r.push(s),r.push(u))}}return this.spawn(r,!0).filter(t)}},Do=function(e){return function(t){for(var n=this,r=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var a=!1,l=0;l<o.length;l++){var s=o[l],u=s.id();i[u]||(i[u]=!0,r.push(s),a=!0)}if(!a)break;n=o}return this.spawn(r,!0).filter(t)}};it.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null};ve(it,{roots:To({noIncomingEdges:!0}),leaves:To({noOutgoingEdges:!0}),outgoers:bt(Co({outgoing:!0}),"outgoers"),successors:Do({outgoing:!0}),incomers:bt(Co({incoming:!0}),"incomers"),predecessors:Do({incoming:!0})});ve(it,{neighborhood:bt(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var l=o[a],s=l.source(),u=l.target(),c=i===s?u:s;c.length>0&&t.push(c[0]),t.push(l[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});it.neighbourhood=it.neighborhood;it.closedNeighbourhood=it.closedNeighborhood;it.openNeighbourhood=it.openNeighborhood;ve(it,{source:bt(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:bt(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Ao({attr:"source"}),targets:Ao({attr:"target"})});function Ao(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=i._private[e.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}ve(it,{edgesWith:bt(ko(),"edgesWith"),edgesTo:bt(ko({thisIsSrc:!0}),"edgesTo")});function ko(e){return function(t){var n=[],r=this._private.cy,i=e||{};he(t)&&(t=r.$(t));for(var o=0;o<t.length;o++)for(var a=t[o]._private.edges,l=0;l<a.length;l++){var s=a[l],u=s._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),h=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target),g=c||h;g&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h)||n.push(s))}return this.spawn(n,!0)}}ve(it,{connectedEdges:bt(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var l=o[a];t.push(l)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:bt(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:bt(Lo(),"parallelEdges"),codirectedEdges:bt(Lo({codirected:!0}),"codirectedEdges")});function Lo(e){var t={codirected:!1};return e=ve({},t,e),function(n){for(var r=[],i=this.edges(),o=e,a=0;a<i.length;a++)for(var l=i[a],s=l._private,u=s.source,c=u._private.data.id,h=s.data.target,g=u._private.edges,d=0;d<g.length;d++){var p=g[d],v=p._private.data,b=v.target,f=v.source,m=b===h&&f===c,x=c===b&&h===f;(o.codirected&&m||!o.codirected&&(m||x))&&r.push(p)}return this.spawn(r,!0).filter(n)}}ve(it,{components:function(e){var t=this,n=t.cy(),r=n.collection(),i=e==null?t.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var a=function(s,u){r.merge(s),i.unmerge(s),u.merge(s)};if(i.empty())return t.spawn();var l=function(){var s=n.collection();o.push(s);var u=i[0];a(u,s),t.bfs({directed:!1,roots:u,visit:function(c){return a(c,s)}}),s.forEach(function(c){c.connectedEdges().forEach(function(h){t.has(h)&&s.has(h.source())&&s.has(h.target())&&s.merge(h)})})};do l();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});it.componentsOf=it.components;var Je=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Be("A collection must have a reference to the core");return}var i=new Pt,o=!1;if(!t)t=[];else if(t.length>0&&_e(t[0])&&!Er(t[0])){o=!0;for(var a=[],l=new Gn,s=0,u=t.length;s<u;s++){var c=t[s];c.data==null&&(c.data={});var h=c.data;if(h.id==null)h.id=xs();else if(e.hasElementWithId(h.id)||l.has(h.id))continue;var g=new fi(e,c,!1);a.push(g),l.add(h.id)}t=a}this.length=0;for(var d=0,p=t.length;d<p;d++){var v=t[d][0];if(v!=null){var b=v._private.data.id;(!n||!i.has(b))&&(n&&i.set(b,{index:this.length,ele:v}),this[this.length]=v,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(f){this.lazyMap=f},rebuildMap:function(){for(var f=this.lazyMap=new Pt,m=this.eles,x=0;x<m.length;x++){var T=m[x];f.set(T.id(),{index:x,ele:T})}}},n&&(this._private.map=i),o&&!r&&this.restore()},Oe=fi.prototype=Je.prototype=Object.create(Array.prototype);Oe.instanceString=function(){return"collection"};Oe.spawn=function(e,t){return new Je(this.cy(),e,t)};Oe.spawnSelf=function(){return this.spawn(this)};Oe.cy=function(){return this._private.cy};Oe.renderer=function(){return this._private.cy.renderer()};Oe.element=function(){return this[0]};Oe.collection=function(){return os(this)?this:new Je(this._private.cy,[this])};Oe.unique=function(){return new Je(this._private.cy,this,!0)};Oe.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)};Oe.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new Je(t)};Oe.$id=Oe.getElementById;Oe.poolIndex=function(){var e=this._private.cy,t=e._private.elements,n=this[0]._private.data.id;return t._private.map.get(n).index};Oe.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index};Oe.indexOfId=function(e){return e=""+e,this._private.map.get(e).index};Oe.json=function(e){var t=this.element(),n=this.cy();if(t==null&&e)return this;if(t!=null){var r=t._private;if(_e(e)){if(n.startBatch(),e.data){t.data(e.data);var i=r.data;if(t.isEdge()){var o=!1,a={},l=e.data.source,s=e.data.target;l!=null&&l!=i.source&&(a.source=""+l,o=!0),s!=null&&s!=i.target&&(a.target=""+s,o=!0),o&&(t=t.move(a))}else{var u="parent"in e.data,c=e.data.parent;u&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var h=function(p,v,b){var f=e[p];f!=null&&f!==r[p]&&(f?t[v]():t[b]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),e.classes!=null&&t.classes(e.classes),n.endBatch(),this}else if(e===void 0){var g={data:It(r.data),position:It(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};g.classes="";var d=0;return r.classes.forEach(function(p){return g.classes+=d++===0?p:" "+p}),g}}};Oe.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e};Oe.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),o=new fi(e,i,!1);t.push(o)}return new Je(e,t)};Oe.copy=Oe.clone;Oe.restore=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=n.cy(),i=r._private,o=[],a=[],l,s=0,u=n.length;s<u;s++){var c=n[s];t&&!c.removed()||(c.isNode()?o.push(c):a.push(c))}l=o.concat(a);var h,g=function(){l.splice(h,1),h--};for(h=0;h<l.length;h++){var d=l[h],p=d._private,v=p.data;if(d.clearTraversalCache(),!(!t&&!p.removed)){if(v.id===void 0)v.id=xs();else if(ne(v.id))v.id=""+v.id;else if(Qt(v.id)||!he(v.id)){Be("Can not create element with invalid string ID `"+v.id+"`"),g();continue}else if(r.hasElementWithId(v.id)){Be("Can not create second element with ID `"+v.id+"`"),g();continue}}var b=v.id;if(d.isNode()){var f=p.position;f.x==null&&(f.x=0),f.y==null&&(f.y=0)}if(d.isEdge()){for(var m=d,x=["source","target"],T=x.length,_=!1,C=0;C<T;C++){var y=x[C],w=v[y];ne(w)&&(w=v[y]=""+v[y]),w==null||w===""?(Be("Can not create edge `"+b+"` with unspecified "+y),_=!0):r.hasElementWithId(w)||(Be("Can not create edge `"+b+"` with nonexistant "+y+" `"+w+"`"),_=!0)}if(_){g();continue}var E=r.getElementById(v.source),D=r.getElementById(v.target);E.same(D)?E._private.edges.push(m):(E._private.edges.push(m),D._private.edges.push(m)),m._private.source=E,m._private.target=D}p.map=new Pt,p.map.set(b,{ele:d,index:0}),p.removed=!1,t&&r.addToPool(d)}for(var A=0;A<o.length;A++){var k=o[A],M=k._private.data;ne(M.parent)&&(M.parent=""+M.parent);var L=M.parent,O=L!=null;if(O||k._private.parent){var R=k._private.parent?r.collection().merge(k._private.parent):r.getElementById(L);if(R.empty())M.parent=void 0;else if(R[0].removed())ke("Node added with missing parent, reference to parent removed"),M.parent=void 0,k._private.parent=null;else{for(var I=!1,S=R;!S.empty();){if(k.same(S)){I=!0,M.parent=void 0;break}S=S.parent()}I||(R[0]._private.children.push(k),k._private.parent=R[0],i.hasCompoundNodes=!0)}}}if(l.length>0){for(var P=l.length===n.length?n:new Je(r,l),z=0;z<P.length;z++){var F=P[z];F.isNode()||(F.parallelEdges().clearTraversalCache(),F.source().clearTraversalCache(),F.target().clearTraversalCache())}var G;i.hasCompoundNodes?G=r.collection().merge(P).merge(P.connectedNodes()).merge(P.parent()):G=P,G.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?P.emitAndNotify("add"):t&&P.emit("add")}return n};Oe.removed=function(){var e=this[0];return e&&e._private.removed};Oe.inside=function(){var e=this[0];return e&&!e._private.removed};Oe.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=[],i={},o=n._private.cy;function a(L){for(var O=L._private.edges,R=0;R<O.length;R++)s(O[R])}function l(L){for(var O=L._private.children,R=0;R<O.length;R++)s(O[R])}function s(L){var O=i[L.id()];t&&L.removed()||O||(i[L.id()]=!0,L.isNode()?(r.push(L),a(L),l(L)):r.unshift(L))}for(var u=0,c=n.length;u<c;u++){var h=n[u];s(h)}function g(L,O){var R=L._private.edges;Jt(R,O),L.clearTraversalCache()}function d(L){L.clearTraversalCache()}var p=[];p.ids={};function v(L,O){O=O[0],L=L[0];var R=L._private.children,I=L.id();Jt(R,O),O._private.parent=null,p.ids[I]||(p.ids[I]=!0,p.push(L))}n.dirtyCompoundBoundsCache(),t&&o.removeFromPool(r);for(var b=0;b<r.length;b++){var f=r[b];if(f.isEdge()){var m=f.source()[0],x=f.target()[0];g(m,f),g(x,f);for(var T=f.parallelEdges(),_=0;_<T.length;_++){var C=T[_];d(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var y=f.parent();y.length!==0&&v(y,f)}t&&(f._private.removed=!0)}var w=o._private.elements;o._private.hasCompoundNodes=!1;for(var E=0;E<w.length;E++){var D=w[E];if(D.isParent()){o._private.hasCompoundNodes=!0;break}}var A=new Je(this.cy(),r);A.size()>0&&(e?A.emitAndNotify("remove"):t&&A.emit("remove"));for(var k=0;k<p.length;k++){var M=p[k];(!t||!M.removed())&&M.updateStyle()}return A};Oe.move=function(e){var t=this._private.cy,n=this,r=!1,i=!1,o=function(d){return d==null?d:""+d};if(e.source!==void 0||e.target!==void 0){var a=o(e.source),l=o(e.target),s=a!=null&&t.hasElementWithId(a),u=l!=null&&t.hasElementWithId(l);(s||u)&&(t.batch(function(){n.remove(r,i),n.emitAndNotify("moveout");for(var d=0;d<n.length;d++){var p=n[d],v=p._private.data;p.isEdge()&&(s&&(v.source=a),u&&(v.target=l))}n.restore(r,i)}),n.emitAndNotify("move"))}else if(e.parent!==void 0){var c=o(e.parent),h=c===null||t.hasElementWithId(c);if(h){var g=c===null?void 0:c;t.batch(function(){var d=n.remove(r,i);d.emitAndNotify("moveout");for(var p=0;p<n.length;p++){var v=n[p],b=v._private.data;v.isNode()&&(b.parent=g)}d.restore(r,i)}),n.emitAndNotify("move")}}return this};[Os,mg,qr,Kt,zn,Ig,wi,Kg,il,al,tf,si,Hr,Qe,Zt,it].forEach(function(e){ve(Oe,e)});var uf={add:function(e){var t,n=this;if(ft(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var i=[],o=0;o<r.length;o++){var a=r[o];i.push(a.json())}t=new Je(n,i)}}else if(Me(e)){var l=e;t=new Je(n,l)}else if(_e(e)&&(Me(e.nodes)||Me(e.edges))){for(var s=e,u=[],c=["nodes","edges"],h=0,g=c.length;h<g;h++){var d=c[h],p=s[d];if(Me(p))for(var v=0,b=p.length;v<b;v++){var f=ve({group:d},p[v]);u.push(f)}}t=new Je(n,u)}else{var m=e;t=new fi(n,m).collection()}return t},remove:function(e){if(!ft(e)&&he(e)){var t=e;e=this.$(t)}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function cf(e,t,n,r){var i=4,o=.001,a=1e-7,l=10,s=11,u=1/(s-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var g=c?new Float32Array(s):new Array(s);function d(D,A){return 1-3*A+3*D}function p(D,A){return 3*A-6*D}function v(D){return 3*D}function b(D,A,k){return((d(A,k)*D+p(A,k))*D+v(A))*D}function f(D,A,k){return 3*d(A,k)*D*D+2*p(A,k)*D+v(A)}function m(D,A){for(var k=0;k<i;++k){var M=f(A,e,n);if(M===0)return A;var L=b(A,e,n)-D;A-=L/M}return A}function x(){for(var D=0;D<s;++D)g[D]=b(D*u,e,n)}function T(D,A,k){var M,L,O=0;do L=A+(k-A)/2,M=b(L,e,n)-D,M>0?k=L:A=L;while(Math.abs(M)>a&&++O<l);return L}function _(D){for(var A=0,k=1,M=s-1;k!==M&&g[k]<=D;++k)A+=u;--k;var L=(D-g[k])/(g[k+1]-g[k]),O=A+L*u,R=f(O,e,n);return R>=o?m(D,O):R===0?O:T(D,A,A+u)}var C=!1;function y(){C=!0,(e!==t||n!==r)&&x()}var w=function(D){return C||y(),e===t&&n===r?D:D===0?0:D===1?1:b(_(D),t,r)};w.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var E="generateBezier("+[e,t,n,r]+")";return w.toString=function(){return E},w}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var hf=function(){function e(r){return-r.tension*r.x-r.friction*r.v}function t(r,i,o){var a={x:r.x+o.dx*i,v:r.v+o.dv*i,tension:r.tension,friction:r.friction};return{dx:a.v,dv:e(a)}}function n(r,i){var o={dx:r.v,dv:e(r)},a=t(r,i*.5,o),l=t(r,i*.5,a),s=t(r,i,l),u=1/6*(o.dx+2*(a.dx+l.dx)+s.dx),c=1/6*(o.dv+2*(a.dv+l.dv)+s.dv);return r.x=r.x+u*i,r.v=r.v+c*i,r}return function r(i,o,a){var l={x:-1,v:0,tension:null,friction:null},s=[0],u=0,c=1/1e4,h=16/1e3,g,d,p;for(i=parseFloat(i)||500,o=parseFloat(o)||20,a=a||null,l.tension=i,l.friction=o,g=a!==null,g?(u=r(i,o),d=u/a*h):d=h;p=n(p||l,d),s.push(1+p.x),u+=16,Math.abs(p.x)>c&&Math.abs(p.v)>c;);return g?function(v){return s[v*(s.length-1)|0]}:u}}(),Se=function(e,t,n,r){var i=cf(e,t,n,r);return function(o,a,l){return o+(a-o)*i(l)}},Wr={linear:function(e,t,n){return e+(t-e)*n},ease:Se(.25,.1,.25,1),"ease-in":Se(.42,0,1,1),"ease-out":Se(0,0,.58,1),"ease-in-out":Se(.42,0,.58,1),"ease-in-sine":Se(.47,0,.745,.715),"ease-out-sine":Se(.39,.575,.565,1),"ease-in-out-sine":Se(.445,.05,.55,.95),"ease-in-quad":Se(.55,.085,.68,.53),"ease-out-quad":Se(.25,.46,.45,.94),"ease-in-out-quad":Se(.455,.03,.515,.955),"ease-in-cubic":Se(.55,.055,.675,.19),"ease-out-cubic":Se(.215,.61,.355,1),"ease-in-out-cubic":Se(.645,.045,.355,1),"ease-in-quart":Se(.895,.03,.685,.22),"ease-out-quart":Se(.165,.84,.44,1),"ease-in-out-quart":Se(.77,0,.175,1),"ease-in-quint":Se(.755,.05,.855,.06),"ease-out-quint":Se(.23,1,.32,1),"ease-in-out-quint":Se(.86,0,.07,1),"ease-in-expo":Se(.95,.05,.795,.035),"ease-out-expo":Se(.19,1,.22,1),"ease-in-out-expo":Se(1,0,0,1),"ease-in-circ":Se(.6,.04,.98,.335),"ease-out-circ":Se(.075,.82,.165,1),"ease-in-out-circ":Se(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return Wr.linear;var r=hf(e,t,n);return function(i,o,a){return i+(o-i)*r(a)}},"cubic-bezier":Se};function No(e,t,n,r,i){if(r===1||t===n)return n;var o=i(t,n,r);return e==null||((e.roundValue||e.color)&&(o=Math.round(o)),e.min!==void 0&&(o=Math.max(o,e.min)),e.max!==void 0&&(o=Math.min(o,e.max))),o}function Mo(e,t){return e.pfValue!=null||e.value!=null?e.pfValue!=null&&(t==null||t.type.units!=="%")?e.pfValue:e.value:e}function Cn(e,t,n,r,i){var o=i!=null?i.type:null;n<0?n=0:n>1&&(n=1);var a=Mo(e,i),l=Mo(t,i);if(ne(a)&&ne(l))return No(o,a,l,n,r);if(Me(a)&&Me(l)){for(var s=[],u=0;u<l.length;u++){var c=a[u],h=l[u];if(c!=null&&h!=null){var g=No(o,c,h,n,r);s.push(g)}else s.push(h)}return s}}function df(e,t,n,r){var i=!r,o=e._private,a=t._private,l=a.easing,s=a.startTime,u=r?e:e.cy(),c=u.style();if(!a.easingImpl)if(l==null)a.easingImpl=Wr.linear;else{var h;if(he(l)){var g=c.parse("transition-timing-function",l);h=g.value}else h=l;var d,p;he(h)?(d=h,p=[]):(d=h[1],p=h.slice(2).map(function(P){return+P})),p.length>0?(d==="spring"&&p.push(a.duration),a.easingImpl=Wr[d].apply(null,p)):a.easingImpl=Wr[d]}var v=a.easingImpl,b;if(a.duration===0?b=1:b=(n-s)/a.duration,a.applying&&(b=a.progress),b<0?b=0:b>1&&(b=1),a.delay==null){var f=a.startPosition,m=a.position;if(m&&i&&!e.locked()){var x={};nr(f.x,m.x)&&(x.x=Cn(f.x,m.x,b,v)),nr(f.y,m.y)&&(x.y=Cn(f.y,m.y,b,v)),e.position(x)}var T=a.startPan,_=a.pan,C=o.pan,y=_!=null&&r;y&&(nr(T.x,_.x)&&(C.x=Cn(T.x,_.x,b,v)),nr(T.y,_.y)&&(C.y=Cn(T.y,_.y,b,v)),e.emit("pan"));var w=a.startZoom,E=a.zoom,D=E!=null&&r;D&&(nr(w,E)&&(o.zoom=gr(o.minZoom,Cn(w,E,b,v),o.maxZoom)),e.emit("zoom")),(y||D)&&e.emit("viewport");var A=a.style;if(A&&A.length>0&&i){for(var k=0;k<A.length;k++){var M=A[k],L=M.name,O=M,R=a.startStyle[L],I=c.properties[R.name],S=Cn(R,O,b,v,I);c.overrideBypass(e,L,S)}e.emit("style")}}return a.progress=b,b}function nr(e,t){return e==null||t==null?!1:ne(e)&&ne(t)?!0:!!(e&&t)}function pf(e,t,n,r){var i=t._private;i.started=!0,i.startTime=n-i.progress*i.duration}function So(e,t){var n=t._private.aniEles,r=[];function i(c,h){var g=c._private,d=g.animation.current,p=g.animation.queue,v=!1;if(d.length===0){var b=p.shift();b&&d.push(b)}for(var f=function(_){for(var C=_.length-1;C>=0;C--){var y=_[C];y()}_.splice(0,_.length)},m=d.length-1;m>=0;m--){var x=d[m],T=x._private;if(T.stopped){d.splice(m,1),T.hooked=!1,T.playing=!1,T.started=!1,f(T.frames);continue}!T.playing&&!T.applying||(T.playing&&T.applying&&(T.applying=!1),T.started||pf(c,x,e),df(c,x,e,h),T.applying&&(T.applying=!1),f(T.frames),T.step!=null&&T.step(e),x.completed()&&(d.splice(m,1),T.hooked=!1,T.playing=!1,T.started=!1,f(T.completes)),v=!0)}return!h&&d.length===0&&p.length===0&&r.push(c),v}for(var o=!1,a=0;a<n.length;a++){var l=n[a],s=i(l);o=o||s}var u=i(t,!0);(o||u)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}var gf={animate:Ae.animate(),animation:Ae.animation(),animated:Ae.animated(),clearQueue:Ae.clearQueue(),delay:Ae.delay(),delayAnimation:Ae.delayAnimation(),stop:Ae.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&ni(function(r){So(r,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(r,i){So(i,e)},n.beforeRenderPriorities.animations):t()}},ff={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return r!=null?e!==n.target&&Er(n.target)&&r.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Yr=function(e){return he(e)?new en(e):e},ll={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Ei(ff,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Yr(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Yr(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Yr(t),n),this},once:function(e,t,n){return this.emitter().one(e,Yr(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Ae.eventAliasesOn(ll);var Zi={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Zi.jpeg=Zi.jpg;var $r={layout:function(e){var t=this;if(e==null){Be("Layout options must be specified to make a layout");return}if(e.name==null){Be("A `name` must be specified to make a layout");return}var n=e.name,r=t.extension("layout",n);if(r==null){Be("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;he(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var o=new r(ve({},e,{cy:t,eles:i}));return o}};$r.createLayout=$r.makeLayout=$r.layout;var vf={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&r.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i],a=t.getElementById(i);a.data(o)}})}},yf=et({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Qi={renderTo:function(e,t,n,r){var i=this._private.renderer;return i.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){Be("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&ke("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=yf(e);r.cy=t,t._private.renderer=new n(r),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var r=n._private;r.rscratch={},r.rstyle={},r.animation.current=[],r.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Qi.invalidateDimensions=Qi.resize;var Kr={collection:function(e,t){return he(e)?this.$(e):ft(e)?e.collection():Me(e)?(t||(t={}),new Je(this,e,t.unique,t.removed)):new Je(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Kr.elements=Kr.filter=Kr.$;var ot={},lr="t",mf="f";ot.apply=function(e){for(var t=this,n=t._private,r=n.cy,i=r.collection(),o=0;o<e.length;o++){var a=e[o],l=t.getContextMeta(a);if(!l.empty){var s=t.getContextStyle(l),u=t.applyContextStyle(l,s,a);a._private.appliedInitStyle?t.updateTransitions(a,u.diffProps):a._private.appliedInitStyle=!0;var c=t.updateStyleHints(a);c&&i.push(a)}}return i};ot.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=e+"-"+t,o=r[i];if(o)return o;for(var a=[],l={},s=0;s<n.length;s++){var u=n[s],c=e[s]===lr,h=t[s]===lr,g=c!==h,d=u.mappedProperties.length>0;if(g||h&&d){var p=void 0;g&&d||g?p=u.properties:d&&(p=u.mappedProperties);for(var v=0;v<p.length;v++){for(var b=p[v],f=b.name,m=!1,x=s+1;x<n.length;x++){var T=n[x],_=t[x]===lr;if(_&&(m=T.properties[b.name]!=null,m))break}!l[f]&&!m&&(l[f]=!0,a.push(f))}}}return r[i]=a,a};ot.getContextMeta=function(e){for(var t=this,n="",r,i=e._private.styleCxtKey||"",o=0;o<t.length;o++){var a=t[o],l=a.selector&&a.selector.matches(e);l?n+=lr:n+=mf}return r=t.getPropertiesDiff(i,n),e._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:r.length===0}};ot.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var i={_private:{key:t}},o=0;o<n.length;o++){var a=n[o],l=t[o]===lr;if(l)for(var s=0;s<a.properties.length;s++){var u=a.properties[s];i[u.name]=u}}return r[t]=i,i};ot.applyContextStyle=function(e,t,n){for(var r=this,i=e.diffPropNames,o={},a=r.types,l=0;l<i.length;l++){var s=i[l],u=t[s],c=n.pstyle(s);if(!u)if(c)c.bypass?u={name:s,deleteBypassed:!0}:u={name:s,delete:!0};else continue;if(c!==u){if(u.mapped===a.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var h=c.mapping,g=h.fnValue=u.value(n);if(g===h.prevFnValue)continue}var d=o[s]={prev:c};r.applyParsedProperty(n,u),d.next=n.pstyle(s),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:o}};ot.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function(Z,re,ge){return n.getPropertiesHash(Z,re,ge)},a=t.styleKey;if(e.removed())return!1;var l=t.group==="nodes",s=e._private.style;r=Object.keys(s);for(var u=0;u<i.length;u++){var c=i[u];t.styleKeys[c]=[Ln,ir]}for(var h=function(Z,re){return t.styleKeys[re][0]=hr(Z,t.styleKeys[re][0])},g=function(Z,re){return t.styleKeys[re][1]=dr(Z,t.styleKeys[re][1])},d=function(Z,re){h(Z,re),g(Z,re)},p=function(Z,re){for(var ge=0;ge<Z.length;ge++){var de=Z.charCodeAt(ge);h(de,re),g(de,re)}},v=2e9,b=function(Z){return-128<Z&&Z<128&&Math.floor(Z)!==Z?v-(Z*1024|0):Z},f=0;f<r.length;f++){var m=r[f],x=s[m];if(x!=null){var T=this.properties[m],_=T.type,C=T.groupKey,y=void 0;T.hashOverride!=null?y=T.hashOverride(e,x):x.pfValue!=null&&(y=x.pfValue);var w=T.enums==null?x.value:null,E=y!=null,D=w!=null,A=E||D,k=x.units;if(_.number&&A&&!_.multiple){var M=E?y:w;d(b(M),C),!E&&k!=null&&p(k,C)}else p(x.strValue,C)}}for(var L=[Ln,ir],O=0;O<i.length;O++){var R=i[O],I=t.styleKeys[R];L[0]=hr(I[0],L[0]),L[1]=dr(I[1],L[1])}t.styleKey=Ec(L[0],L[1]);var S=t.styleKeys;t.labelDimsKey=qt(S.labelDimensions);var P=o(e,["label"],S.labelDimensions);if(t.labelKey=qt(P),t.labelStyleKey=qt(Sr(S.commonLabel,P)),!l){var z=o(e,["source-label"],S.labelDimensions);t.sourceLabelKey=qt(z),t.sourceLabelStyleKey=qt(Sr(S.commonLabel,z));var F=o(e,["target-label"],S.labelDimensions);t.targetLabelKey=qt(F),t.targetLabelStyleKey=qt(Sr(S.commonLabel,F))}if(l){var G=t.styleKeys,Y=G.nodeBody,W=G.nodeBorder,Q=G.nodeOutline,B=G.backgroundImage,U=G.compound,X=G.pie,$=[Y,W,Q,B,U,X].filter(function(Z){return Z!=null}).reduce(Sr,[Ln,ir]);t.nodeKey=qt($),t.hasPie=X!=null&&X[0]!==Ln&&X[1]!==ir}return a!==t.styleKey};ot.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null};ot.applyParsedProperty=function(e,t){var n=this,r=t,i=e._private.style,o,a=n.types,l=n.properties[r.name].type,s=r.bypass,u=i[r.name],c=u&&u.bypass,h=e._private,g="mapping",d=function(G){return G==null?null:G.pfValue!=null?G.pfValue:G.value},p=function(){var G=d(u),Y=d(r);n.checkTriggers(e,r.name,G,Y)};if(t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))&&(r=t=this.parse(t.name,"bezier",s)),r.delete)return i[r.name]=void 0,p(),!0;if(r.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,p(),!0):!1:(p(),!0);if(r.deleteBypass)return u?u.bypass?(i[r.name]=u.bypassed,p(),!0):!1:(p(),!0);var v=function(){ke("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")};switch(r.mapped){case a.mapData:{for(var b=r.field.split("."),f=h.data,m=0;m<b.length&&f;m++){var x=b[m];f=f[x]}if(f==null)return v(),!1;var T;if(ne(f)){var _=r.fieldMax-r.fieldMin;_===0?T=0:T=(f-r.fieldMin)/_}else return ke("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+f+"` for `"+e.id()+"` is non-numeric)"),!1;if(T<0?T=0:T>1&&(T=1),l.color){var C=r.valueMin[0],y=r.valueMax[0],w=r.valueMin[1],E=r.valueMax[1],D=r.valueMin[2],A=r.valueMax[2],k=r.valueMin[3]==null?1:r.valueMin[3],M=r.valueMax[3]==null?1:r.valueMax[3],L=[Math.round(C+(y-C)*T),Math.round(w+(E-w)*T),Math.round(D+(A-D)*T),Math.round(k+(M-k)*T)];o={bypass:r.bypass,name:r.name,value:L,strValue:"rgb("+L[0]+", "+L[1]+", "+L[2]+")"}}else if(l.number){var O=r.valueMin+(r.valueMax-r.valueMin)*T;o=this.parse(r.name,O,r.bypass,g)}else return!1;if(!o)return v(),!1;o.mapping=r,r=o;break}case a.data:{for(var R=r.field.split("."),I=h.data,S=0;S<R.length&&I;S++){var P=R[S];I=I[P]}if(I!=null&&(o=this.parse(r.name,I,r.bypass,g)),!o)return v(),!1;o.mapping=r,r=o;break}case a.fn:{var z=r.value,F=r.fnValue!=null?r.fnValue:z(e);if(r.prevFnValue=F,F==null)return ke("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+e.id()+"` is null)"),!1;if(o=this.parse(r.name,F,r.bypass,g),!o)return ke("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+e.id()+"` is invalid)"),!1;o.mapping=It(r),r=o;break}case void 0:break;default:return!1}return s?(c?r.bypassed=u.bypassed:r.bypassed=u,i[r.name]=r):c?u.bypassed=r:i[r.name]=r,p(),!0};ot.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),!t)r._private.style={};else for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var l=o[a],s=i[l];s!=null&&(s.bypass?s.bypassed=null:i[l]=null)}}};ot.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()};ot.updateTransitions=function(e,t){var n=this,r=e._private,i=e.pstyle("transition-property").value,o=e.pstyle("transition-duration").pfValue,a=e.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var l={},s=!1,u=0;u<i.length;u++){var c=i[u],h=e.pstyle(c),g=t[c];if(g){var d=g.prev,p=d,v=g.next!=null?g.next:h,b=!1,f=void 0,m=1e-6;p&&(ne(p.pfValue)&&ne(v.pfValue)?(b=v.pfValue-p.pfValue,f=p.pfValue+m*b):ne(p.value)&&ne(v.value)?(b=v.value-p.value,f=p.value+m*b):Me(p.value)&&Me(v.value)&&(b=p.value[0]!==v.value[0]||p.value[1]!==v.value[1]||p.value[2]!==v.value[2],f=p.strValue),b&&(l[c]=v.strValue,this.applyBypass(e,c,f),s=!0))}}if(!s)return;r.transitioning=!0,new Yn(function(x){a>0?e.delayAnimation(a).play().promise().then(x):x()}).then(function(){return e.animation({style:l,duration:o,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1)};ot.checkTrigger=function(e,t,n,r,i,o){var a=this.properties[t],l=i(a);l!=null&&l(n,r)&&o(a)};ot.checkZOrderTrigger=function(e,t,n,r){var i=this;this.checkTrigger(e,t,n,r,function(o){return o.triggersZOrder},function(){i._private.cy.notify("zorder",e)})};ot.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(i){return i.triggersBounds},function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&t==="curve-style"&&(n==="bezier"||r==="bezier")&&e.parallelEdges().forEach(function(o){o.isBundledBezier()&&o.dirtyBoundingBoxCache()}),i.triggersBoundsOfConnectedEdges&&t==="display"&&(n==="none"||r==="none")&&e.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};ot.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r)};var Dr={};Dr.applyBypass=function(e,t,n,r){var i=this,o=[],a=!0;if(t==="*"||t==="**"){if(n!==void 0)for(var l=0;l<i.properties.length;l++){var s=i.properties[l],u=s.name,c=this.parse(u,n,!0);c&&o.push(c)}}else if(he(t)){var h=this.parse(t,n,!0);h&&o.push(h)}else if(_e(t)){var g=t;r=n;for(var d=Object.keys(g),p=0;p<d.length;p++){var v=d[p],b=g[v];if(b===void 0&&(b=g[di(v)]),b!==void 0){var f=this.parse(v,b,!0);f&&o.push(f)}}}else return!1;if(o.length===0)return!1;for(var m=!1,x=0;x<e.length;x++){for(var T=e[x],_={},C=void 0,y=0;y<o.length;y++){var w=o[y];if(r){var E=T.pstyle(w.name);C=_[w.name]={prev:E}}m=this.applyParsedProperty(T,It(w))||m,r&&(C.next=T.pstyle(w.name))}m&&this.updateStyleHints(T),r&&this.updateTransitions(T,_,a)}return m};Dr.overrideBypass=function(e,t,n){t=pa(t);for(var r=0;r<e.length;r++){var i=e[r],o=i._private.style[t],a=this.properties[t].type,l=a.color,s=a.mutiple,u=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(i,t,n):(o.value=n,o.pfValue!=null&&(o.pfValue=n),l?o.strValue="rgb("+n.join(",")+")":s?o.strValue=n.join(" "):o.strValue=""+n,this.updateStyleHints(i)),this.checkTriggers(i,t,u,n)}};Dr.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)};Dr.removeBypasses=function(e,t,n){for(var r=!0,i=0;i<e.length;i++){for(var o=e[i],a={},l=0;l<t.length;l++){var s=t[l],u=this.properties[s],c=o.pstyle(u.name);if(!(!c||!c.bypass)){var h="",g=this.parse(s,h,!0),d=a[u.name]={prev:c};this.applyParsedProperty(o,g),d.next=o.pstyle(u.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,a,r)}};var Aa={};Aa.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return e!=null?parseFloat(e):1};Aa.containerCss=function(e){var t=this._private.cy,n=t.container(),r=t.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(e)};var Rt={};Rt.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)};Rt.getRawStyle=function(e,t){var n=this;if(e=e[0],e){for(var r={},i=0;i<n.properties.length;i++){var o=n.properties[i],a=n.getStylePropertyValue(e,o.name,t);a!=null&&(r[o.name]=a,r[di(o.name)]=a)}return r}};Rt.getIndexedStyle=function(e,t,n,r){var i=e.pstyle(t)[n][r];return i??e.cy().style().getDefaultProperty(t)[n][0]};Rt.getStylePropertyValue=function(e,t,n){var r=this;if(e=e[0],e){var i=r.properties[t];i.alias&&(i=i.pointsTo);var o=i.type,a=e.pstyle(i.name);if(a){var l=a.value,s=a.units,u=a.strValue;if(n&&o.number&&l!=null&&ne(l)){var c=e.cy().zoom(),h=function(v){return v*c},g=function(v,b){return h(v)+b},d=Me(l),p=d?s.every(function(v){return v!=null}):s!=null;return p?d?l.map(function(v,b){return g(v,s[b])}).join(" "):g(l,s):d?l.map(function(v){return he(v)?v:""+h(v)}).join(" "):""+h(l)}else if(u!=null)return u}return null}};Rt.getAnimationStartStyle=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],o=i.name,a=e.pstyle(o);a!==void 0&&(_e(a)?a=this.parse(o,a.strValue):a=this.parse(o,a)),a&&(n[o]=a)}return n};Rt.getPropsList=function(e){var t=this,n=[],r=e,i=t.properties;if(r)for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a],s=r[l],u=i[l]||i[pa(l)],c=this.parse(u.name,s);c&&n.push(c)}return n};Rt.getNonDefaultPropertiesHash=function(e,t,n){var r=n.slice(),i,o,a,l,s,u;for(s=0;s<t.length;s++)if(i=t[s],o=e.pstyle(i,!1),o!=null)if(o.pfValue!=null)r[0]=hr(l,r[0]),r[1]=dr(l,r[1]);else for(a=o.strValue,u=0;u<a.length;u++)l=a.charCodeAt(u),r[0]=hr(l,r[0]),r[1]=dr(l,r[1]);return r};Rt.getPropertiesHash=Rt.getNonDefaultPropertiesHash;var Ci={};Ci.appendFromJson=function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);t.selector(i);for(var l=0;l<a.length;l++){var s=a[l],u=o[s];t.css(s,u)}}return t};Ci.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t};Ci.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var l=i[a];o[l.name]=l.strValue}e.push({selector:r?r.toString():"core",style:o})}return e};var ka={};ka.appendFromString=function(e){var t=this,n=this,r=""+e,i,o,a;r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");function l(){r.length>i.length?r=r.substr(i.length):r=""}function s(){o.length>a.length?o=o.substr(a.length):o=""}for(;;){var u=r.match(/^\s*$/);if(u)break;var c=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){ke("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}i=c[0];var h=c[1];if(h!=="core"){var g=new en(h);if(g.invalid){ke("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),l();continue}}var d=c[2],p=!1;o=d;for(var v=[];;){var b=o.match(/^\s*$/);if(b)break;var f=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!f){ke("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),p=!0;break}a=f[0];var m=f[1],x=f[2],T=t.properties[m];if(!T){ke("Skipping property: Invalid property name in: "+a),s();continue}var _=n.parse(m,x);if(!_){ke("Skipping property: Invalid property definition in: "+a),s();continue}v.push({name:m,val:x}),s()}if(p){l();break}n.selector(h);for(var C=0;C<v.length;C++){var y=v[C];n.css(y.name,y.val)}l()}return n};ka.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t};var Ze={};(function(){var e=Ue,t=Cu,n=Au,r=ku,i=Lu,o=function(X){return"^"+X+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(X){var $=e+"|\\w+|"+t+"|"+n+"|"+r+"|"+i;return"^"+X+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+$+")\\s*\\,\\s*("+$+")\\)$"},l=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Ze.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:l,singleRegexMatchValue:!0},urls:{regexes:l,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(X,$){switch(X.length){case 2:return $[0]!=="deg"&&$[0]!=="rad"&&$[1]!=="deg"&&$[1]!=="rad";case 1:return he(X[0])||$[0]==="deg"||$[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(X){var $=X.length;return $===1||$===2||$===4}}};var s={zeroNonZero:function(X,$){return(X==null||$==null)&&X!==$||X==0&&$!=0?!0:X!=0&&$==0},any:function(X,$){return X!=$},emptyNonEmpty:function(X,$){var Z=Qt(X),re=Qt($);return Z&&!re||!Z&&re}},u=Ze.types,c=[{name:"label",type:u.text,triggersBounds:s.any,triggersZOrder:s.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:s.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:s.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:s.any}],h=[{name:"source-label",type:u.text,triggersBounds:s.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:s.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:s.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:s.any},{name:"source-text-offset",type:u.size,triggersBounds:s.any}],g=[{name:"target-label",type:u.text,triggersBounds:s.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:s.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:s.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:s.any},{name:"target-text-offset",type:u.size,triggersBounds:s.any}],d=[{name:"font-family",type:u.fontFamily,triggersBounds:s.any},{name:"font-style",type:u.fontStyle,triggersBounds:s.any},{name:"font-weight",type:u.fontWeight,triggersBounds:s.any},{name:"font-size",type:u.size,triggersBounds:s.any},{name:"text-transform",type:u.textTransform,triggersBounds:s.any},{name:"text-wrap",type:u.textWrap,triggersBounds:s.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:s.any},{name:"text-max-width",type:u.size,triggersBounds:s.any},{name:"text-outline-width",type:u.size,triggersBounds:s.any},{name:"line-height",type:u.positiveNumber,triggersBounds:s.any}],p=[{name:"text-valign",type:u.valign,triggersBounds:s.any},{name:"text-halign",type:u.halign,triggersBounds:s.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:s.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:s.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:s.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:s.any},{name:"text-justification",type:u.justification}],v=[{name:"events",type:u.bool,triggersZOrder:s.any},{name:"text-events",type:u.bool,triggersZOrder:s.any}],b=[{name:"display",type:u.display,triggersZOrder:s.any,triggersBounds:s.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:u.visibility,triggersZOrder:s.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:s.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:s.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:s.any},{name:"z-index",type:u.number,triggersZOrder:s.any}],f=[{name:"overlay-padding",type:u.size,triggersBounds:s.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:s.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:s.any},{name:"overlay-corner-radius",type:u.cornerRadius}],m=[{name:"underlay-padding",type:u.size,triggersBounds:s.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:s.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:s.any},{name:"underlay-corner-radius",type:u.cornerRadius}],x=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],T=function(X,$){return $.value==="label"?-X.poolIndex():$.pfValue},_=[{name:"height",type:u.nodeSize,triggersBounds:s.any,hashOverride:T},{name:"width",type:u.nodeSize,triggersBounds:s.any,hashOverride:T},{name:"shape",type:u.nodeShape,triggersBounds:s.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:s.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:s.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:s.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:s.any}],C=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:s.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],y=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:s.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:s.any}],w=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],E=[{name:"position",type:u.position,triggersBounds:s.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:s.any},{name:"min-width",type:u.size,triggersBounds:s.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:s.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:s.any},{name:"min-height",type:u.size,triggersBounds:s.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:s.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:s.any}],D=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:s.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:s.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:s.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:s.any},{name:"control-point-step-size",type:u.size,triggersBounds:s.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:s.any},{name:"control-point-weights",type:u.numbers,triggersBounds:s.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:s.any},{name:"segment-weights",type:u.numbers,triggersBounds:s.any},{name:"segment-radii",type:u.numbers,triggersBounds:s.any},{name:"radius-type",type:u.radiusType,triggersBounds:s.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:s.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:s.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:s.any},{name:"taxi-radius",type:u.number,triggersBounds:s.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:s.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:s.any},{name:"loop-direction",type:u.angle,triggersBounds:s.any},{name:"loop-sweep",type:u.angle,triggersBounds:s.any},{name:"source-distance-from-node",type:u.size,triggersBounds:s.any},{name:"target-distance-from-node",type:u.size,triggersBounds:s.any}],A=[{name:"ghost",type:u.bool,triggersBounds:s.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:s.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:s.any},{name:"ghost-opacity",type:u.zeroOneNumber}],k=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],M=[];Ze.pieBackgroundN=16,M.push({name:"pie-size",type:u.sizeMaybePercent});for(var L=1;L<=Ze.pieBackgroundN;L++)M.push({name:"pie-"+L+"-background-color",type:u.color}),M.push({name:"pie-"+L+"-background-size",type:u.percent}),M.push({name:"pie-"+L+"-background-opacity",type:u.zeroOneNumber});var O=[],R=Ze.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:s.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(X){R.forEach(function($){var Z=$+"-"+X.name,re=X.type,ge=X.triggersBounds;O.push({name:Z,type:re,triggersBounds:ge})})},{});var I=Ze.properties=[].concat(v,x,b,f,m,A,p,d,c,h,g,_,C,y,w,M,E,D,O,k),S=Ze.propertyGroups={behavior:v,transition:x,visibility:b,overlay:f,underlay:m,ghost:A,commonLabel:p,labelDimensions:d,mainLabel:c,sourceLabel:h,targetLabel:g,nodeBody:_,nodeBorder:C,nodeOutline:y,backgroundImage:w,pie:M,compound:E,edgeLine:D,edgeArrow:O,core:k},P=Ze.propertyGroupNames={},z=Ze.propertyGroupKeys=Object.keys(S);z.forEach(function(X){P[X]=S[X].map(function($){return $.name}),S[X].forEach(function($){return $.groupKey=X})});var F=Ze.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Ze.propertyNames=I.map(function(X){return X.name});for(var G=0;G<I.length;G++){var Y=I[G];I[Y.name]=Y}for(var W=0;W<F.length;W++){var Q=F[W],B=I[Q.pointsTo],U={name:Q.name,alias:!0,pointsTo:B};I.push(U),I[Q.name]=U}})();Ze.getDefaultProperty=function(e){return this.getDefaultProperties()[e]};Ze.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;for(var t=ve({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(s,u){for(var c=1;c<=Ze.pieBackgroundN;c++){var h=u.name.replace("{{i}}",c),g=u.value;s[h]=g}return s},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(s,u){return Ze.arrowPrefixes.forEach(function(c){var h=c+"-"+u.name,g=u.value;s[h]=g}),s},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=t[o],l=this.parse(o,a);n[o]=l}}return e.defaultProperties=n,e.defaultProperties};Ze.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Di={};Di.parse=function(e,t,n,r){var i=this;if(Re(t))return i.parseImplWarn(e,t,n,r);var o=r==="mapping"||r===!0||r===!1||r==null?"dontcare":r,a=n?"t":"f",l=""+t,s=ys(e,l,a,o),u=i.propCache=i.propCache||[],c;return(c=u[s])||(c=u[s]=i.parseImplWarn(e,t,n,r)),(n||r==="mapping")&&(c=It(c),c&&(c.value=It(c.value))),c};Di.parseImplWarn=function(e,t,n,r){var i=this.parseImpl(e,t,n,r);return!i&&t!=null&&ke("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&t==="label"&&ke("The style value of `label` is deprecated for `"+i.name+"`"),i};Di.parseImpl=function(e,t,n,r){var i=this;e=pa(e);var o=i.properties[e],a=t,l=i.types;if(!o||t===void 0)return null;o.alias&&(o=o.pointsTo,e=o.name);var s=he(t);s&&(t=t.trim());var u=o.type;if(!u)return null;if(n&&(t===""||t===null))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(Re(t))return{name:e,value:t,strValue:"fn",mapped:l.fn,bypass:n};var c,h;if(!(!s||r||t.length<7||t[1]!=="a")){if(t.length>=7&&t[0]==="d"&&(c=new RegExp(l.data.regex).exec(t))){if(n)return!1;var g=l.data;return{name:e,value:c,strValue:""+t,mapped:g,field:c[1],bypass:n}}else if(t.length>=10&&t[0]==="m"&&(h=new RegExp(l.mapData.regex).exec(t))){if(n||u.multiple)return!1;var d=l.mapData;if(!(u.color||u.number))return!1;var p=this.parse(e,h[4]);if(!p||p.mapped)return!1;var v=this.parse(e,h[5]);if(!v||v.mapped)return!1;if(p.pfValue===v.pfValue||p.strValue===v.strValue)return ke("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+p.strValue+"`"),this.parse(e,p.strValue);if(u.color){var b=p.value,f=v.value,m=b[0]===f[0]&&b[1]===f[1]&&b[2]===f[2]&&(b[3]===f[3]||(b[3]==null||b[3]===1)&&(f[3]==null||f[3]===1));if(m)return!1}return{name:e,value:h,strValue:""+t,mapped:d,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:p.value,valueMax:v.value,bypass:n}}}if(u.multiple&&r!=="multiple"){var x;if(s?x=t.split(/\s+/):Me(t)?x=t:x=[t],u.evenMultiple&&x.length%2!==0)return null;for(var T=[],_=[],C=[],y="",w=!1,E=0;E<x.length;E++){var D=i.parse(e,x[E],n,"multiple");w=w||he(D.value),T.push(D.value),C.push(D.pfValue!=null?D.pfValue:D.value),_.push(D.units),y+=(E>0?" ":"")+D.strValue}return u.validate&&!u.validate(T,_)?null:u.singleEnum&&w?T.length===1&&he(T[0])?{name:e,value:T[0],strValue:T[0],bypass:n}:null:{name:e,value:T,pfValue:C,strValue:y,bypass:n,units:_}}var A=function(){for(var X=0;X<u.enums.length;X++){var $=u.enums[X];if($===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(u.number){var k,M="px";if(u.units&&(k=u.units),u.implicitUnits&&(M=u.implicitUnits),!u.unitless)if(s){var L="px|em"+(u.allowPercent?"|\\%":"");k&&(L=k);var O=t.match("^("+Ue+")("+L+")?$");O&&(t=O[1],k=O[2]||M)}else(!k||u.implicitUnits)&&(k=M);if(t=parseFloat(t),isNaN(t)&&u.enums===void 0)return null;if(isNaN(t)&&u.enums!==void 0)return t=a,A();if(u.integer&&!mu(t)||u.min!==void 0&&(t<u.min||u.strictMin&&t===u.min)||u.max!==void 0&&(t>u.max||u.strictMax&&t===u.max))return null;var R={name:e,value:t,strValue:""+t+(k||""),units:k,bypass:n};return u.unitless||k!=="px"&&k!=="em"?R.pfValue=t:R.pfValue=k==="px"||!k?t:this.getEmSizeInPixels()*t,(k==="ms"||k==="s")&&(R.pfValue=k==="ms"?t:1e3*t),(k==="deg"||k==="rad")&&(R.pfValue=k==="rad"?t:Qc(t)),k==="%"&&(R.pfValue=t/100),R}else if(u.propList){var I=[],S=""+t;if(S!=="none"){for(var P=S.split(/\s*,\s*|\s+/),z=0;z<P.length;z++){var F=P[z].trim();i.properties[F]?I.push(F):ke("`"+F+"` is not a valid property name")}if(I.length===0)return null}return{name:e,value:I,strValue:I.length===0?"none":I.join(" "),bypass:n}}else if(u.color){var G=Pu(t);return G?{name:e,value:G,pfValue:G,strValue:"rgb("+G[0]+","+G[1]+","+G[2]+")",bypass:n}:null}else if(u.regex||u.regexes){if(u.enums){var Y=A();if(Y)return Y}for(var W=u.regexes?u.regexes:[u.regex],Q=0;Q<W.length;Q++){var B=new RegExp(W[Q]),U=B.exec(t);if(U)return{name:e,value:u.singleRegexMatchValue?U[1]:U,strValue:""+t,bypass:n}}return null}else return u.string?{name:e,value:""+t,strValue:""+t,bypass:n}:u.enums?A():null};var rt=function e(t){if(!(this instanceof e))return new e(t);if(!da(t)){Be("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},at=rt.prototype;at.instanceString=function(){return"style"};at.clear=function(){for(var e=this._private,t=e.cy,n=t.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(n,!0),n.forEach(function(i){var o=i[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};at.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};at.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)};at.selector=function(e){var t=e==="core"?null:new en(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this};at.css=function(){var e=this,t=arguments;if(t.length===1)for(var n=t[0],r=0;r<e.properties.length;r++){var i=e.properties[r],o=n[i.name];o===void 0&&(o=n[di(i.name)]),o!==void 0&&this.cssRule(i.name,o)}else t.length===2&&this.cssRule(t[0],t[1]);return this};at.style=at.css;at.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this};at.append=function(e){return ss(e)?e.appendToStyle(this):Me(e)?this.appendFromJson(e):he(e)&&this.appendFromString(e),this};rt.fromJson=function(e,t){var n=new rt(e);return n.fromJson(t),n};rt.fromString=function(e,t){return new rt(e).fromString(t)};[ot,Dr,Aa,Rt,Ci,ka,Ze,Di].forEach(function(e){ve(at,e)});rt.types=at.types;rt.properties=at.properties;rt.propertyGroups=at.propertyGroups;rt.propertyGroupNames=at.propertyGroupNames;rt.propertyGroupKeys=at.propertyGroupKeys;var bf={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return ss(e)?t.style=e.generateStyle(this):Me(e)?t.style=rt.fromJson(this,e):he(e)?t.style=rt.fromString(this,e):t.style=rt(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},xf="single",mn={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=xf),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,r,i,o,a;switch(e.length){case 0:return t;case 1:if(he(e[0]))return n=e[0],t[n];if(_e(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,a=i.y,ne(o)&&(t.x=o),ne(a)&&(t.y=a),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],r=e[1],(n==="x"||n==="y")&&ne(r)&&(t[n]=r),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,r=this._private.pan,i,o,a,l,s;if(!this._private.panningEnabled)return this;switch(n.length){case 1:_e(e)&&(a=n[0],l=a.x,s=a.y,ne(l)&&(r.x+=l),ne(s)&&(r.y+=s),this.emit("pan viewport"));break;case 2:i=e,o=t,(i==="x"||i==="y")&&ne(o)&&(r[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(ne(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(he(e)){var r=e;e=this.$(r)}else if(wu(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else ft(e)||(e=this.mutableElements());if(!(ft(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),a=this.height(),l;if(t=ne(t)?t:0,!isNaN(o)&&!isNaN(a)&&o>0&&a>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*t)/n.w,(a-2*t)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var s={x:(o-l*(n.x1+n.x2))/2,y:(a-l*(n.y1+n.y2))/2};return{zoom:l,pan:s}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var r=e;e=r.min,t=r.max}return ne(e)&&ne(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):ne(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:ne(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,r=t.zoom,i,o,a=!1;if(t.zoomingEnabled||(a=!0),ne(e)?o=e:_e(e)&&(o=e.level,e.position!=null?i=vi(e.position,r,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(a=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,a||!ne(o)||o===r||i!=null&&(!ne(i.x)||!ne(i.y)))return null;if(i!=null){var l=n,s=r,u=o,c={x:-u/s*(i.x-l.x)+i.x,y:-u/s*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:u,pan:c}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!e)return this;if(ne(e.zoom)||(n=!1),_e(e.pan)||(r=!1),!n&&!r)return this;if(n){var l=e.zoom;l<t.minZoom||l>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=l,i.push("zoom"))}if(r&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var s=e.pan;ne(s.x)&&(t.pan.x=s.x,a=!1),ne(s.y)&&(t.pan.y=s.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(he(e)){var n=e;e=this.mutableElements().filter(n)}else ft(e)||(e=this.mutableElements());if(e.length!==0){var r=e.boundingBox(),i=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var a={x:(i-t*(r.x1+r.x2))/2,y:(o-t*(r.y1+r.y2))/2};return a}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var r=n.window().getComputedStyle(t),i=function(o){return parseFloat(r.getPropertyValue(o))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};mn.centre=mn.center;mn.autolockNodes=mn.autolock;mn.autoungrabifyNodes=mn.autoungrabify;var br={data:Ae.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ae.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ae.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ae.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};br.attr=br.data;br.removeAttr=br.removeData;var xr=function(e){var t=this;e=ve({},e);var n=e.container;n&&!ti(n)&&ti(n[0])&&(n=n[0]);var r=n?n._cyreg:null;r=r||{},r&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var o=Ve!==void 0&&n!==void 0&&!e.headless,a=e;a.layout=ve({name:o?"grid":"null"},a.layout),a.renderer=ve({name:o?"canvas":"null"},a.renderer);var l=function(g,d,p){return d!==void 0?d:p!==void 0?p:g},s=this._private={container:n,ready:!1,options:a,elements:new Je(this),listeners:[],aniEles:new Je(this),data:a.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,a.zoomingEnabled),userZoomingEnabled:l(!0,a.userZoomingEnabled),panningEnabled:l(!0,a.panningEnabled),userPanningEnabled:l(!0,a.userPanningEnabled),boxSelectionEnabled:l(!0,a.boxSelectionEnabled),autolock:l(!1,a.autolock,a.autolockNodes),autoungrabify:l(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:l(!1,a.autounselectify),styleEnabled:a.styleEnabled===void 0?o:a.styleEnabled,zoom:ne(a.zoom)?a.zoom:1,pan:{x:_e(a.pan)&&ne(a.pan.x)?a.pan.x:0,y:_e(a.pan)&&ne(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,a.multiClickDebounceTime)};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom});var u=function(g,d){var p=g.some(Eu);if(p)return Yn.all(g).then(d);d(g)};s.styleEnabled&&t.setStyle([]);var c=ve({},a,a.renderer);t.initRenderer(c);var h=function(g,d,p){t.notifications(!1);var v=t.mutableElements();v.length>0&&v.remove(),g!=null&&(_e(g)||Me(g))&&t.add(g),t.one("layoutready",function(f){t.notifications(!0),t.emit(f),t.one("load",d),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",p),t.emit("done")});var b=ve({},t._private.options.layout);b.eles=t.elements(),t.layout(b).run()};u([a.style,a.elements],function(g){var d=g[0],p=g[1];s.styleEnabled&&t.style().append(d),h(p,function(){t.startAnimationLoop(),s.ready=!0,Re(a.ready)&&t.on("ready",a.ready);for(var v=0;v<i.length;v++){var b=i[v];t.on("ready",b)}r&&(r.readies=[]),t.emit("ready")},a.done)})},li=xr.prototype;ve(li,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Ve;var t=this._private.container.ownerDocument;return t===void 0||t==null?Ve:t.defaultView||Ve},mount:function(e){if(e!=null){var t=this,n=t._private,r=n.options;return!ti(e)&&ti(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(ve({},r,r.renderer,{name:r.renderer.name==="null"?"canvas":r.renderer.name})),t.startAnimationLoop(),t.style(r.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return It(this._private.options)},json:function(e){var t=this,n=t._private,r=t.mutableElements(),i=function(m){return t.getElementById(m.id())};if(_e(e)){if(t.startBatch(),e.elements){var o={},a=function(m,x){for(var T=[],_=[],C=0;C<m.length;C++){var y=m[C];if(!y.data.id){ke("cy.json() cannot handle elements without an ID attribute");continue}var w=""+y.data.id,E=t.getElementById(w);o[w]=!0,E.length!==0?_.push({ele:E,json:y}):(x&&(y.group=x),T.push(y))}t.add(T);for(var D=0;D<_.length;D++){var A=_[D],k=A.ele,M=A.json;k.json(M)}};if(Me(e.elements))a(e.elements);else for(var l=["nodes","edges"],s=0;s<l.length;s++){var u=l[s],c=e.elements[u];Me(c)&&a(c,u)}var h=t.collection();r.filter(function(m){return!o[m.id()]}).forEach(function(m){m.isParent()?h.merge(m):m.remove()}),h.forEach(function(m){return m.children().move({parent:null})}),h.forEach(function(m){return i(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<g.length;d++){var p=g[d];e[p]!=null&&t[p](e[p])}return t.endBatch(),this}else{var v=!!e,b={};v?b.elements=this.elements().map(function(m){return m.json()}):(b.elements={},r.forEach(function(m){var x=m.group();b.elements[x]||(b.elements[x]=[]),b.elements[x].push(m.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=It(t.data());var f=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=It(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=It(f.renderer),b.hideEdgesOnViewport=f.hideEdgesOnViewport,b.textureOnViewport=f.textureOnViewport,b.wheelSensitivity=f.wheelSensitivity,b.motionBlur=f.motionBlur,b.multiClickDebounceTime=f.multiClickDebounceTime,b}}});li.$id=li.getElementById;[uf,gf,ll,Zi,$r,vf,Qi,Kr,bf,mn,br].forEach(function(e){ve(li,e)});var wf={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},Ef={maximal:!1,acyclic:!1},Dn=function(e){return e.scratch("breadthfirst")},Oo=function(e,t){return e.scratch("breadthfirst",t)};function ul(e){this.options=ve({},wf,Ef,e)}ul.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=r.nodes().filter(function(J){return!J.isParent()}),o=r,a=t.directed,l=t.acyclic||t.maximal||t.maximalAdjustments>0,s=pt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u;if(ft(t.roots))u=t.roots;else if(Me(t.roots)){for(var c=[],h=0;h<t.roots.length;h++){var g=t.roots[h],d=n.getElementById(g);c.push(d)}u=n.collection(c)}else if(he(t.roots))u=n.$(t.roots);else if(a)u=i.roots();else{var p=r.components();u=n.collection();for(var v=function(J){var oe=p[J],ie=oe.maxDegree(!1),ce=oe.filter(function(ye){return ye.degree(!1)===ie});u=u.add(ce)},b=0;b<p.length;b++)v(b)}var f=[],m={},x=function(J,oe){f[oe]==null&&(f[oe]=[]);var ie=f[oe].length;f[oe].push(J),Oo(J,{index:ie,depth:oe})},T=function(J,oe){var ie=Dn(J),ce=ie.depth,ye=ie.index;f[ce][ye]=null,x(J,oe)};o.bfs({roots:u,directed:t.directed,visit:function(J,oe,ie,ce,ye){var be=J[0],xe=be.id();x(be,ye),m[xe]=!0}});for(var _=[],C=0;C<i.length;C++){var y=i[C];m[y.id()]||_.push(y)}var w=function(J){for(var oe=f[J],ie=0;ie<oe.length;ie++){var ce=oe[ie];if(ce==null){oe.splice(ie,1),ie--;continue}Oo(ce,{depth:J,index:ie})}},E=function(){for(var J=0;J<f.length;J++)w(J)},D=function(J,oe){for(var ie=Dn(J),ce=J.incomers().filter(function(N){return N.isNode()&&r.has(N)}),ye=-1,be=J.id(),xe=0;xe<ce.length;xe++){var Le=ce[xe],we=Dn(Le);ye=Math.max(ye,we.depth)}if(ie.depth<=ye){if(!t.acyclic&&oe[be])return null;var Te=ye+1;return T(J,Te),oe[be]=Te,!0}return!1};if(a&&l){var A=[],k={},M=function(J){return A.push(J)},L=function(){return A.shift()};for(i.forEach(function(J){return A.push(J)});A.length>0;){var O=L(),R=D(O,k);if(R)O.outgoers().filter(function(J){return J.isNode()&&r.has(J)}).forEach(M);else if(R===null){ke("Detected double maximal shift for node `"+O.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}E();var I=0;if(t.avoidOverlap)for(var S=0;S<i.length;S++){var P=i[S],z=P.layoutDimensions(t),F=z.w,G=z.h;I=Math.max(I,F,G)}var Y={},W=function(J){if(Y[J.id()])return Y[J.id()];for(var oe=Dn(J).depth,ie=J.neighborhood(),ce=0,ye=0,be=0;be<ie.length;be++){var xe=ie[be];if(!(xe.isEdge()||xe.isParent()||!i.has(xe))){var Le=Dn(xe);if(Le!=null){var we=Le.index,Te=Le.depth;if(!(we==null||Te==null)){var N=f[Te].length;Te<oe&&(ce+=we/N,ye++)}}}}return ye=Math.max(1,ye),ce=ce/ye,ye===0&&(ce=0),Y[J.id()]=ce,ce},Q=function(J,oe){var ie=W(J),ce=W(oe),ye=ie-ce;return ye===0?us(J.id(),oe.id()):ye};t.depthSort!==void 0&&(Q=t.depthSort);for(var B=0;B<f.length;B++)f[B].sort(Q),w(B);for(var U=[],X=0;X<_.length;X++)U.push(_[X]);f.unshift(U),E();for(var $=0,Z=0;Z<f.length;Z++)$=Math.max(f[Z].length,$);var re={x:s.x1+s.w/2,y:s.x1+s.h/2},ge=f.reduce(function(J,oe){return Math.max(J,oe.length)},0),de=function(J){var oe=Dn(J),ie=oe.depth,ce=oe.index,ye=f[ie].length,be=Math.max(s.w/((t.grid?ge:ye)+1),I),xe=Math.max(s.h/(f.length+1),I),Le=Math.min(s.w/2/f.length,s.h/2/f.length);if(Le=Math.max(Le,I),t.circle){var we=Le*ie+Le-(f.length>0&&f[0].length<=3?Le/2:0),Te=2*Math.PI/f[ie].length*ce;return ie===0&&f[0].length===1&&(we=1),{x:re.x+we*Math.cos(Te),y:re.y+we*Math.sin(Te)}}else{var N={x:re.x+(ce+1-(ye+1)/2)*be,y:(ie+1)*xe};return N}};return r.nodes().layoutPositions(this,t,de),this};var _f={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function cl(e){this.options=ve({},_f,e)}cl.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,o=r.nodes().not(":parent");t.sort&&(o=o.sort(t.sort));for(var a=pt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:a.x1+a.w/2,y:a.y1+a.h/2},s=t.sweep===void 0?2*Math.PI-2*Math.PI/o.length:t.sweep,u=s/Math.max(1,o.length-1),c,h=0,g=0;g<o.length;g++){var d=o[g],p=d.layoutDimensions(t),v=p.w,b=p.h;h=Math.max(h,v,b)}if(ne(t.radius)?c=t.radius:o.length<=1?c=0:c=Math.min(a.h,a.w)/2-h,o.length>1&&t.avoidOverlap){h*=1.75;var f=Math.cos(u)-Math.cos(0),m=Math.sin(u)-Math.sin(0),x=Math.sqrt(h*h/(f*f+m*m));c=Math.max(x,c)}var T=function(_,C){var y=t.startAngle+C*u*(i?1:-1),w=c*Math.cos(y),E=c*Math.sin(y),D={x:l.x+w,y:l.y+E};return D};return r.nodes().layoutPositions(this,t,T),this};var Tf={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function hl(e){this.options=ve({},Tf,e)}hl.prototype.run=function(){for(var e=this.options,t=e,n=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,r=e.cy,i=t.eles,o=i.nodes().not(":parent"),a=pt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l={x:a.x1+a.w/2,y:a.y1+a.h/2},s=[],u=0,c=0;c<o.length;c++){var h=o[c],g=void 0;g=t.concentric(h),s.push({value:g,node:h}),h._private.scratch.concentric=g}o.updateStyle();for(var d=0;d<o.length;d++){var p=o[d],v=p.layoutDimensions(t);u=Math.max(u,v.w,v.h)}s.sort(function(J,oe){return oe.value-J.value});for(var b=t.levelWidth(o),f=[[]],m=f[0],x=0;x<s.length;x++){var T=s[x];if(m.length>0){var _=Math.abs(m[0].value-T.value);_>=b&&(m=[],f.push(m))}m.push(T)}var C=u+t.minNodeSpacing;if(!t.avoidOverlap){var y=f.length>0&&f[0].length>1,w=Math.min(a.w,a.h)/2-C,E=w/(f.length+y?1:0);C=Math.min(C,E)}for(var D=0,A=0;A<f.length;A++){var k=f[A],M=t.sweep===void 0?2*Math.PI-2*Math.PI/k.length:t.sweep,L=k.dTheta=M/Math.max(1,k.length-1);if(k.length>1&&t.avoidOverlap){var O=Math.cos(L)-Math.cos(0),R=Math.sin(L)-Math.sin(0),I=Math.sqrt(C*C/(O*O+R*R));D=Math.max(I,D)}k.r=D,D+=C}if(t.equidistant){for(var S=0,P=0,z=0;z<f.length;z++){var F=f[z],G=F.r-P;S=Math.max(S,G)}P=0;for(var Y=0;Y<f.length;Y++){var W=f[Y];Y===0&&(P=W.r),W.r=P,P+=S}}for(var Q={},B=0;B<f.length;B++)for(var U=f[B],X=U.dTheta,$=U.r,Z=0;Z<U.length;Z++){var re=U[Z],ge=t.startAngle+(n?1:-1)*X*Z,de={x:l.x+$*Math.cos(ge),y:l.y+$*Math.sin(ge)};Q[re.node.id()]=de}return i.nodes().layoutPositions(this,t,function(J){var oe=J.id();return Q[oe]}),this};var Yi,Cf={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Ai(e){this.options=ve({},Cf,e),this.options.layout=this;var t=this.options.eles.nodes(),n=this.options.eles.edges(),r=n.filter(function(i){var o=i.source().data("id"),a=i.target().data("id"),l=t.some(function(u){return u.data("id")===o}),s=t.some(function(u){return u.data("id")===a});return!l||!s});this.options.eles=this.options.eles.not(r)}Ai.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,(e.animate===!0||e.animate===!1)&&n.emit({type:"layoutstart",layout:n}),e.debug===!0?Yi=!0:Yi=!1;var r=Df(t,n,e);Yi&&Lf(r),e.randomize&&Nf(r);var i=Yt(),o=function(){Mf(r,t,e),e.fit===!0&&t.fit(e.padding)},a=function(h){return!(n.stopped||h>=e.numIter||(Sf(r,e),r.temperature=r.temperature*e.coolingFactor,r.temperature<e.minTemp))},l=function(){if(e.animate===!0||e.animate===!1)o(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var h=e.eles.nodes(),g=dl(r,e,h);h.layoutPositions(n,e,g)}},s=0,u=!0;if(e.animate===!0){var c=function h(){for(var g=0;u&&g<e.refresh;)u=a(s),s++,g++;if(!u)Po(r,e),l();else{var d=Yt();d-i>=e.animationThreshold&&o(),ni(h)}};c()}else{for(;u;)u=a(s),s++;Po(r,e),l()}return this};Ai.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Ai.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Df=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o=pt(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},l=n.eles.components(),s={},u=0;u<l.length;u++)for(var c=l[u],h=0;h<c.length;h++){var g=c[h];s[g.id()]=u}for(var u=0;u<a.nodeSize;u++){var d=i[u],p=d.layoutDimensions(n),v={};v.isLocked=d.locked(),v.id=d.data("id"),v.parentId=d.data("parent"),v.cmptId=s[d.id()],v.children=[],v.positionX=d.position("x"),v.positionY=d.position("y"),v.offsetX=0,v.offsetY=0,v.height=p.w,v.width=p.h,v.maxX=v.positionX+v.width/2,v.minX=v.positionX-v.width/2,v.maxY=v.positionY+v.height/2,v.minY=v.positionY-v.height/2,v.padLeft=parseFloat(d.style("padding")),v.padRight=parseFloat(d.style("padding")),v.padTop=parseFloat(d.style("padding")),v.padBottom=parseFloat(d.style("padding")),v.nodeRepulsion=Re(n.nodeRepulsion)?n.nodeRepulsion(d):n.nodeRepulsion,a.layoutNodes.push(v),a.idToIndex[v.id]=u}for(var b=[],f=0,m=-1,x=[],u=0;u<a.nodeSize;u++){var d=a.layoutNodes[u],T=d.parentId;T!=null?a.layoutNodes[a.idToIndex[T]].children.push(d.id):(b[++m]=d.id,x.push(d.id))}for(a.graphSet.push(x);f<=m;){var _=b[f++],C=a.idToIndex[_],g=a.layoutNodes[C],y=g.children;if(y.length>0){a.graphSet.push(y);for(var u=0;u<y.length;u++)b[++m]=y[u]}}for(var u=0;u<a.graphSet.length;u++)for(var w=a.graphSet[u],h=0;h<w.length;h++){var E=a.idToIndex[w[h]];a.indexToGraph[E]=u}for(var u=0;u<a.edgeSize;u++){var D=r[u],A={};A.id=D.data("id"),A.sourceId=D.data("source"),A.targetId=D.data("target");var k=Re(n.idealEdgeLength)?n.idealEdgeLength(D):n.idealEdgeLength,M=Re(n.edgeElasticity)?n.edgeElasticity(D):n.edgeElasticity,L=a.idToIndex[A.sourceId],O=a.idToIndex[A.targetId],R=a.indexToGraph[L],I=a.indexToGraph[O];if(R!=I){for(var S=Af(A.sourceId,A.targetId,a),P=a.graphSet[S],z=0,v=a.layoutNodes[L];P.indexOf(v.id)===-1;)v=a.layoutNodes[a.idToIndex[v.parentId]],z++;for(v=a.layoutNodes[O];P.indexOf(v.id)===-1;)v=a.layoutNodes[a.idToIndex[v.parentId]],z++;k*=z*n.nestingFactor}A.idealLength=k,A.elasticity=M,a.layoutEdges.push(A)}return a},Af=function(e,t,n){var r=kf(e,t,0,n);return 2>r.count?0:r.graph},kf=function e(t,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(t)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,l=0;l<o.length;l++){var s=o[l],u=i.idToIndex[s],c=i.layoutNodes[u].children;if(c.length!==0){var h=i.indexToGraph[i.idToIndex[c[0]]],g=e(t,n,h,i);if(g.count!==0)if(g.count===1){if(a++,a===2)break}else return g}}return{count:a,graph:r}},Lf,Nf=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},dl=function(e,t,n){var r=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var a=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,a.positionX),i.x2=Math.max(i.x2,a.positionX),i.y1=Math.min(i.y1,a.positionY),i.y2=Math.max(i.y2,a.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,a){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var s=(l.positionX-i.x1)/i.w,u=(l.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+u*r.h}}else return{x:l.positionX,y:l.positionY}}},Mf=function(e,t,n){var r=n.layout,i=n.eles.nodes(),o=dl(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},Sf=function(e,t,n){Of(e,t),Rf(e),Bf(e,t),Ff(e),zf(e)},Of=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=e.layoutNodes[e.idToIndex[r[o]]],l=o+1;l<i;l++){var s=e.layoutNodes[e.idToIndex[r[l]]];If(a,s,e,t)}},Io=function(e){return-e+2*e*Math.random()},If=function(e,t,n,r){var i=e.cmptId,o=t.cmptId;if(!(i!==o&&!n.isCompound)){var a=t.positionX-e.positionX,l=t.positionY-e.positionY,s=1;a===0&&l===0&&(a=Io(s),l=Io(s));var u=Pf(e,t,a,l);if(u>0)var b=r.nodeOverlap*u,v=Math.sqrt(a*a+l*l),f=b*a/v,m=b*l/v;else var c=ui(e,a,l),h=ui(t,-1*a,-1*l),g=h.x-c.x,d=h.y-c.y,p=g*g+d*d,v=Math.sqrt(p),b=(e.nodeRepulsion+t.nodeRepulsion)/p,f=b*g/v,m=b*d/v;e.isLocked||(e.offsetX-=f,e.offsetY-=m),t.isLocked||(t.offsetX+=f,t.offsetY+=m)}},Pf=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},ui=function(e,t,n){var r=e.positionX,i=e.positionY,o=e.height||1,a=e.width||1,l=n/t,s=o/a,u={};return t===0&&0<n||t===0&&0>n?(u.x=r,u.y=i+o/2,u):0<t&&-1*s<=l&&l<=s?(u.x=r+a/2,u.y=i+a*n/2/t,u):0>t&&-1*s<=l&&l<=s?(u.x=r-a/2,u.y=i-a*n/2/t,u):0<n&&(l<=-1*s||l>=s)?(u.x=r+o*t/2/n,u.y=i+o/2,u):(0>n&&(l<=-1*s||l>=s)&&(u.x=r-o*t/2/n,u.y=i-o/2),u)},Rf=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],o=e.layoutNodes[i],a=e.idToIndex[r.targetId],l=e.layoutNodes[a],s=l.positionX-o.positionX,u=l.positionY-o.positionY;if(!(s===0&&u===0)){var c=ui(o,s,u),h=ui(l,-1*s,-1*u),g=h.x-c.x,d=h.y-c.y,p=Math.sqrt(g*g+d*d),v=Math.pow(r.idealLength-p,2)/r.elasticity;if(p!==0)var b=v*g/p,f=v*d/p;else var b=0,f=0;o.isLocked||(o.offsetX+=b,o.offsetY+=f),l.isLocked||(l.offsetX-=b,l.offsetY-=f)}}},Bf=function(e,t){if(t.gravity!==0)for(var n=1,r=0;r<e.graphSet.length;r++){var i=e.graphSet[r],o=i.length;if(r===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var a=e.layoutNodes[e.idToIndex[i[0]]],l=e.layoutNodes[e.idToIndex[a.parentId]],s=l.positionX,u=l.positionY;for(var c=0;c<o;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var g=s-h.positionX,d=u-h.positionY,p=Math.sqrt(g*g+d*d);if(p>n){var v=t.gravity*g/p,b=t.gravity*d/p;h.offsetX+=v,h.offsetY+=b}}}}},Ff=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;r<=i;){var o=n[r++],a=e.idToIndex[o],l=e.layoutNodes[a],s=l.children;if(0<s.length&&!l.isLocked){for(var u=l.offsetX,c=l.offsetY,h=0;h<s.length;h++){var g=e.layoutNodes[e.idToIndex[s[h]]];g.offsetX+=u,g.offsetY+=c,n[++i]=s[h]}l.offsetX=0,l.offsetY=0}}},zf=function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=Gf(r.offsetX,r.offsetY,e.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,Yf(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},Gf=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else var i={x:e,y:t};return i},Yf=function e(t,n){var r=t.parentId;if(r!=null){var i=n.layoutNodes[n.idToIndex[r]],o=!1;if((i.maxX==null||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,o=!0),(i.minX==null||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,o=!0),(i.maxY==null||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,o=!0),(i.minY==null||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,o=!0),o)return e(i,n)}},Po=function(e,t){for(var n=e.layoutNodes,r=[],i=0;i<n.length;i++){var o=n[i],a=o.cmptId,l=r[a]=r[a]||[];l.push(o)}for(var s=0,i=0;i<r.length;i++){var u=r[i];if(u){u.x1=1/0,u.x2=-1/0,u.y1=1/0,u.y2=-1/0;for(var c=0;c<u.length;c++){var h=u[c];u.x1=Math.min(u.x1,h.positionX-h.width/2),u.x2=Math.max(u.x2,h.positionX+h.width/2),u.y1=Math.min(u.y1,h.positionY-h.height/2),u.y2=Math.max(u.y2,h.positionY+h.height/2)}u.w=u.x2-u.x1,u.h=u.y2-u.y1,s+=u.w*u.h}}r.sort(function(f,m){return m.w*m.h-f.w*f.h});for(var g=0,d=0,p=0,v=0,b=Math.sqrt(s)*e.clientWidth/e.clientHeight,i=0;i<r.length;i++){var u=r[i];if(u){for(var c=0;c<u.length;c++){var h=u[c];h.isLocked||(h.positionX+=g-u.x1,h.positionY+=d-u.y1)}g+=u.w+t.componentSpacing,p+=u.w+t.componentSpacing,v=Math.max(v,u.h),p>b&&(d+=v+t.componentSpacing,g=0,p=0,v=0)}}},Vf={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function pl(e){this.options=ve({},Vf,e)}pl.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var o=pt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(o.h===0||o.w===0)r.nodes().layoutPositions(this,t,function(Y){return{x:o.x1,y:o.y1}});else{var a=i.size(),l=Math.sqrt(a*o.h/o.w),s=Math.round(l),u=Math.round(o.w/o.h*l),c=function(Y){if(Y==null)return Math.min(s,u);var W=Math.min(s,u);W==s?s=Y:u=Y},h=function(Y){if(Y==null)return Math.max(s,u);var W=Math.max(s,u);W==s?s=Y:u=Y},g=t.rows,d=t.cols!=null?t.cols:t.columns;if(g!=null&&d!=null)s=g,u=d;else if(g!=null&&d==null)s=g,u=Math.ceil(a/s);else if(g==null&&d!=null)u=d,s=Math.ceil(a/u);else if(u*s>a){var p=c(),v=h();(p-1)*v>=a?c(p-1):(v-1)*p>=a&&h(v-1)}else for(;u*s<a;){var b=c(),f=h();(f+1)*b>=a?h(f+1):c(b+1)}var m=o.w/u,x=o.h/s;if(t.condense&&(m=0,x=0),t.avoidOverlap)for(var T=0;T<i.length;T++){var _=i[T],C=_._private.position;(C.x==null||C.y==null)&&(C.x=0,C.y=0);var y=_.layoutDimensions(t),w=t.avoidOverlapPadding,E=y.w+w,D=y.h+w;m=Math.max(m,E),x=Math.max(x,D)}for(var A={},k=function(Y,W){return!!A["c-"+Y+"-"+W]},M=function(Y,W){A["c-"+Y+"-"+W]=!0},L=0,O=0,R=function(){O++,O>=u&&(O=0,L++)},I={},S=0;S<i.length;S++){var P=i[S],z=t.position(P);if(z&&(z.row!==void 0||z.col!==void 0)){var F={row:z.row,col:z.col};if(F.col===void 0)for(F.col=0;k(F.row,F.col);)F.col++;else if(F.row===void 0)for(F.row=0;k(F.row,F.col);)F.row++;I[P.id()]=F,M(F.row,F.col)}}var G=function(Y,W){var Q,B;if(Y.locked()||Y.isParent())return!1;var U=I[Y.id()];if(U)Q=U.col*m+m/2+o.x1,B=U.row*x+x/2+o.y1;else{for(;k(L,O);)R();Q=O*m+m/2+o.x1,B=L*x+x/2+o.y1,M(L,O),R()}return{x:Q,y:B}};i.layoutPositions(this,t,G)}return this};var Xf={ready:function(){},stop:function(){}};function La(e){this.options=ve({},Xf,e)}La.prototype.run=function(){var e=this.options,t=e.eles,n=this;return e.cy,n.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.emit("layoutready"),n.one("layoutstop",e.stop),n.emit("layoutstop"),this};La.prototype.stop=function(){return this};var Uf={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function gl(e){this.options=ve({},Uf,e)}gl.prototype.run=function(){var e=this.options,t=e.eles,n=t.nodes(),r=Re(e.positions);function i(o){if(e.positions==null)return Hc(o.position());if(r)return e.positions(o);var a=e.positions[o._private.data.id];return a??null}return n.layoutPositions(this,e,function(o,a){var l=i(o);return o.locked()||l==null?!1:l}),this};var jf={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function fl(e){this.options=ve({},jf,e)}fl.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=pt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),i=function(o,a){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}};return n.nodes().layoutPositions(this,e,i),this};var qf=[{name:"breadthfirst",impl:ul},{name:"circle",impl:cl},{name:"concentric",impl:hl},{name:"cose",impl:Ai},{name:"grid",impl:pl},{name:"null",impl:La},{name:"preset",impl:gl},{name:"random",impl:fl}];function vl(e){this.options=e,this.notifications=0}var Ro=function(){},Bo=function(){throw new Error("A headless instance can not render images")};vl.prototype={recalculateRenderedStyle:Ro,notify:function(){this.notifications++},init:Ro,isHeadless:function(){return!0},png:Bo,jpg:Bo};var Na={};Na.arrowShapeWidth=.3;Na.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=function(s,u,c,h,g,d,p){var v=g.x-c/2-p,b=g.x+c/2+p,f=g.y-c/2-p,m=g.y+c/2+p,x=v<=s&&s<=b&&f<=u&&u<=m;return x},r=function(s,u,c,h,g){var d=s*Math.cos(h)-u*Math.sin(h),p=s*Math.sin(h)+u*Math.cos(h),v=d*c,b=p*c,f=v+g.x,m=b+g.y;return{x:f,y:m}},i=function(s,u,c,h){for(var g=[],d=0;d<s.length;d+=2){var p=s[d],v=s[d+1];g.push(r(p,v,u,c,h))}return g},o=function(s){for(var u=[],c=0;c<s.length;c++){var h=s[c];u.push(h.x,h.y)}return u},a=function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").pfValue*2},l=function(s,u){he(u)&&(u=e[u]),e[s]=ve({name:s,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(c,h,g,d,p,v){var b=o(i(this.points,g+2*v,d,p)),f=dt(c,h,b);return f},roughCollide:n,draw:function(c,h,g,d){var p=i(this.points,h,g,d);t.arrowShapeImpl("polygon")(c,p)},spacing:function(c){return 0},gap:a},u)};l("none",{collide:ri,roughCollide:ri,draw:fa,spacing:qa,gap:qa}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(s,u,c,h,g){var d=i(this.points,u,c,h),p=this.controlPoint,v=r(p[0],p[1],u,c,h);t.arrowShapeImpl(this.name)(s,d,v)},gap:function(s){return a(s)*.8}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(s,u,c,h,g,d,p){var v=o(i(this.points,c+2*p,h,g)),b=o(i(this.pointsTee,c+2*p,h,g)),f=dt(s,u,v)||dt(s,u,b);return f},draw:function(s,u,c,h,g){var d=i(this.points,u,c,h),p=i(this.pointsTee,u,c,h);t.arrowShapeImpl(this.name)(s,d,p)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(s,u,c,h,g,d,p){var v=g,b=Math.pow(v.x-s,2)+Math.pow(v.y-u,2)<=Math.pow((c+2*p)*this.radius,2),f=o(i(this.points,c+2*p,h,g));return dt(s,u,f)||b},draw:function(s,u,c,h,g){var d=i(this.pointsTr,u,c,h);t.arrowShapeImpl(this.name)(s,d,h.x,h.y,this.radius*u)},spacing:function(s){return t.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(s,u){var c=this.baseCrossLinePts.slice(),h=u/s,g=3,d=5;return c[g]=c[g]-h,c[d]=c[d]-h,c},collide:function(s,u,c,h,g,d,p){var v=o(i(this.points,c+2*p,h,g)),b=o(i(this.crossLinePts(c,d),c+2*p,h,g)),f=dt(s,u,v)||dt(s,u,b);return f},draw:function(s,u,c,h,g){var d=i(this.points,u,c,h),p=i(this.crossLinePts(u,g),u,c,h);t.arrowShapeImpl(this.name)(s,d,p)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(s){return a(s)*.525}}),l("circle",{radius:.15,collide:function(s,u,c,h,g,d,p){var v=g,b=Math.pow(v.x-s,2)+Math.pow(v.y-u,2)<=Math.pow((c+2*p)*this.radius,2);return b},draw:function(s,u,c,h,g){t.arrowShapeImpl(this.name)(s,h.x,h.y,this.radius*u)},spacing:function(s){return t.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(s){return 1},gap:function(s){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(s){return .95*s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}})};var wn={};wn.projectIntoViewport=function(e,t){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],l=n.pan(),s=n.zoom(),u=((e-i)/a-l.x)/s,c=((t-o)/a-l.y)/s;return[u,c]};wn.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=this.cy.window().getComputedStyle(e),r=function(b){return parseFloat(n.getPropertyValue(b))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},o={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},a=e.clientWidth,l=e.clientHeight,s=i.left+i.right,u=i.top+i.bottom,c=o.left+o.right,h=t.width/(a+c),g=a-s,d=l-u,p=t.left+i.left+o.left,v=t.top+i.top+o.top;return this.containerBB=[p,v,g,d,h]};wn.invalidateContainerClientCoordsCache=function(){this.containerBB=null};wn.findNearestElement=function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]};wn.findNearestElements=function(e,t,n,r){var i=this,o=this,a=o.getCachedZSortedEles(),l=[],s=o.cy.zoom(),u=o.cy.hasCompoundNodes(),c=(r?24:8)/s,h=(r?8:2)/s,g=(r?8:2)/s,d=1/0,p,v;n&&(a=a.interactive);function b(y,w){if(y.isNode()){if(v)return;v=y,l.push(y)}if(y.isEdge()&&(w==null||w<d))if(p){if(p.pstyle("z-compound-depth").value===y.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===y.pstyle("z-compound-depth").value){for(var E=0;E<l.length;E++)if(l[E].isEdge()){l[E]=y,p=y,d=w??d;break}}}else l.push(y),p=y,d=w??d}function f(y){var w=y.outerWidth()+2*h,E=y.outerHeight()+2*h,D=w/2,A=E/2,k=y.position(),M=y.pstyle("corner-radius").value==="auto"?"auto":y.pstyle("corner-radius").pfValue,L=y._private.rscratch;if(k.x-D<=e&&e<=k.x+D&&k.y-A<=t&&t<=k.y+A){var O=o.nodeShapes[i.getNodeShape(y)];if(O.checkPoint(e,t,0,w,E,k.x,k.y,M,L))return b(y,0),!0}}function m(y){var w=y._private,E=w.rscratch,D=y.pstyle("width").pfValue,A=y.pstyle("arrow-scale").value,k=D/2+c,M=k*k,L=k*2,O=w.source,R=w.target,I;if(E.edgeType==="segments"||E.edgeType==="straight"||E.edgeType==="haystack"){for(var S=E.allpts,P=0;P+3<S.length;P+=2)if(oh(e,t,S[P],S[P+1],S[P+2],S[P+3],L)&&M>(I=hh(e,t,S[P],S[P+1],S[P+2],S[P+3])))return b(y,I),!0}else if(E.edgeType==="bezier"||E.edgeType==="multibezier"||E.edgeType==="self"||E.edgeType==="compound"){for(var S=E.allpts,P=0;P+5<E.allpts.length;P+=4)if(sh(e,t,S[P],S[P+1],S[P+2],S[P+3],S[P+4],S[P+5],L)&&M>(I=ch(e,t,S[P],S[P+1],S[P+2],S[P+3],S[P+4],S[P+5])))return b(y,I),!0}for(var O=O||w.source,R=R||w.target,z=i.getArrowWidth(D,A),F=[{name:"source",x:E.arrowStartX,y:E.arrowStartY,angle:E.srcArrowAngle},{name:"target",x:E.arrowEndX,y:E.arrowEndY,angle:E.tgtArrowAngle},{name:"mid-source",x:E.midX,y:E.midY,angle:E.midsrcArrowAngle},{name:"mid-target",x:E.midX,y:E.midY,angle:E.midtgtArrowAngle}],P=0;P<F.length;P++){var G=F[P],Y=o.arrowShapes[y.pstyle(G.name+"-arrow-shape").value],W=y.pstyle("width").pfValue;if(Y.roughCollide(e,t,z,G.angle,{x:G.x,y:G.y},W,c)&&Y.collide(e,t,z,G.angle,{x:G.x,y:G.y},W,c))return b(y),!0}u&&l.length>0&&(f(O),f(R))}function x(y,w,E){return At(y,w,E)}function T(y,w){var E=y._private,D=g,A;w?A=w+"-":A="",y.boundingBox();var k=E.labelBounds[w||"main"],M=y.pstyle(A+"label").value,L=y.pstyle("text-events").strValue==="yes";if(!(!L||!M)){var O=x(E.rscratch,"labelX",w),R=x(E.rscratch,"labelY",w),I=x(E.rscratch,"labelAngle",w),S=y.pstyle(A+"text-margin-x").pfValue,P=y.pstyle(A+"text-margin-y").pfValue,z=k.x1-D-S,F=k.x2+D-S,G=k.y1-D-P,Y=k.y2+D-P;if(I){var W=Math.cos(I),Q=Math.sin(I),B=function(ge,de){return ge=ge-O,de=de-R,{x:ge*W-de*Q+O,y:ge*Q+de*W+R}},U=B(z,G),X=B(z,Y),$=B(F,G),Z=B(F,Y),re=[U.x+S,U.y+P,$.x+S,$.y+P,Z.x+S,Z.y+P,X.x+S,X.y+P];if(dt(e,t,re))return b(y),!0}else if(Bn(k,e,t))return b(y),!0}}for(var _=a.length-1;_>=0;_--){var C=a[_];C.isNode()?f(C)||T(C):m(C)||T(C)||T(C,"source")||T(C,"target")}return l};wn.getAllInBox=function(e,t,n,r){var i=this.getCachedZSortedEles().interactive,o=[],a=Math.min(e,n),l=Math.max(e,n),s=Math.min(t,r),u=Math.max(t,r);e=a,n=l,t=s,r=u;for(var c=pt({x1:e,y1:t,x2:n,y2:r}),h=0;h<i.length;h++){var g=i[h];if(g.isNode()){var d=g,p=d.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});ma(c,p)&&!Cs(p,c)&&o.push(d)}else{var v=g,b=v._private,f=b.rscratch;if(f.startX!=null&&f.startY!=null&&!Bn(c,f.startX,f.startY)||f.endX!=null&&f.endY!=null&&!Bn(c,f.endX,f.endY))continue;if(f.edgeType==="bezier"||f.edgeType==="multibezier"||f.edgeType==="self"||f.edgeType==="compound"||f.edgeType==="segments"||f.edgeType==="haystack"){for(var m=b.rstyle.bezierPts||b.rstyle.linePts||b.rstyle.haystackPts,x=!0,T=0;T<m.length;T++)if(!ah(c,m[T])){x=!1;break}x&&o.push(v)}else(f.edgeType==="haystack"||f.edgeType==="straight")&&o.push(v)}}return o};var ci={};ci.calculateArrowAngles=function(e){var t=e._private.rscratch,n=t.edgeType==="haystack",r=t.edgeType==="bezier",i=t.edgeType==="multibezier",o=t.edgeType==="segments",a=t.edgeType==="compound",l=t.edgeType==="self",s,u,c,h,g,d,f,m;if(n?(c=t.haystackPts[0],h=t.haystackPts[1],g=t.haystackPts[2],d=t.haystackPts[3]):(c=t.arrowStartX,h=t.arrowStartY,g=t.arrowEndX,d=t.arrowEndY),f=t.midX,m=t.midY,o)s=c-t.segpts[0],u=h-t.segpts[1];else if(i||a||l||r){var p=t.allpts,v=$e(p[0],p[2],p[4],.1),b=$e(p[1],p[3],p[5],.1);s=c-v,u=h-b}else s=c-f,u=h-m;t.srcArrowAngle=Or(s,u);var f=t.midX,m=t.midY;if(n&&(f=(c+g)/2,m=(h+d)/2),s=g-c,u=d-h,o){var p=t.allpts;if(p.length/2%2===0){var x=p.length/2,T=x-2;s=p[x]-p[T],u=p[x+1]-p[T+1]}else if(t.isRound)s=t.midVector[1],u=-t.midVector[0];else{var x=p.length/2-1,T=x-2;s=p[x]-p[T],u=p[x+1]-p[T+1]}}else if(i||a||l){var p=t.allpts,_=t.ctrlpts,C,y,w,E;if(_.length/2%2===0){var D=p.length/2-1,A=D+2,k=A+2;C=$e(p[D],p[A],p[k],0),y=$e(p[D+1],p[A+1],p[k+1],0),w=$e(p[D],p[A],p[k],1e-4),E=$e(p[D+1],p[A+1],p[k+1],1e-4)}else{var A=p.length/2-1,D=A-2,k=A+2;C=$e(p[D],p[A],p[k],.4999),y=$e(p[D+1],p[A+1],p[k+1],.4999),w=$e(p[D],p[A],p[k],.5),E=$e(p[D+1],p[A+1],p[k+1],.5)}s=w-C,u=E-y}if(t.midtgtArrowAngle=Or(s,u),t.midDispX=s,t.midDispY=u,s*=-1,u*=-1,o){var p=t.allpts;if(p.length/2%2!==0&&!t.isRound){var x=p.length/2-1,M=x+2;s=-(p[M]-p[x]),u=-(p[M+1]-p[x+1])}}if(t.midsrcArrowAngle=Or(s,u),o)s=g-t.segpts[t.segpts.length-2],u=d-t.segpts[t.segpts.length-1];else if(i||a||l||r){var p=t.allpts,L=p.length,v=$e(p[L-6],p[L-4],p[L-2],.9),b=$e(p[L-5],p[L-3],p[L-1],.9);s=g-v,u=d-b}else s=g-f,u=d-m;t.tgtArrowAngle=Or(s,u)};ci.getArrowWidth=ci.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(e*13.37,.9),29)*t,n[e+", "+t]=r,r)};var Ji,ea,Ot={},yt={},Fo,zo,hn,Zr,Gt,sn,cn,St,An,Vr,yl,ml,ta,na,Go,Yo=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},Hf=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},Wf=function(e,t,n,r,i){if(e!==Go?Yo(t,e,Ot):Hf(yt,Ot),Yo(t,n,yt),Fo=Ot.nx*yt.ny-Ot.ny*yt.nx,zo=Ot.nx*yt.nx-Ot.ny*-yt.ny,Gt=Math.asin(Math.max(-1,Math.min(1,Fo))),Math.abs(Gt)<1e-6){Ji=t.x,ea=t.y,cn=An=0;return}hn=1,Zr=!1,zo<0?Gt<0?Gt=Math.PI+Gt:(Gt=Math.PI-Gt,hn=-1,Zr=!0):Gt>0&&(hn=-1,Zr=!0),t.radius!==void 0?An=t.radius:An=r,sn=Gt/2,Vr=Math.min(Ot.len/2,yt.len/2),i?(St=Math.abs(Math.cos(sn)*An/Math.sin(sn)),St>Vr?(St=Vr,cn=Math.abs(St*Math.sin(sn)/Math.cos(sn))):cn=An):(St=Math.min(Vr,An),cn=Math.abs(St*Math.sin(sn)/Math.cos(sn))),ta=t.x+yt.nx*St,na=t.y+yt.ny*St,Ji=ta-yt.ny*cn*hn,ea=na+yt.nx*cn*hn,yl=t.x+Ot.nx*St,ml=t.y+Ot.ny*St,Go=t};function bl(e,t){t.radius===0?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function Ma(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return r===0||t.radius===0?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(Wf(e,t,n,r,i),{cx:Ji,cy:ea,radius:cn,startX:yl,startY:ml,stopX:ta,stopY:na,startAngle:Ot.ang+Math.PI/2*hn,endAngle:yt.ang-Math.PI/2*hn,counterClockwise:Zr})}var st={};st.findMidptPtsEtc=function(e,t){var n=t.posPts,r=t.intersectionPts,i=t.vectorNormInverse,o,a=e.pstyle("source-endpoint"),l=e.pstyle("target-endpoint"),s=a.units!=null&&l.units!=null,u=function(T,_,C,y){var w=y-_,E=C-T,D=Math.sqrt(E*E+w*w);return{x:-w/D,y:E/D}},c=e.pstyle("edge-distances").value;switch(c){case"node-position":o=n;break;case"intersection":o=r;break;case"endpoints":{if(s){var h=this.manualEndptToPx(e.source()[0],a),g=Ct(h,2),d=g[0],p=g[1],v=this.manualEndptToPx(e.target()[0],l),b=Ct(v,2),f=b[0],m=b[1],x={x1:d,y1:p,x2:f,y2:m};i=u(d,p,f,m),o=x}else ke("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=r;break}}return{midptPts:o,vectorNormInverse:i}};st.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,i=r.rscratch;if(!i.haystack){var o=Math.random()*2*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,l=r.target,s=a.position(),u=l.position(),c=a.width(),h=l.width(),g=a.height(),d=l.height(),p=n.pstyle("haystack-radius").value,v=p/2;i.haystackPts=i.allpts=[i.source.x*c*v+s.x,i.source.y*g*v+s.y,i.target.x*h*v+u.x,i.target.y*d*v+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};st.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),o=e.pstyle("segment-radii"),a=e.pstyle("radius-type"),l=Math.min(r.pfValue.length,i.pfValue.length),s=o.pfValue[o.pfValue.length-1],u=a.pfValue[a.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var c=0;c<l;c++){var h=r.pfValue[c],g=i.pfValue[c],d=1-h,p=h,v=this.findMidptPtsEtc(e,t),b=v.midptPts,f=v.vectorNormInverse,m={x:b.x1*d+b.x2*p,y:b.y1*d+b.y2*p};n.segpts.push(m.x+f.x*g,m.y+f.y*g),n.radii.push(o.pfValue[c]!==void 0?o.pfValue[c]:s),n.isArcRadius.push((a.pfValue[c]!==void 0?a.pfValue[c]:u)==="arc-radius")}};st.findLoopPoints=function(e,t,n,r){var i=e._private.rscratch,o=t.dirCounts,a=t.srcPos,l=e.pstyle("control-point-distances"),s=l?l.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var g=n,d=h;r&&(g=0,d=s);var p=u-Math.PI/2,v=p-c/2,b=p+c/2,f=u+"_"+c;g=o[f]===void 0?o[f]=0:++o[f],i.ctrlpts=[a.x+Math.cos(v)*1.4*d*(g/3+1),a.y+Math.sin(v)*1.4*d*(g/3+1),a.x+Math.cos(b)*1.4*d*(g/3+1),a.y+Math.sin(b)*1.4*d*(g/3+1)]};st.findCompoundLoopPoints=function(e,t,n,r){var i=e._private.rscratch;i.edgeType="compound";var o=t.srcPos,a=t.tgtPos,l=t.srcW,s=t.srcH,u=t.tgtW,c=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,g=e.pstyle("control-point-distances"),d=g?g.pfValue[0]:void 0,p=n,v=h;r&&(p=0,v=d);var b=50,f={x:o.x-l/2,y:o.y-s/2},m={x:a.x-u/2,y:a.y-c/2},x={x:Math.min(f.x,m.x),y:Math.min(f.y,m.y)},T=.5,_=Math.max(T,Math.log(l*.01)),C=Math.max(T,Math.log(u*.01));i.ctrlpts=[x.x,x.y-(1+Math.pow(b,1.12)/100)*v*(p/3+1)*_,x.x-(1+Math.pow(b,1.12)/100)*v*(p/3+1)*C,x.y]};st.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"};st.findBezierPoints=function(e,t,n,r,i){var o=e._private.rscratch,a=e.pstyle("control-point-step-size").pfValue,l=e.pstyle("control-point-distances"),s=e.pstyle("control-point-weights"),u=l&&s?Math.min(l.value.length,s.value.length):1,c=l?l.pfValue[0]:void 0,h=s.value[0],g=r;o.edgeType=g?"multibezier":"bezier",o.ctrlpts=[];for(var d=0;d<u;d++){var p=(.5-t.eles.length/2+n)*a*(i?-1:1),v=void 0,b=_s(p);g&&(c=l?l.pfValue[d]:a,h=s.value[d]),r?v=c:v=c!==void 0?b*c:void 0;var f=v!==void 0?v:p,m=1-h,x=h,T=this.findMidptPtsEtc(e,t),_=T.midptPts,C=T.vectorNormInverse,y={x:_.x1*m+_.x2*x,y:_.y1*m+_.y2*x};o.ctrlpts.push(y.x+C.x*f,y.y+C.y*f)}};st.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",o="leftward",a="rightward",l="downward",s="upward",u="auto",c=t.posPts,h=t.srcW,g=t.srcH,d=t.tgtW,p=t.tgtH,v=e.pstyle("edge-distances").value,b=v!=="node-position",f=e.pstyle("taxi-direction").value,m=f,x=e.pstyle("taxi-turn"),T=x.units==="%",_=x.pfValue,C=_<0,y=e.pstyle("taxi-turn-min-distance").pfValue,w=b?(h+d)/2:0,E=b?(g+p)/2:0,D=c.x2-c.x1,A=c.y2-c.y1,k=function(pe,fe){return pe>0?Math.max(pe-fe,0):Math.min(pe+fe,0)},M=k(D,w),L=k(A,E),O=!1;m===u?f=Math.abs(M)>Math.abs(L)?i:r:m===s||m===l?(f=r,O=!0):(m===o||m===a)&&(f=i,O=!0);var R=f===r,I=R?L:M,S=R?A:D,P=_s(S),z=!1;!(O&&(T||C))&&(m===l&&S<0||m===s&&S>0||m===o&&S>0||m===a&&S<0)&&(P*=-1,I=P*Math.abs(I),z=!0);var F;if(T){var G=_<0?1+_:_;F=G*I}else{var Y=_<0?I:0;F=Y+_*P}var W=function(pe){return Math.abs(pe)<y||Math.abs(pe)>=Math.abs(I)},Q=W(F),B=W(Math.abs(I)-Math.abs(F)),U=Q||B;if(U&&!z)if(R){var X=Math.abs(S)<=g/2,$=Math.abs(D)<=d/2;if(X){var Z=(c.x1+c.x2)/2,re=c.y1,ge=c.y2;n.segpts=[Z,re,Z,ge]}else if($){var de=(c.y1+c.y2)/2,J=c.x1,oe=c.x2;n.segpts=[J,de,oe,de]}else n.segpts=[c.x1,c.y2]}else{var ie=Math.abs(S)<=h/2,ce=Math.abs(A)<=p/2;if(ie){var ye=(c.y1+c.y2)/2,be=c.x1,xe=c.x2;n.segpts=[be,ye,xe,ye]}else if(ce){var Le=(c.x1+c.x2)/2,we=c.y1,Te=c.y2;n.segpts=[Le,we,Le,Te]}else n.segpts=[c.x2,c.y1]}else if(R){var N=c.y1+F+(b?g/2*P:0),V=c.x1,K=c.x2;n.segpts=[V,N,K,N]}else{var H=c.x1+F+(b?h/2*P:0),j=c.y1,te=c.y2;n.segpts=[H,j,H,te]}if(n.isRound){var q=e.pstyle("taxi-radius").value,ee=e.pstyle("radius-type").value[0]==="arc-radius";n.radii=new Array(n.segpts.length/2).fill(q),n.isArcRadius=new Array(n.segpts.length/2).fill(ee)}};st.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if(n.edgeType==="bezier"){var r=t.srcPos,i=t.tgtPos,o=t.srcW,a=t.srcH,l=t.tgtW,s=t.tgtH,u=t.srcShape,c=t.tgtShape,h=t.srcCornerRadius,g=t.tgtCornerRadius,d=t.srcRs,p=t.tgtRs,v=!ne(n.startX)||!ne(n.startY),b=!ne(n.arrowStartX)||!ne(n.arrowStartY),f=!ne(n.endX)||!ne(n.endY),m=!ne(n.arrowEndX)||!ne(n.arrowEndY),x=3,T=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth,_=x*T,C=fn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),y=C<_,w=fn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),E=w<_,D=!1;if(v||b||y){D=!0;var A={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},k=Math.sqrt(A.x*A.x+A.y*A.y),M={x:A.x/k,y:A.y/k},L=Math.max(o,a),O={x:n.ctrlpts[0]+M.x*2*L,y:n.ctrlpts[1]+M.y*2*L},R=u.intersectLine(r.x,r.y,o,a,O.x,O.y,0,h,d);y?(n.ctrlpts[0]=n.ctrlpts[0]+M.x*(_-C),n.ctrlpts[1]=n.ctrlpts[1]+M.y*(_-C)):(n.ctrlpts[0]=R[0]+M.x*_,n.ctrlpts[1]=R[1]+M.y*_)}if(f||m||E){D=!0;var I={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},S=Math.sqrt(I.x*I.x+I.y*I.y),P={x:I.x/S,y:I.y/S},z=Math.max(o,a),F={x:n.ctrlpts[0]+P.x*2*z,y:n.ctrlpts[1]+P.y*2*z},G=c.intersectLine(i.x,i.y,l,s,F.x,F.y,0,g,p);E?(n.ctrlpts[0]=n.ctrlpts[0]+P.x*(_-w),n.ctrlpts[1]=n.ctrlpts[1]+P.y*(_-w)):(n.ctrlpts[0]=G[0]+P.x*_,n.ctrlpts[1]=G[1]+P.y*_)}D&&this.findEndpoints(e)}};st.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);t.allpts.push(t.endX,t.endY);var r,i;t.ctrlpts.length/2%2===0?(r=t.allpts.length/2-1,t.midX=t.allpts[r],t.midY=t.allpts[r+1]):(r=t.allpts.length/2-3,i=.5,t.midX=$e(t.allpts[r],t.allpts[r+2],t.allpts[r+4],i),t.midY=$e(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],i))}else if(t.edgeType==="straight")t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if(t.edgeType==="segments"){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var o=2;o+3<t.allpts.length;o+=2){var a=t.radii[o/2-1],l=t.isArcRadius[o/2-1];t.roundCorners.push(Ma({x:t.allpts[o-2],y:t.allpts[o-1]},{x:t.allpts[o],y:t.allpts[o+1],radius:a},{x:t.allpts[o+2],y:t.allpts[o+3]},a,l))}}if(t.segpts.length%4===0){var s=t.segpts.length/2,u=s-2;t.midX=(t.segpts[u]+t.segpts[s])/2,t.midY=(t.segpts[u+1]+t.segpts[s+1])/2}else{var c=t.segpts.length/2-1;if(!t.isRound)t.midX=t.segpts[c],t.midY=t.segpts[c+1];else{var h={x:t.segpts[c],y:t.segpts[c+1]},g=t.roundCorners[c/2],d=[h.x-g.cx,h.y-g.cy],p=g.radius/Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2));d=d.map(function(v){return v*p}),t.midX=g.cx+d[0],t.midY=g.cy+d[1],t.midVector=d}}}};st.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||ne(t.startX)&&ne(t.startY)&&ne(t.endX)&&ne(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,ke("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};st.findEdgeControlPoints=function(e){var t=this;if(!(!e||e.length===0)){for(var n=this,r=n.cy,i=r.hasCompoundNodes(),o={map:new Pt,get:function(C){var y=this.map.get(C[0]);return y!=null?y.get(C[1]):null},set:function(C,y){var w=this.map.get(C[0]);w==null&&(w=new Pt,this.map.set(C[0],w)),w.set(C[1],y)}},a=[],l=[],s=0;s<e.length;s++){var u=e[s],c=u._private,h=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(h==="haystack"){l.push(u);continue}var g=h==="unbundled-bezier"||h.endsWith("segments")||h==="straight"||h==="straight-triangle"||h.endsWith("taxi"),d=h==="unbundled-bezier"||h==="bezier",p=c.source,v=c.target,b=p.poolIndex(),f=v.poolIndex(),m=[b,f].sort(),x=o.get(m);x==null&&(x={eles:[]},o.set(m,x),a.push(m)),x.eles.push(u),g&&(x.hasUnbundled=!0),d&&(x.hasBezier=!0)}}for(var T=function(C){var y=a[C],w=o.get(y),E=void 0;if(!w.hasUnbundled){var D=w.eles[0].parallelEdges().filter(function(K){return K.isBundledBezier()});va(w.eles),D.forEach(function(K){return w.eles.push(K)}),w.eles.sort(function(K,H){return K.poolIndex()-H.poolIndex()})}var A=w.eles[0],k=A.source(),M=A.target();if(k.poolIndex()>M.poolIndex()){var L=k;k=M,M=L}var O=w.srcPos=k.position(),R=w.tgtPos=M.position(),I=w.srcW=k.outerWidth(),S=w.srcH=k.outerHeight(),P=w.tgtW=M.outerWidth(),z=w.tgtH=M.outerHeight(),F=w.srcShape=n.nodeShapes[t.getNodeShape(k)],G=w.tgtShape=n.nodeShapes[t.getNodeShape(M)],Y=w.srcCornerRadius=k.pstyle("corner-radius").value==="auto"?"auto":k.pstyle("corner-radius").pfValue,W=w.tgtCornerRadius=M.pstyle("corner-radius").value==="auto"?"auto":M.pstyle("corner-radius").pfValue,Q=w.tgtRs=M._private.rscratch,B=w.srcRs=k._private.rscratch;w.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var U=0;U<w.eles.length;U++){var X=w.eles[U],$=X[0]._private.rscratch,Z=X.pstyle("curve-style").value,re=Z==="unbundled-bezier"||Z.endsWith("segments")||Z.endsWith("taxi"),ge=!k.same(X.source());if(!w.calculatedIntersection&&k!==M&&(w.hasBezier||w.hasUnbundled)){w.calculatedIntersection=!0;var de=F.intersectLine(O.x,O.y,I,S,R.x,R.y,0,Y,B),J=w.srcIntn=de,oe=G.intersectLine(R.x,R.y,P,z,O.x,O.y,0,W,Q),ie=w.tgtIntn=oe,ce=w.intersectionPts={x1:de[0],x2:oe[0],y1:de[1],y2:oe[1]},ye=w.posPts={x1:O.x,x2:R.x,y1:O.y,y2:R.y},be=oe[1]-de[1],xe=oe[0]-de[0],Le=Math.sqrt(xe*xe+be*be),we=w.vector={x:xe,y:be},Te=w.vectorNorm={x:we.x/Le,y:we.y/Le},N={x:-Te.y,y:Te.x};w.nodesOverlap=!ne(Le)||G.checkPoint(de[0],de[1],0,P,z,R.x,R.y,W,Q)||F.checkPoint(oe[0],oe[1],0,I,S,O.x,O.y,Y,B),w.vectorNormInverse=N,E={nodesOverlap:w.nodesOverlap,dirCounts:w.dirCounts,calculatedIntersection:!0,hasBezier:w.hasBezier,hasUnbundled:w.hasUnbundled,eles:w.eles,srcPos:R,tgtPos:O,srcW:P,srcH:z,tgtW:I,tgtH:S,srcIntn:ie,tgtIntn:J,srcShape:G,tgtShape:F,posPts:{x1:ye.x2,y1:ye.y2,x2:ye.x1,y2:ye.y1},intersectionPts:{x1:ce.x2,y1:ce.y2,x2:ce.x1,y2:ce.y1},vector:{x:-we.x,y:-we.y},vectorNorm:{x:-Te.x,y:-Te.y},vectorNormInverse:{x:-N.x,y:-N.y}}}var V=ge?E:w;$.nodesOverlap=V.nodesOverlap,$.srcIntn=V.srcIntn,$.tgtIntn=V.tgtIntn,$.isRound=Z.startsWith("round"),i&&(k.isParent()||k.isChild()||M.isParent()||M.isChild())&&(k.parents().anySame(M)||M.parents().anySame(k)||k.same(M)&&k.isParent())?t.findCompoundLoopPoints(X,V,U,re):k===M?t.findLoopPoints(X,V,U,re):Z.endsWith("segments")?t.findSegmentsPoints(X,V):Z.endsWith("taxi")?t.findTaxiPoints(X,V):Z==="straight"||!re&&w.eles.length%2===1&&U===Math.floor(w.eles.length/2)?t.findStraightEdgePoints(X):t.findBezierPoints(X,V,U,re,ge),t.findEndpoints(X),t.tryToCorrectInvalidPoints(X,V),t.checkForInvalidEdgeWarning(X),t.storeAllpts(X),t.storeEdgeProjections(X),t.calculateArrowAngles(X),t.recalculateEdgeLabelProjections(X),t.calculateLabelAngles(X)}},_=0;_<a.length;_++)T(_);this.findHaystackPoints(l)}};function xl(e){var t=[];if(e!=null){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t.push({x:r,y:i})}return t}}st.getSegmentPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if(n==="segments")return this.recalculateRenderedStyle(e),xl(t.segpts)};st.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return this.recalculateRenderedStyle(e),xl(t.ctrlpts)};st.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var Ar={};Ar.manualEndptToPx=function(e,t){var n=this,r=e.position(),i=e.outerWidth(),o=e.outerHeight(),a=e._private.rscratch;if(t.value.length===2){var l=[t.pfValue[0],t.pfValue[1]];return t.units[0]==="%"&&(l[0]=l[0]*i),t.units[1]==="%"&&(l[1]=l[1]*o),l[0]+=r.x,l[1]+=r.y,l}else{var s=t.pfValue[0];s=-Math.PI/2+s;var u=2*Math.max(i,o),c=[r.x+Math.cos(s)*u,r.y+Math.sin(s)*u];return n.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,i,o,c[0],c[1],0,e.pstyle("corner-radius").value==="auto"?"auto":e.pstyle("corner-radius").pfValue,a)}};Ar.findEndpoints=function(e){var t=this,n,r=e.source()[0],i=e.target()[0],o=r.position(),a=i.position(),l=e.pstyle("target-arrow-shape").value,s=e.pstyle("source-arrow-shape").value,u=e.pstyle("target-distance-from-node").pfValue,c=e.pstyle("source-distance-from-node").pfValue,h=r._private.rscratch,g=i._private.rscratch,d=e.pstyle("curve-style").value,p=e._private.rscratch,v=p.edgeType,b=d==="taxi",f=v==="self"||v==="compound",m=v==="bezier"||v==="multibezier"||f,x=v!=="bezier",T=v==="straight"||v==="segments",_=v==="segments",C=m||x||T,y=f||b,w=e.pstyle("source-endpoint"),E=y?"outside-to-node":w.value,D=r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,A=e.pstyle("target-endpoint"),k=y?"outside-to-node":A.value,M=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;p.srcManEndpt=w,p.tgtManEndpt=A;var L,O,R,I;if(m){var S=[p.ctrlpts[0],p.ctrlpts[1]],P=x?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:S;L=P,O=S}else if(T){var z=_?p.segpts.slice(0,2):[a.x,a.y],F=_?p.segpts.slice(p.segpts.length-2):[o.x,o.y];L=F,O=z}if(k==="inside-to-node")n=[a.x,a.y];else if(A.units)n=this.manualEndptToPx(i,A);else if(k==="outside-to-line")n=p.tgtIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?R=L:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(R=[o.x,o.y]),n=t.nodeShapes[this.getNodeShape(i)].intersectLine(a.x,a.y,i.outerWidth(),i.outerHeight(),R[0],R[1],0,M,g),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var G=i._private.rscratch,Y=G.labelWidth,W=G.labelHeight,Q=G.labelX,B=G.labelY,U=Y/2,X=W/2,$=i.pstyle("text-valign").value;$==="top"?B-=X:$==="bottom"&&(B+=X);var Z=i.pstyle("text-halign").value;Z==="left"?Q-=U:Z==="right"&&(Q+=U);var re=fr(R[0],R[1],[Q-U,B-X,Q+U,B-X,Q+U,B+X,Q-U,B+X],a.x,a.y);if(re.length>0){var ge=o,de=ln(ge,Nn(n)),J=ln(ge,Nn(re)),oe=de;if(J<de&&(n=re,oe=J),re.length>2){var ie=ln(ge,{x:re[2],y:re[3]});ie<oe&&(n=[re[2],re[3]])}}}var ce=Ir(n,L,t.arrowShapes[l].spacing(e)+u),ye=Ir(n,L,t.arrowShapes[l].gap(e)+u);if(p.endX=ye[0],p.endY=ye[1],p.arrowEndX=ce[0],p.arrowEndY=ce[1],E==="inside-to-node")n=[o.x,o.y];else if(w.units)n=this.manualEndptToPx(r,w);else if(E==="outside-to-line")n=p.srcIntn;else if(E==="outside-to-node"||E==="outside-to-node-or-label"?I=O:(E==="outside-to-line"||E==="outside-to-line-or-label")&&(I=[a.x,a.y]),n=t.nodeShapes[this.getNodeShape(r)].intersectLine(o.x,o.y,r.outerWidth(),r.outerHeight(),I[0],I[1],0,D,h),E==="outside-to-node-or-label"||E==="outside-to-line-or-label"){var be=r._private.rscratch,xe=be.labelWidth,Le=be.labelHeight,we=be.labelX,Te=be.labelY,N=xe/2,V=Le/2,K=r.pstyle("text-valign").value;K==="top"?Te-=V:K==="bottom"&&(Te+=V);var H=r.pstyle("text-halign").value;H==="left"?we-=N:H==="right"&&(we+=N);var j=fr(I[0],I[1],[we-N,Te-V,we+N,Te-V,we+N,Te+V,we-N,Te+V],o.x,o.y);if(j.length>0){var te=a,q=ln(te,Nn(n)),ee=ln(te,Nn(j)),pe=q;if(ee<q&&(n=[j[0],j[1]],pe=ee),j.length>2){var fe=ln(te,{x:j[2],y:j[3]});fe<pe&&(n=[j[2],j[3]])}}}var le=Ir(n,O,t.arrowShapes[s].spacing(e)+c),me=Ir(n,O,t.arrowShapes[s].gap(e)+c);p.startX=me[0],p.startY=me[1],p.arrowStartX=le[0],p.arrowStartY=le[1],C&&(!ne(p.startX)||!ne(p.startY)||!ne(p.endX)||!ne(p.endY)?p.badLine=!0:p.badLine=!1)};Ar.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}};Ar.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var Sa={};function $f(e,t,n){for(var r=function(s,u,c,h){return $e(s,u,c,h)},i=t._private,o=i.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var l=e.bezierProjPcts[a];o.push({x:r(n[0],n[2],n[4],l),y:r(n[1],n[3],n[5],l)})}}Sa.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,r==="multibezier"||r==="bezier"||r==="self"||r==="compound"){t.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)$f(this,e,n.allpts.slice(i,i+6))}else if(r==="segments")for(var o=t.rstyle.linePts=[],i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]});else if(r==="haystack"){var a=n.haystackPts;t.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth};Sa.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Bt={};Bt.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!Qt(t)){var n,r,i=e._private,o=e.width(),a=e.height(),l=e.padding(),s=e.position(),u=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,h=i.rscratch,g=i.rstyle;switch(u){case"left":n=s.x-o/2-l;break;case"right":n=s.x+o/2+l;break;default:n=s.x}switch(c){case"top":r=s.y-a/2-l;break;case"bottom":r=s.y+a/2+l;break;default:r=s.y}h.labelX=n,h.labelY=r,g.labelX=n,g.labelY=r,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var wl=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},El=function(e,t){var n=t.x-e.x,r=t.y-e.y;return wl(n,r)},Kf=function(e,t,n,r){var i=gr(0,r-.001,1),o=gr(0,r+.001,1),a=Sn(e,t,n,i),l=Sn(e,t,n,o);return El(a,l)};Bt.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,i=this,o={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(o.mid||o.source||o.target){t={x:r.midX,y:r.midY};var a=function(c,h,g){Wt(n.rscratch,c,h,g),Wt(n.rstyle,c,h,g)};a("labelX",null,t.x),a("labelY",null,t.y);var l=wl(r.midDispX,r.midDispY);a("labelAutoAngle",null,l);var s=function c(){if(c.cache)return c.cache;for(var h=[],g=0;g+5<r.allpts.length;g+=4){var d={x:r.allpts[g],y:r.allpts[g+1]},p={x:r.allpts[g+2],y:r.allpts[g+3]},v={x:r.allpts[g+4],y:r.allpts[g+5]};h.push({p0:d,p1:p,p2:v,startDist:0,length:0,segments:[]})}var b=n.rstyle.bezierPts,f=i.bezierProjPcts.length;function m(y,w,E,D,A){var k=fn(w,E),M=y.segments[y.segments.length-1],L={p0:w,p1:E,t0:D,t1:A,startDist:M?M.startDist+M.length:0,length:k};y.segments.push(L),y.length+=k}for(var x=0;x<h.length;x++){var T=h[x],_=h[x-1];_&&(T.startDist=_.startDist+_.length),m(T,T.p0,b[x*f],0,i.bezierProjPcts[0]);for(var C=0;C<f-1;C++)m(T,b[x*f+C],b[x*f+C+1],i.bezierProjPcts[C],i.bezierProjPcts[C+1]);m(T,b[x*f+f-1],T.p2,i.bezierProjPcts[f-1],1)}return c.cache=h},u=function(c){var h,g=c==="source";if(o[c]){var d=e.pstyle(c+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=s(),v,b=0,f=0,m=0;m<p.length;m++){for(var x=p[g?m:p.length-1-m],T=0;T<x.segments.length;T++){var _=x.segments[g?T:x.segments.length-1-T],C=m===p.length-1&&T===x.segments.length-1;if(b=f,f+=_.length,f>=d||C){v={cp:x,segment:_};break}}if(v)break}var y=v.cp,w=v.segment,E=(d-b)/w.length,D=w.t1-w.t0,A=g?w.t0+D*E:w.t1-D*E;A=gr(0,A,1),t=Sn(y.p0,y.p1,y.p2,A),h=Kf(y.p0,y.p1,y.p2,A);break}case"straight":case"segments":case"haystack":{for(var k=0,M,L,O,R,I=r.allpts.length,S=0;S+3<I&&(g?(O={x:r.allpts[S],y:r.allpts[S+1]},R={x:r.allpts[S+2],y:r.allpts[S+3]}):(O={x:r.allpts[I-2-S],y:r.allpts[I-1-S]},R={x:r.allpts[I-4-S],y:r.allpts[I-3-S]}),M=fn(O,R),L=k,k+=M,!(k>=d));S+=2);var P=d-L,z=P/M;z=gr(0,z,1),t=eh(O,R,z),h=El(O,R);break}}a("labelX",c,t.x),a("labelY",c,t.y),a("labelAutoAngle",c,h)}};u("source"),u("target"),this.applyLabelDimensions(e)}};Bt.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))};Bt.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,r),o=e.pstyle("line-height").pfValue,a=e.pstyle("text-wrap").strValue,l=At(n.rscratch,"labelWrapCachedLines",t)||[],s=a!=="wrap"?1:Math.max(l.length,1),u=i.height/s,c=u*o,h=i.width,g=i.height+(s-1)*(o-1)*u;Wt(n.rstyle,"labelWidth",t,h),Wt(n.rscratch,"labelWidth",t,h),Wt(n.rstyle,"labelHeight",t,g),Wt(n.rscratch,"labelHeight",t,g),Wt(n.rscratch,"labelLineHeight",t,c)};Bt.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",i=e.pstyle(r+"label").strValue,o=e.pstyle("text-transform").value,a=function(P,z){return z?(Wt(n.rscratch,P,t,z),z):At(n.rscratch,P,t)};if(!i)return"";o=="none"||(o=="uppercase"?i=i.toUpperCase():o=="lowercase"&&(i=i.toLowerCase()));var l=e.pstyle("text-wrap").value;if(l==="wrap"){var s=a("labelKey");if(s!=null&&a("labelWrapKey")===s)return a("labelWrapCachedText");for(var u="​",c=i.split(`
`),h=e.pstyle("text-max-width").pfValue,g=e.pstyle("text-overflow-wrap").value,d=g==="anywhere",p=[],v=/[\s\u200b]+/,b=d?"":" ",f=0;f<c.length;f++){var m=c[f],x=this.calculateLabelDimensions(e,m),T=x.width;if(d){var _=m.split("").join(u);m=_}if(T>h){for(var C=m.split(v),y="",w=0;w<C.length;w++){var E=C[w],D=y.length===0?E:y+b+E,A=this.calculateLabelDimensions(e,D),k=A.width;k<=h?y+=E+b:(y&&p.push(y),y=E+b)}y.match(/^[\s\u200b]+$/)||p.push(y)}else p.push(m)}a("labelWrapCachedLines",p),i=a("labelWrapCachedText",p.join(`
`)),a("labelWrapKey",s)}else if(l==="ellipsis"){var M=e.pstyle("text-max-width").pfValue,L="",O="…",R=!1;if(this.calculateLabelDimensions(e,i).width<M)return i;for(var I=0;I<i.length;I++){var S=this.calculateLabelDimensions(e,L+i[I]+O).width;if(S>M)break;L+=i[I],I===i.length-1&&(R=!0)}return R||(L+=O),L}return i};Bt.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t};Bt.calculateLabelDimensions=function(e,t){var n=this,r=gn(t,e._private.labelDimsKey),i=n.labelDimCache||(n.labelDimCache=[]),o=i[r];if(o!=null)return o;var a=0,l=e.pstyle("font-style").strValue,s=e.pstyle("font-size").pfValue,u=e.pstyle("font-family").strValue,c=e.pstyle("font-weight").strValue,h=this.labelCalcCanvas,g=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=document.createElement("canvas"),g=this.labelCalcCanvasContext=h.getContext("2d");var d=h.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}g.font="".concat(l," ").concat(c," ").concat(s,"px ").concat(u);for(var p=0,v=0,b=t.split(`
`),f=0;f<b.length;f++){var m=b[f],x=g.measureText(m),T=Math.ceil(x.width),_=s;p=Math.max(T,p),v+=_}return p+=a,v+=a,i[r]={width:p,height:v}};Bt.calculateLabelAngle=function(e,t){var n=e._private,r=n.rscratch,i=e.isEdge(),o=t?t+"-":"",a=e.pstyle(o+"text-rotation"),l=a.strValue;return l==="none"?0:i&&l==="autorotate"?r.labelAutoAngle:l==="autorotate"?0:a.pfValue};Bt.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),r=e._private,i=r.rscratch;i.labelAngle=t.calculateLabelAngle(e),n&&(i.sourceLabelAngle=t.calculateLabelAngle(e,"source"),i.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var _l={},Vo=28,Xo=!1;_l.getNodeShape=function(e){var t=this,n=e.pstyle("shape").value;if(n==="cutrectangle"&&(e.width()<Vo||e.height()<Vo))return Xo||(ke("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Xo=!0),"rectangle";if(e.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var r=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(r).name}return n};var ki={};ki.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),n=this,r=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.merge(o),a)for(var l=0;l<o.length;l++){var s=o[l],u=s._private,c=u.rstyle;c.clean=!1,c.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",function(o){var a=o.target;r(a)}).on("style.* background.*",function(o){var a=o.target;r(a,!1)});var i=function(o){if(o){var a=n.onUpdateEleCalcsFns;t.cleanStyle();for(var l=0;l<t.length;l++){var s=t[l],u=s._private.rstyle;s.isNode()&&!u.cleanConnected&&(r(s.connectedEdges()),u.cleanConnected=!0)}if(a)for(var c=0;c<a.length;c++){var h=a[c];h(o,t)}n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)};ki.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)};ki.recalculateRenderedStyle=function(e,t){var n=function(x){return x._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){t===void 0&&(t=!0);for(var o=0;o<e.length;o++){var a=e[o],l=a._private,s=l.rstyle;a.isEdge()&&(!n(a.source())||!n(a.target()))&&(s.clean=!1),!(t&&s.clean||a.removed())&&a.pstyle("display").value!=="none"&&(l.group==="nodes"?i.push(a):r.push(a),s.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],h=c._private,g=h.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),g.nodeX=d.x,g.nodeY=d.y,g.nodeW=c.pstyle("width").pfValue,g.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var p=0;p<r.length;p++){var v=r[p],b=v._private,f=b.rstyle,m=b.rscratch;f.srcX=m.arrowStartX,f.srcY=m.arrowStartY,f.tgtX=m.arrowEndX,f.tgtY=m.arrowEndY,f.midX=m.midX,f.midY=m.midY,f.labelAngle=m.labelAngle,f.sourceLabelAngle=m.sourceLabelAngle,f.targetLabelAngle=m.targetLabelAngle}}};var Li={};Li.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?t.push(r):i.inDragLayer?e.drag.push(r):e.nondrag.push(r)}for(var n=0;n<t.length;n++){var r=t[n];e.drag.push(r)}}};Li.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Li.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(ol),t.interactive=t.filter(function(n){return n.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var Tl={};[wn,ci,st,Ar,Sa,Bt,_l,ki,Li].forEach(function(e){ve(Tl,e)});var Cl={};Cl.getCachedImage=function(e,t,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[e];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=i[e]=i[e]||{};var a=o.image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});var l="data:",s=e.substring(0,l.length).toLowerCase()===l;return s||(t=t==="null"?null:t,a.crossOrigin=t),a.src=e,a};var Hn={};Hn.registerBinding=function(e,t,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(e);return o.on.apply(o,i)};Hn.binder=function(e){var t=this,n=t.cy.window(),r=e===n||e===n.document||e===n.document.body||xu(e);if(t.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});n.addEventListener("test",null,o)}catch{}t.supportsPassiveEvents=i}var a=function(l,s,u){var c=Array.prototype.slice.call(arguments);return r&&t.supportsPassiveEvents&&(c[2]={capture:u??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:c}),(e.addEventListener||e.on).apply(e,c),this};return{on:a,addEventListener:a,addListener:a,bind:a}};Hn.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()};Hn.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()};Hn.load=function(){var e=this,t=e.cy.window(),n=function(N){return N.selected()},r=function(N,V,K,H){N==null&&(N=e.cy);for(var j=0;j<V.length;j++){var te=V[j];N.emit({originalEvent:K,type:te,position:H})}},i=function(N){return N.shiftKey||N.metaKey||N.ctrlKey},o=function(N,V){var K=!0;if(e.cy.hasCompoundNodes()&&N&&N.pannable())for(var H=0;V&&H<V.length;H++){var N=V[H];if(N.isNode()&&N.isParent()&&!N.pannable()){K=!1;break}}else K=!0;return K},a=function(N){N[0]._private.grabbed=!0},l=function(N){N[0]._private.grabbed=!1},s=function(N){N[0]._private.rscratch.inDragLayer=!0},u=function(N){N[0]._private.rscratch.inDragLayer=!1},c=function(N){N[0]._private.rscratch.isGrabTarget=!0},h=function(N){N[0]._private.rscratch.isGrabTarget=!1},g=function(N,V){var K=V.addToList,H=K.has(N);!H&&N.grabbable()&&!N.locked()&&(K.merge(N),a(N))},d=function(N,V){if(N.cy().hasCompoundNodes()&&!(V.inDragLayer==null&&V.addToList==null)){var K=N.descendants();V.inDragLayer&&(K.forEach(s),K.connectedEdges().forEach(s)),V.addToList&&g(K,V)}},p=function(N,V){V=V||{};var K=N.cy().hasCompoundNodes();V.inDragLayer&&(N.forEach(s),N.neighborhood().stdFilter(function(H){return!K||H.isEdge()}).forEach(s)),V.addToList&&N.forEach(function(H){g(H,V)}),d(N,V),f(N,{inDragLayer:V.inDragLayer}),e.updateCachedGrabbedEles()},v=p,b=function(N){N&&(e.getCachedZSortedEles().forEach(function(V){l(V),u(V),h(V)}),e.updateCachedGrabbedEles())},f=function(N,V){if(!(V.inDragLayer==null&&V.addToList==null)&&N.cy().hasCompoundNodes()){var K=N.ancestors().orphans();if(!K.same(N)){var H=K.descendants().spawnSelf().merge(K).unmerge(N).unmerge(N.descendants()),j=H.connectedEdges();V.inDragLayer&&(j.forEach(s),H.forEach(s)),V.addToList&&H.forEach(function(te){g(te,V)})}}},m=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},x=typeof MutationObserver<"u",T=typeof ResizeObserver<"u";x?(e.removeObserver=new MutationObserver(function(N){for(var V=0;V<N.length;V++){var K=N[V],H=K.removedNodes;if(H)for(var j=0;j<H.length;j++){var te=H[j];if(te===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(N){e.destroy()});var _=gi(function(){e.cy.resize()},100);x&&(e.styleObserver=new MutationObserver(_),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",_),T&&(e.resizeObserver=new ResizeObserver(_),e.resizeObserver.observe(e.container));var C=function(N,V){for(;N!=null;)V(N),N=N.parentNode},y=function(){e.invalidateContainerClientCoordsCache()};C(e.container,function(N){e.registerBinding(N,"transitionend",y),e.registerBinding(N,"animationend",y),e.registerBinding(N,"scroll",y)}),e.registerBinding(e.container,"contextmenu",function(N){N.preventDefault()});var w=function(){return e.selection[4]!==0},E=function(N){for(var V=e.findContainerClientCoords(),K=V[0],H=V[1],j=V[2],te=V[3],q=N.touches?N.touches:[N],ee=!1,pe=0;pe<q.length;pe++){var fe=q[pe];if(K<=fe.clientX&&fe.clientX<=K+j&&H<=fe.clientY&&fe.clientY<=H+te){ee=!0;break}}if(!ee)return!1;for(var le=e.container,me=N.target,se=me.parentNode,ue=!1;se;){if(se===le){ue=!0;break}se=se.parentNode}return!!ue};e.registerBinding(e.container,"mousedown",function(N){if(E(N)){N.preventDefault(),m(),e.hoverData.capture=!0,e.hoverData.which=N.which;var V=e.cy,K=[N.clientX,N.clientY],H=e.projectIntoViewport(K[0],K[1]),j=e.selection,te=e.findNearestElements(H[0],H[1],!0,!1),q=te[0],ee=e.dragData.possibleDragElements;e.hoverData.mdownPos=H,e.hoverData.mdownGPos=K;var pe=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var ue=e.hoverData.down;ue?ue.emit({originalEvent:N,type:"taphold",position:{x:H[0],y:H[1]}}):V.emit({originalEvent:N,type:"taphold",position:{x:H[0],y:H[1]}})}},e.tapholdDuration)};if(N.which==3){e.hoverData.cxtStarted=!0;var fe={originalEvent:N,type:"cxttapstart",position:{x:H[0],y:H[1]}};q?(q.activate(),q.emit(fe),e.hoverData.down=q):V.emit(fe),e.hoverData.downTime=new Date().getTime(),e.hoverData.cxtDragged=!1}else if(N.which==1){q&&q.activate();{if(q!=null&&e.nodeIsGrabbable(q)){var le=function(ue){return{originalEvent:N,type:ue,position:{x:H[0],y:H[1]}}},me=function(ue){ue.emit(le("grab"))};if(c(q),!q.selected())ee=e.dragData.possibleDragElements=V.collection(),v(q,{addToList:ee}),q.emit(le("grabon")).emit(le("grab"));else{ee=e.dragData.possibleDragElements=V.collection();var se=V.$(function(ue){return ue.isNode()&&ue.selected()&&e.nodeIsGrabbable(ue)});p(se,{addToList:ee}),q.emit(le("grabon")),se.forEach(me)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=q,e.hoverData.downs=te,e.hoverData.downTime=new Date().getTime()}r(q,["mousedown","tapstart","vmousedown"],N,{x:H[0],y:H[1]}),q==null?(j[4]=1,e.data.bgActivePosistion={x:H[0],y:H[1]},e.redrawHint("select",!0),e.redraw()):q.pannable()&&(j[4]=1),pe()}j[0]=j[2]=H[0],j[1]=j[3]=H[1]}},!1),e.registerBinding(t,"mousemove",function(N){var V=e.hoverData.capture;if(!(!V&&!E(N))){var K=!1,H=e.cy,j=H.zoom(),te=[N.clientX,N.clientY],q=e.projectIntoViewport(te[0],te[1]),ee=e.hoverData.mdownPos,pe=e.hoverData.mdownGPos,fe=e.selection,le=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(le=e.findNearestElement(q[0],q[1],!0,!1));var me=e.hoverData.last,se=e.hoverData.down,ue=[q[0]-fe[2],q[1]-fe[3]],ze=e.dragData.possibleDragElements,Pe;if(pe){var lt=te[0]-pe[0],Ke=lt*lt,Ge=te[1]-pe[1],ct=Ge*Ge,He=Ke+ct;e.hoverData.isOverThresholdDrag=Pe=He>=e.desktopTapThreshold2}var gt=i(N);Pe&&(e.hoverData.tapholdCancelled=!0);var xt=function(){var Mt=e.hoverData.dragDelta=e.hoverData.dragDelta||[];Mt.length===0?(Mt.push(ue[0]),Mt.push(ue[1])):(Mt[0]+=ue[0],Mt[1]+=ue[1])};K=!0,r(le,["mousemove","vmousemove","tapdrag"],N,{x:q[0],y:q[1]});var ht=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||H.emit({originalEvent:N,type:"boxstart",position:{x:q[0],y:q[1]}}),fe[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(e.hoverData.which===3){if(Pe){var wt={originalEvent:N,type:"cxtdrag",position:{x:q[0],y:q[1]}};se?se.emit(wt):H.emit(wt),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||le!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:N,type:"cxtdragout",position:{x:q[0],y:q[1]}}),e.hoverData.cxtOver=le,le&&le.emit({originalEvent:N,type:"cxtdragover",position:{x:q[0],y:q[1]}}))}}else if(e.hoverData.dragging){if(K=!0,H.panningEnabled()&&H.userPanningEnabled()){var Nt;if(e.hoverData.justStartedPan){var zt=e.hoverData.mdownPos;Nt={x:(q[0]-zt[0])*j,y:(q[1]-zt[1])*j},e.hoverData.justStartedPan=!1}else Nt={x:ue[0]*j,y:ue[1]*j};H.panBy(Nt),H.emit("dragpan"),e.hoverData.dragged=!0}q=e.projectIntoViewport(N.clientX,N.clientY)}else if(fe[4]==1&&(se==null||se.pannable())){if(Pe){if(!e.hoverData.dragging&&H.boxSelectionEnabled()&&(gt||!H.panningEnabled()||!H.userPanningEnabled()))ht();else if(!e.hoverData.selecting&&H.panningEnabled()&&H.userPanningEnabled()){var Et=o(se,e.hoverData.downs);Et&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,fe[4]=0,e.data.bgActivePosistion=Nn(ee),e.redrawHint("select",!0),e.redraw())}se&&se.pannable()&&se.active()&&se.unactivate()}}else{if(se&&se.pannable()&&se.active()&&se.unactivate(),(!se||!se.grabbed())&&le!=me&&(me&&r(me,["mouseout","tapdragout"],N,{x:q[0],y:q[1]}),le&&r(le,["mouseover","tapdragover"],N,{x:q[0],y:q[1]}),e.hoverData.last=le),se)if(Pe){if(H.boxSelectionEnabled()&&gt)se&&se.grabbed()&&(b(ze),se.emit("freeon"),ze.emit("free"),e.dragData.didDrag&&(se.emit("dragfreeon"),ze.emit("dragfree"))),ht();else if(se&&se.grabbed()&&e.nodeIsDraggable(se)){var Ye=!e.dragData.didDrag;Ye&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||p(ze,{inDragLayer:!0});var We={x:0,y:0};if(ne(ue[0])&&ne(ue[1])&&(We.x+=ue[0],We.y+=ue[1],Ye)){var nt=e.hoverData.dragDelta;nt&&ne(nt[0])&&ne(nt[1])&&(We.x+=nt[0],We.y+=nt[1])}e.hoverData.draggingEles=!0,ze.silentShift(We).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else xt();K=!0}if(fe[2]=q[0],fe[3]=q[1],K)return N.stopPropagation&&N.stopPropagation(),N.preventDefault&&N.preventDefault(),!1}},!1);var D,A,k;e.registerBinding(t,"mouseup",function(N){var V=e.hoverData.capture;if(V){e.hoverData.capture=!1;var K=e.cy,H=e.projectIntoViewport(N.clientX,N.clientY),j=e.selection,te=e.findNearestElement(H[0],H[1],!0,!1),q=e.dragData.possibleDragElements,ee=e.hoverData.down,pe=i(N);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,ee&&ee.unactivate(),e.hoverData.which===3){var fe={originalEvent:N,type:"cxttapend",position:{x:H[0],y:H[1]}};if(ee?ee.emit(fe):K.emit(fe),!e.hoverData.cxtDragged){var le={originalEvent:N,type:"cxttap",position:{x:H[0],y:H[1]}};ee?ee.emit(le):K.emit(le)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(e.hoverData.which===1){if(r(te,["mouseup","tapend","vmouseup"],N,{x:H[0],y:H[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(r(ee,["click","tap","vclick"],N,{x:H[0],y:H[1]}),A=!1,N.timeStamp-k<=K.multiClickDebounceTime()?(D&&clearTimeout(D),A=!0,k=null,r(ee,["dblclick","dbltap","vdblclick"],N,{x:H[0],y:H[1]})):(D=setTimeout(function(){A||r(ee,["oneclick","onetap","voneclick"],N,{x:H[0],y:H[1]})},K.multiClickDebounceTime()),k=N.timeStamp)),ee==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!i(N)&&(K.$(n).unselect(["tapunselect"]),q.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=q=K.collection()),te==ee&&!e.dragData.didDrag&&!e.hoverData.selecting&&te!=null&&te._private.selectable&&(e.hoverData.dragging||(K.selectionType()==="additive"||pe?te.selected()?te.unselect(["tapunselect"]):te.select(["tapselect"]):pe||(K.$(n).unmerge(te).unselect(["tapunselect"]),te.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var me=K.collection(e.getAllInBox(j[0],j[1],j[2],j[3]));e.redrawHint("select",!0),me.length>0&&e.redrawHint("eles",!0),K.emit({type:"boxend",originalEvent:N,position:{x:H[0],y:H[1]}});var se=function(ze){return ze.selectable()&&!ze.selected()};K.selectionType()==="additive"||pe||K.$(n).unmerge(me).unselect(),me.emit("box").stdFilter(se).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!j[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var ue=ee&&ee.grabbed();b(q),ue&&(ee.emit("freeon"),q.emit("free"),e.dragData.didDrag&&(ee.emit("dragfreeon"),q.emit("dragfree")))}}j[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}},!1);var M=function(N){if(!e.scrollingPage){var V=e.cy,K=V.zoom(),H=V.pan(),j=e.projectIntoViewport(N.clientX,N.clientY),te=[j[0]*K+H.x,j[1]*K+H.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||w()){N.preventDefault();return}if(V.panningEnabled()&&V.userPanningEnabled()&&V.zoomingEnabled()&&V.userZoomingEnabled()){N.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var q;N.deltaY!=null?q=N.deltaY/-250:N.wheelDeltaY!=null?q=N.wheelDeltaY/1e3:q=N.wheelDelta/1e3,q=q*e.wheelSensitivity;var ee=N.deltaMode===1;ee&&(q*=33);var pe=V.zoom()*Math.pow(10,q);N.type==="gesturechange"&&(pe=e.gestureStartZoom*N.scale),V.zoom({level:pe,renderedPosition:{x:te[0],y:te[1]}}),V.emit(N.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",M,!0),e.registerBinding(t,"scroll",function(N){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(N){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||N.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(N){e.hasTouchStarted||M(N)},!0),e.registerBinding(e.container,"mouseout",function(N){var V=e.projectIntoViewport(N.clientX,N.clientY);e.cy.emit({originalEvent:N,type:"mouseout",position:{x:V[0],y:V[1]}})},!1),e.registerBinding(e.container,"mouseover",function(N){var V=e.projectIntoViewport(N.clientX,N.clientY);e.cy.emit({originalEvent:N,type:"mouseover",position:{x:V[0],y:V[1]}})},!1);var L,O,R,I,S,P,z,F,G,Y,W,Q,B,U=function(N,V,K,H){return Math.sqrt((K-N)*(K-N)+(H-V)*(H-V))},X=function(N,V,K,H){return(K-N)*(K-N)+(H-V)*(H-V)},$;e.registerBinding(e.container,"touchstart",$=function(N){if(e.hasTouchStarted=!0,!!E(N)){m(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var V=e.cy,K=e.touchData.now,H=e.touchData.earlier;if(N.touches[0]){var j=e.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);K[0]=j[0],K[1]=j[1]}if(N.touches[1]){var j=e.projectIntoViewport(N.touches[1].clientX,N.touches[1].clientY);K[2]=j[0],K[3]=j[1]}if(N.touches[2]){var j=e.projectIntoViewport(N.touches[2].clientX,N.touches[2].clientY);K[4]=j[0],K[5]=j[1]}if(N.touches[1]){e.touchData.singleTouchMoved=!0,b(e.dragData.touchDragEles);var te=e.findContainerClientCoords();G=te[0],Y=te[1],W=te[2],Q=te[3],L=N.touches[0].clientX-G,O=N.touches[0].clientY-Y,R=N.touches[1].clientX-G,I=N.touches[1].clientY-Y,B=0<=L&&L<=W&&0<=R&&R<=W&&0<=O&&O<=Q&&0<=I&&I<=Q;var q=V.pan(),ee=V.zoom();S=U(L,O,R,I),P=X(L,O,R,I),z=[(L+R)/2,(O+I)/2],F=[(z[0]-q.x)/ee,(z[1]-q.y)/ee];var pe=200,fe=pe*pe;if(P<fe&&!N.touches[2]){var le=e.findNearestElement(K[0],K[1],!0,!0),me=e.findNearestElement(K[2],K[3],!0,!0);le&&le.isNode()?(le.activate().emit({originalEvent:N,type:"cxttapstart",position:{x:K[0],y:K[1]}}),e.touchData.start=le):me&&me.isNode()?(me.activate().emit({originalEvent:N,type:"cxttapstart",position:{x:K[0],y:K[1]}}),e.touchData.start=me):V.emit({originalEvent:N,type:"cxttapstart",position:{x:K[0],y:K[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,e.redraw();return}}if(N.touches[2])V.boxSelectionEnabled()&&N.preventDefault();else if(!N.touches[1]&&N.touches[0]){var se=e.findNearestElements(K[0],K[1],!0,!0),ue=se[0];if(ue!=null&&(ue.activate(),e.touchData.start=ue,e.touchData.starts=se,e.nodeIsGrabbable(ue))){var ze=e.dragData.touchDragEles=V.collection(),Pe=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),ue.selected()?(Pe=V.$(function(He){return He.selected()&&e.nodeIsGrabbable(He)}),p(Pe,{addToList:ze})):v(ue,{addToList:ze}),c(ue);var lt=function(He){return{originalEvent:N,type:He,position:{x:K[0],y:K[1]}}};ue.emit(lt("grabon")),Pe?Pe.forEach(function(He){He.emit(lt("grab"))}):ue.emit(lt("grab"))}r(ue,["touchstart","tapstart","vmousedown"],N,{x:K[0],y:K[1]}),ue==null&&(e.data.bgActivePosistion={x:j[0],y:j[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved===!1&&!e.pinching&&!e.touchData.selecting&&r(e.touchData.start,["taphold"],N,{x:K[0],y:K[1]})},e.tapholdDuration)}if(N.touches.length>=1){for(var Ke=e.touchData.startPosition=[null,null,null,null,null,null],Ge=0;Ge<K.length;Ge++)Ke[Ge]=H[Ge]=K[Ge];var ct=N.touches[0];e.touchData.startGPosition=[ct.clientX,ct.clientY]}}},!1);var Z;e.registerBinding(window,"touchmove",Z=function(N){var V=e.touchData.capture;if(!(!V&&!E(N))){var K=e.selection,H=e.cy,j=e.touchData.now,te=e.touchData.earlier,q=H.zoom();if(N.touches[0]){var ee=e.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);j[0]=ee[0],j[1]=ee[1]}if(N.touches[1]){var ee=e.projectIntoViewport(N.touches[1].clientX,N.touches[1].clientY);j[2]=ee[0],j[3]=ee[1]}if(N.touches[2]){var ee=e.projectIntoViewport(N.touches[2].clientX,N.touches[2].clientY);j[4]=ee[0],j[5]=ee[1]}var pe=e.touchData.startGPosition,fe;if(V&&N.touches[0]&&pe){for(var le=[],me=0;me<j.length;me++)le[me]=j[me]-te[me];var se=N.touches[0].clientX-pe[0],ue=se*se,ze=N.touches[0].clientY-pe[1],Pe=ze*ze,lt=ue+Pe;fe=lt>=e.touchTapThreshold2}if(V&&e.touchData.cxt){N.preventDefault();var Ke=N.touches[0].clientX-G,Ge=N.touches[0].clientY-Y,ct=N.touches[1].clientX-G,He=N.touches[1].clientY-Y,gt=X(Ke,Ge,ct,He),xt=gt/P,ht=150,wt=ht*ht,Nt=1.5,zt=Nt*Nt;if(xt>=zt||gt>=wt){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Et={originalEvent:N,type:"cxttapend",position:{x:j[0],y:j[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(Et),e.touchData.start=null):H.emit(Et)}}if(V&&e.touchData.cxt){var Et={originalEvent:N,type:"cxtdrag",position:{x:j[0],y:j[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(Et):H.emit(Et),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Ye=e.findNearestElement(j[0],j[1],!0,!0);(!e.touchData.cxtOver||Ye!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:N,type:"cxtdragout",position:{x:j[0],y:j[1]}}),e.touchData.cxtOver=Ye,Ye&&Ye.emit({originalEvent:N,type:"cxtdragover",position:{x:j[0],y:j[1]}}))}else if(V&&N.touches[2]&&H.boxSelectionEnabled())N.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||H.emit({originalEvent:N,type:"boxstart",position:{x:j[0],y:j[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,K[4]=1,!K||K.length===0||K[0]===void 0?(K[0]=(j[0]+j[2]+j[4])/3,K[1]=(j[1]+j[3]+j[5])/3,K[2]=(j[0]+j[2]+j[4])/3+1,K[3]=(j[1]+j[3]+j[5])/3+1):(K[2]=(j[0]+j[2]+j[4])/3,K[3]=(j[1]+j[3]+j[5])/3),e.redrawHint("select",!0),e.redraw();else if(V&&N.touches[1]&&!e.touchData.didSelect&&H.zoomingEnabled()&&H.panningEnabled()&&H.userZoomingEnabled()&&H.userPanningEnabled()){N.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var We=e.dragData.touchDragEles;if(We){e.redrawHint("drag",!0);for(var nt=0;nt<We.length;nt++){var Mt=We[nt]._private;Mt.grabbed=!1,Mt.rscratch.inDragLayer=!1}}var Nr=e.touchData.start,Ke=N.touches[0].clientX-G,Ge=N.touches[0].clientY-Y,ct=N.touches[1].clientX-G,He=N.touches[1].clientY-Y,Pa=U(Ke,Ge,ct,He),jl=Pa/S;if(B){var ql=Ke-L,Hl=Ge-O,Wl=ct-R,$l=He-I,Kl=(ql+Wl)/2,Zl=(Hl+$l)/2,Kn=H.zoom(),Ni=Kn*jl,Mr=H.pan(),Ra=F[0]*Kn+Mr.x,Ba=F[1]*Kn+Mr.y,Ql={x:-Ni/Kn*(Ra-Mr.x-Kl)+Ra,y:-Ni/Kn*(Ba-Mr.y-Zl)+Ba};if(Nr&&Nr.active()){var We=e.dragData.touchDragEles;b(We),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Nr.unactivate().emit("freeon"),We.emit("free"),e.dragData.didDrag&&(Nr.emit("dragfreeon"),We.emit("dragfree"))}H.viewport({zoom:Ni,pan:Ql,cancelOnFailedZoom:!0}),H.emit("pinchzoom"),S=Pa,L=Ke,O=Ge,R=ct,I=He,e.pinching=!0}if(N.touches[0]){var ee=e.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);j[0]=ee[0],j[1]=ee[1]}if(N.touches[1]){var ee=e.projectIntoViewport(N.touches[1].clientX,N.touches[1].clientY);j[2]=ee[0],j[3]=ee[1]}if(N.touches[2]){var ee=e.projectIntoViewport(N.touches[2].clientX,N.touches[2].clientY);j[4]=ee[0],j[5]=ee[1]}}else if(N.touches[0]&&!e.touchData.didSelect){var _t=e.touchData.start,Mi=e.touchData.last,Ye;if(!e.hoverData.draggingEles&&!e.swipePanning&&(Ye=e.findNearestElement(j[0],j[1],!0,!0)),V&&_t!=null&&N.preventDefault(),V&&_t!=null&&e.nodeIsDraggable(_t))if(fe){var We=e.dragData.touchDragEles,Fa=!e.dragData.didDrag;Fa&&p(We,{inDragLayer:!0}),e.dragData.didDrag=!0;var Zn={x:0,y:0};if(ne(le[0])&&ne(le[1])&&(Zn.x+=le[0],Zn.y+=le[1],Fa)){e.redrawHint("eles",!0);var Tt=e.touchData.dragDelta;Tt&&ne(Tt[0])&&ne(Tt[1])&&(Zn.x+=Tt[0],Zn.y+=Tt[1])}e.hoverData.draggingEles=!0,We.silentShift(Zn).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==te[0]&&e.touchData.startPosition[1]==te[1]&&e.redrawHint("eles",!0),e.redraw()}else{var Tt=e.touchData.dragDelta=e.touchData.dragDelta||[];Tt.length===0?(Tt.push(le[0]),Tt.push(le[1])):(Tt[0]+=le[0],Tt[1]+=le[1])}if(r(_t||Ye,["touchmove","tapdrag","vmousemove"],N,{x:j[0],y:j[1]}),(!_t||!_t.grabbed())&&Ye!=Mi&&(Mi&&Mi.emit({originalEvent:N,type:"tapdragout",position:{x:j[0],y:j[1]}}),Ye&&Ye.emit({originalEvent:N,type:"tapdragover",position:{x:j[0],y:j[1]}})),e.touchData.last=Ye,V)for(var nt=0;nt<j.length;nt++)j[nt]&&e.touchData.startPosition[nt]&&fe&&(e.touchData.singleTouchMoved=!0);if(V&&(_t==null||_t.pannable())&&H.panningEnabled()&&H.userPanningEnabled()){var Jl=o(_t,e.touchData.starts);Jl&&(N.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=Nn(e.touchData.startPosition)),e.swipePanning?(H.panBy({x:le[0]*q,y:le[1]*q}),H.emit("dragpan")):fe&&(e.swipePanning=!0,H.panBy({x:se*q,y:ze*q}),H.emit("dragpan"),_t&&(_t.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));var ee=e.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);j[0]=ee[0],j[1]=ee[1]}}for(var me=0;me<j.length;me++)te[me]=j[me];V&&N.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1);var re;e.registerBinding(t,"touchcancel",re=function(N){var V=e.touchData.start;e.touchData.capture=!1,V&&V.unactivate()});var ge,de,J,oe;if(e.registerBinding(t,"touchend",ge=function(N){var V=e.touchData.start,K=e.touchData.capture;if(K)N.touches.length===0&&(e.touchData.capture=!1),N.preventDefault();else return;var H=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var j=e.cy,te=j.zoom(),q=e.touchData.now,ee=e.touchData.earlier;if(N.touches[0]){var pe=e.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);q[0]=pe[0],q[1]=pe[1]}if(N.touches[1]){var pe=e.projectIntoViewport(N.touches[1].clientX,N.touches[1].clientY);q[2]=pe[0],q[3]=pe[1]}if(N.touches[2]){var pe=e.projectIntoViewport(N.touches[2].clientX,N.touches[2].clientY);q[4]=pe[0],q[5]=pe[1]}V&&V.unactivate();var fe;if(e.touchData.cxt){if(fe={originalEvent:N,type:"cxttapend",position:{x:q[0],y:q[1]}},V?V.emit(fe):j.emit(fe),!e.touchData.cxtDragged){var le={originalEvent:N,type:"cxttap",position:{x:q[0],y:q[1]}};V?V.emit(le):j.emit(le)}e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,e.redraw();return}if(!N.touches[2]&&j.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var me=j.collection(e.getAllInBox(H[0],H[1],H[2],H[3]));H[0]=void 0,H[1]=void 0,H[2]=void 0,H[3]=void 0,H[4]=0,e.redrawHint("select",!0),j.emit({type:"boxend",originalEvent:N,position:{x:q[0],y:q[1]}});var se=function(ht){return ht.selectable()&&!ht.selected()};me.emit("box").stdFilter(se).select().emit("boxselect"),me.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(V!=null&&V.unactivate(),N.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!N.touches[1]&&!N.touches[0]&&!N.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var ue=e.dragData.touchDragEles;if(V!=null){var ze=V._private.grabbed;b(ue),e.redrawHint("drag",!0),e.redrawHint("eles",!0),ze&&(V.emit("freeon"),ue.emit("free"),e.dragData.didDrag&&(V.emit("dragfreeon"),ue.emit("dragfree"))),r(V,["touchend","tapend","vmouseup","tapdragout"],N,{x:q[0],y:q[1]}),V.unactivate(),e.touchData.start=null}else{var Pe=e.findNearestElement(q[0],q[1],!0,!0);r(Pe,["touchend","tapend","vmouseup","tapdragout"],N,{x:q[0],y:q[1]})}var lt=e.touchData.startPosition[0]-q[0],Ke=lt*lt,Ge=e.touchData.startPosition[1]-q[1],ct=Ge*Ge,He=Ke+ct,gt=He*te*te;e.touchData.singleTouchMoved||(V||j.$(":selected").unselect(["tapunselect"]),r(V,["tap","vclick"],N,{x:q[0],y:q[1]}),de=!1,N.timeStamp-oe<=j.multiClickDebounceTime()?(J&&clearTimeout(J),de=!0,oe=null,r(V,["dbltap","vdblclick"],N,{x:q[0],y:q[1]})):(J=setTimeout(function(){de||r(V,["onetap","voneclick"],N,{x:q[0],y:q[1]})},j.multiClickDebounceTime()),oe=N.timeStamp)),V!=null&&!e.dragData.didDrag&&V._private.selectable&&gt<e.touchTapThreshold2&&!e.pinching&&(j.selectionType()==="single"?(j.$(n).unmerge(V).unselect(["tapunselect"]),V.select(["tapselect"])):V.selected()?V.unselect(["tapunselect"]):V.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var xt=0;xt<q.length;xt++)ee[xt]=q[xt];e.dragData.didDrag=!1,N.touches.length===0&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),N.touches.length<2&&(N.touches.length===1&&(e.touchData.startGPosition=[N.touches[0].clientX,N.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())},!1),typeof TouchEvent>"u"){var ie=[],ce=function(N){return{clientX:N.clientX,clientY:N.clientY,force:1,identifier:N.pointerId,pageX:N.pageX,pageY:N.pageY,radiusX:N.width/2,radiusY:N.height/2,screenX:N.screenX,screenY:N.screenY,target:N.target}},ye=function(N){return{event:N,touch:ce(N)}},be=function(N){ie.push(ye(N))},xe=function(N){for(var V=0;V<ie.length;V++){var K=ie[V];if(K.event.pointerId===N.pointerId){ie.splice(V,1);return}}},Le=function(N){var V=ie.filter(function(K){return K.event.pointerId===N.pointerId})[0];V.event=N,V.touch=ce(N)},we=function(N){N.touches=ie.map(function(V){return V.touch})},Te=function(N){return N.pointerType==="mouse"||N.pointerType===4};e.registerBinding(e.container,"pointerdown",function(N){Te(N)||(N.preventDefault(),be(N),we(N),$(N))}),e.registerBinding(e.container,"pointerup",function(N){Te(N)||(xe(N),we(N),ge(N))}),e.registerBinding(e.container,"pointercancel",function(N){Te(N)||(xe(N),we(N),re(N))}),e.registerBinding(e.container,"pointermove",function(N){Te(N)||(N.preventDefault(),Le(N),we(N),Z(N))})}};var Ut={};Ut.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(n,r,i,o,a,l){this.renderer.nodeShapeImpl("polygon",n,r,i,o,a,this.points)},intersectLine:function(n,r,i,o,a,l,s,u){return fr(a,l,this.points,n,r,i/2,o/2,s)},checkPoint:function(n,r,i,o,a,l,s,u){return Vt(n,r,this.points,l,s,o,a,[0,-1],i)}}};Ut.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,o,a,l){return ph(i,o,e,t,n/2+a,r/2+a)},checkPoint:function(e,t,n,r,i,o,a,l){return dn(e,t,r,i,o,a,n)}}};Ut.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(n,r,i,o,a,l,s){if(l[s]!==void 0&&l[s+"-cx"]===n&&l[s+"-cy"]===r)return l[s];l[s]=new Array(t.length/2),l[s+"-cx"]=n,l[s+"-cy"]=r;var u=i/2,c=o/2;a=a==="auto"?ks(i,o):a;for(var h=new Array(t.length/2),g=0;g<t.length/2;g++)h[g]={x:n+u*t[g*2],y:r+c*t[g*2+1]};var d,p,v,b,f=h.length;for(p=h[f-1],d=0;d<f;d++)v=h[d%f],b=h[(d+1)%f],l[s][d]=Ma(p,v,b,a),p=v,v=b;return l[s]},draw:function(n,r,i,o,a,l,s){this.renderer.nodeShapeImpl("round-polygon",n,r,i,o,a,this.points,this.getOrCreateCorners(r,i,o,a,l,s,"drawCorners"))},intersectLine:function(n,r,i,o,a,l,s,u,c){return gh(a,l,this.points,n,r,i,o,s,this.getOrCreateCorners(n,r,i,o,u,c,"corners"))},checkPoint:function(n,r,i,o,a,l,s,u,c){return dh(n,r,this.points,l,s,o,a,this.getOrCreateCorners(l,s,o,a,u,c,"corners"))}}};Ut.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:ut(4,0),draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,this.points,o)},intersectLine:function(e,t,n,r,i,o,a,l){return Ds(i,o,e,t,n,r,a,l)},checkPoint:function(e,t,n,r,i,o,a,l){var s=r/2,u=i/2;l=l==="auto"?vn(r,i):l,l=Math.min(s,u,l);var c=l*2;return!!(Vt(e,t,this.points,o,a,r,i-c,[0,-1],n)||Vt(e,t,this.points,o,a,r-c,i,[0,-1],n)||dn(e,t,c,c,o-s+l,a-u+l,n)||dn(e,t,c,c,o+s-l,a-u+l,n)||dn(e,t,c,c,o+s-l,a+u-l,n)||dn(e,t,c,c,o-s+l,a+u-l,n))}}};Ut.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:ba(),points:ut(4,0),draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,null,o)},generateCutTrianglePts:function(e,t,n,r,i){var o=i==="auto"?this.cornerLength:i,a=t/2,l=e/2,s=n-l,u=n+l,c=r-a,h=r+a;return{topLeft:[s,c+o,s+o,c,s+o,c+o],topRight:[u-o,c,u,c+o,u-o,c+o],bottomRight:[u,h-o,u-o,h,u-o,h-o],bottomLeft:[s+o,h,s,h-o,s+o,h-o]}},intersectLine:function(e,t,n,r,i,o,a,l){var s=this.generateCutTrianglePts(n+2*a,r+2*a,e,t,l),u=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return fr(i,o,u,e,t)},checkPoint:function(e,t,n,r,i,o,a,l){var s=l==="auto"?this.cornerLength:l;if(Vt(e,t,this.points,o,a,r,i-2*s,[0,-1],n)||Vt(e,t,this.points,o,a,r-2*s,i,[0,-1],n))return!0;var u=this.generateCutTrianglePts(r,i,o,a);return dt(e,t,u.topLeft)||dt(e,t,u.topRight)||dt(e,t,u.bottomRight)||dt(e,t,u.bottomLeft)}}};Ut.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:ut(4,0),draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,o,a,l){var s=.15,u=.5,c=.85,h=this.generateBarrelBezierPts(n+2*a,r+2*a,e,t),g=function(p){var v=Sn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},s),b=Sn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},u),f=Sn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},c);return[p[0],p[1],v.x,v.y,b.x,b.y,f.x,f.y,p[4],p[5]]},d=[].concat(g(h.topLeft),g(h.topRight),g(h.bottomRight),g(h.bottomLeft));return fr(i,o,d,e,t)},generateBarrelBezierPts:function(e,t,n,r){var i=t/2,o=e/2,a=n-o,l=n+o,s=r-i,u=r+i,c=qi(e,t),h=c.heightOffset,g=c.widthOffset,d=c.ctrlPtOffsetPct*e,p={topLeft:[a,s+h,a+d,s,a+g,s],topRight:[l-g,s,l-d,s,l,s+h],bottomRight:[l,u-h,l-d,u,l-g,u],bottomLeft:[a+g,u,a+d,u,a,u-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,r,i,o,a,l){var s=qi(r,i),u=s.heightOffset,c=s.widthOffset;if(Vt(e,t,this.points,o,a,r,i-2*u,[0,-1],n)||Vt(e,t,this.points,o,a,r-2*c,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(r,i,o,a),g=function(C,y,w){var E=w[4],D=w[2],A=w[0],k=w[5],M=w[1],L=Math.min(E,A),O=Math.max(E,A),R=Math.min(k,M),I=Math.max(k,M);if(L<=C&&C<=O&&R<=y&&y<=I){var S=fh(E,D,A),P=lh(S[0],S[1],S[2],C),z=P.filter(function(F){return 0<=F&&F<=1});if(z.length>0)return z[0]}return null},d=Object.keys(h),p=0;p<d.length;p++){var v=d[p],b=h[v],f=g(e,t,b);if(f!=null){var m=b[5],x=b[3],T=b[1],_=$e(m,x,T,f);if(b.isTop&&_<=t||b.isBottom&&t<=_)return!0}}return!1}}};Ut.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:ut(4,0),draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,this.points,o)},intersectLine:function(e,t,n,r,i,o,a,l){var s=e-(n/2+a),u=t-(r/2+a),c=u,h=e+(n/2+a),g=$t(i,o,e,t,s,u,h,c,!1);return g.length>0?g:Ds(i,o,e,t,n,r,a,l)},checkPoint:function(e,t,n,r,i,o,a,l){l=l==="auto"?vn(r,i):l;var s=2*l;if(Vt(e,t,this.points,o,a,r,i-s,[0,-1],n)||Vt(e,t,this.points,o,a,r-s,i,[0,-1],n))return!0;var u=r/2+2*n,c=i/2+2*n,h=[o-u,a-c,o-u,a,o+u,a,o+u,a-c];return!!(dt(e,t,h)||dn(e,t,s,s,o+r/2-l,a+i/2-l,n)||dn(e,t,s,s,o-r/2+l,a+i/2-l,n))}}};Ut.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",ut(3,0)),this.generateRoundPolygon("round-triangle",ut(3,0)),this.generatePolygon("rectangle",ut(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",ut(5,0)),this.generateRoundPolygon("round-pentagon",ut(5,0)),this.generatePolygon("hexagon",ut(6,0)),this.generateRoundPolygon("round-hexagon",ut(6,0)),this.generatePolygon("heptagon",ut(7,0)),this.generateRoundPolygon("round-heptagon",ut(7,0)),this.generatePolygon("octagon",ut(8,0)),this.generateRoundPolygon("round-octagon",ut(8,0));var r=new Array(20);{var i=ji(5,0),o=ji(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var l=0;l<o.length/2;l++)o[l*2]*=a,o[l*2+1]*=a;for(var l=0;l<20/4;l++)r[l*4]=i[l*2],r[l*4+1]=i[l*2+1],r[l*4+2]=o[l*2],r[l*4+3]=o[l*2+1]}r=As(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var s=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",s),this.generateRoundPolygon("round-tag",s)}e.makePolygon=function(u){var c=u.join("$"),h="polygon-"+c,g;return(g=this[h])?g:t.generatePolygon(h,u)}};var kr={};kr.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};kr.redraw=function(e){e=e||ws();var t=this;t.averageRedrawTime===void 0&&(t.averageRedrawTime=0),t.lastRedrawTime===void 0&&(t.lastRedrawTime=0),t.lastDrawTime===void 0&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e};kr.beforeRender=function(e,t){if(!this.destroyed){t==null&&Be("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(r,i){return i.priority-r.priority})}};var Uo=function(e,t,n){for(var r=e.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(t,n)};kr.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var n=function r(i){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){Uo(e,!0,i);var o=Yt();e.render(e.renderOptions);var a=e.lastDrawTime=Yt();e.averageRedrawTime===void 0&&(e.averageRedrawTime=a-o),e.redrawCount===void 0&&(e.redrawCount=0),e.redrawCount++,e.redrawTotalTime===void 0&&(e.redrawTotalTime=0);var l=a-o;e.redrawTotalTime+=l,e.lastRedrawTime=l,e.averageRedrawTime=e.averageRedrawTime/2+l/2,e.requestedFrame=!1}else Uo(e,!1,i);e.skipFrame=!1,ni(r)}};ni(n)}};var Zf=function(e){this.init(e)},Dl=Zf,Wn=Dl.prototype;Wn.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Wn.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container(),r=t.cy.window();if(r){var i=r.document,o=i.head,a="__________cytoscape_stylesheet",l="__________cytoscape_container",s=i.getElementById(a)!=null;if(n.className.indexOf(l)<0&&(n.className=(n.className||"")+" "+l),!s){var u=i.createElement("style");u.id=a,u.textContent="."+l+" { position: relative; }",o.insertBefore(u,o.children[0])}var c=r.getComputedStyle(n),h=c.getPropertyValue("position");h==="static"&&ke("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=ne(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()};Wn.notify=function(e,t){var n=this,r=n.cy;if(!this.destroyed){if(e==="init"){n.load();return}if(e==="destroy"){n.destroy();return}(e==="add"||e==="remove"||e==="move"&&r.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")&&n.invalidateCachedZSortedEles(),e==="viewport"&&n.redrawHint("select",!0),(e==="load"||e==="resize"||e==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Wn.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}};Wn.isHeadless=function(){return!1};[Na,Tl,Cl,Hn,Ut,kr].forEach(function(e){ve(Wn,e)});var Vi=1e3/60,Al={setupDequeueing:function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=gi(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),i=function(a,l){var s=Yt(),u=n.averageRedrawTime,c=n.lastRedrawTime,h=[],g=n.cy.extent(),d=n.getPixelRatio();for(a||n.flushRenderedStyleQueue();;){var p=Yt(),v=p-s,b=p-l;if(c<Vi){var f=Vi-(a?u:0);if(b>=e.deqFastCost*f)break}else if(a){if(v>=e.deqCost*c||v>=e.deqAvgCost*u)break}else if(b>=e.deqNoDrawCost*Vi)break;var m=e.deq(t,d,g);if(m.length>0)for(var x=0;x<m.length;x++)h.push(m[x]);else break}h.length>0&&(e.onDeqd(t,h),!a&&e.shouldRedraw(t,h,d,g)&&r())},o=e.priority||fa;n.beforeRender(i,o(t))}}}},Qf=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ri;ca(this,e),this.idsByKey=new Pt,this.keyForId=new Pt,this.cachesByLvl=new Pt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n}return ha(e,[{key:"getIdsFor",value:function(t){t==null&&Be("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(t);return r||(r=new Gn,n.set(t,r)),r}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),r=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(r,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),r=this.keyForId.get(n),i=this.getKey(t);return r!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,r=this.lvls,i=n.get(t);return i||(i=new Pt,n.set(t,i),r.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var r=this.getKey(t),i=this.getCache(r,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var r=this.keyForId.get(t.id()),i=this.getCache(r,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var r=this.getKey(t);return this.hasCache(r,n)}},{key:"setCache",value:function(t,n,r){r.key=t,this.getCachesAt(n).set(t,r)}},{key:"set",value:function(t,n,r){var i=this.getKey(t);this.setCache(i,n,r),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var r=this.getKey(t);this.deleteCache(r,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(r){return n.deleteCache(t,r)})}},{key:"invalidate",value:function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(r),i||this.getNumberOfIdsForKey(r)===0}}]),e}(),jo=25,Xr=50,Qr=-4,ra=3,Jf=7.99,ev=8,tv=1024,nv=1024,rv=1024,iv=.2,av=.8,ov=10,sv=.15,lv=.1,uv=.9,cv=.9,hv=100,dv=1,Mn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},pv=et({getKey:null,doesEleInvalidateKey:ri,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:ms,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),sr=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var r=pv(t);ve(n,r),n.lookup=new Qf(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},qe=sr.prototype;qe.reasons=Mn;qe.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]};qe.getRetiredTextureQueue=function(e){var t=this,n=t.eleImgCaches.retired=t.eleImgCaches.retired||{},r=n[e]=n[e]||[];return r};qe.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new Tr(function(n,r){return r.reqs-n.reqs});return t};qe.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t};qe.getElement=function(e,t,n,r,i){var o=this,a=this.renderer,l=a.cy.zoom(),s=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!o.allowEdgeTxrCaching&&e.isEdge()||!o.allowParentTxrCaching&&e.isParent())return null;if(r==null&&(r=Math.ceil(ya(l*n))),r<Qr)r=Qr;else if(l>=Jf||r>ra)return null;var u=Math.pow(2,r),c=t.h*u,h=t.w*u,g=a.eleTextBiggerThanMin(e,u);if(!this.isVisible(e,g))return null;var d=s.get(e,r);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var p;if(c<=jo?p=jo:c<=Xr?p=Xr:p=Math.ceil(c/Xr)*Xr,c>rv||h>nv)return null;var v=o.getTextureQueue(p),b=v[v.length-2],f=function(){return o.recycleTexture(p,h)||o.addTexture(p,h)};b||(b=v[v.length-1]),b||(b=f()),b.width-b.usedWidth<h&&(b=f());for(var m=function(O){return O&&O.scaledLabelShown===g},x=i&&i===Mn.dequeue,T=i&&i===Mn.highQuality,_=i&&i===Mn.downscale,C,y=r+1;y<=ra;y++){var w=s.get(e,y);if(w){C=w;break}}var E=C&&C.level===r+1?C:null,D=function(){b.context.drawImage(E.texture.canvas,E.x,0,E.width,E.height,b.usedWidth,0,h,c)};if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,h,p),m(E))D();else if(m(C))if(T){for(var A=C.level;A>r;A--)E=o.getElement(e,t,n,A,Mn.downscale);D()}else return o.queueElement(e,C.level-1),C;else{var k;if(!x&&!T&&!_)for(var M=r-1;M>=Qr;M--){var L=s.get(e,M);if(L){k=L;break}}if(m(k))return o.queueElement(e,r),k;b.context.translate(b.usedWidth,0),b.context.scale(u,u),this.drawElement(b.context,e,t,g,!1),b.context.scale(1/u,1/u),b.context.translate(-b.usedWidth,0)}return d={x:b.usedWidth,texture:b,level:r,scale:u,width:h,height:c,scaledLabelShown:g},b.usedWidth+=Math.ceil(h+ev),b.eleCaches.push(d),s.set(e,r,d),o.checkTextureFullness(b),d};qe.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])};qe.invalidateElement=function(e){var t=this,n=t.lookup,r=[],i=n.isInvalid(e);if(i){for(var o=Qr;o<=ra;o++){var a=n.getForCachedKey(e,o);a&&r.push(a)}var l=n.invalidate(e);if(l)for(var s=0;s<r.length;s++){var u=r[s],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,t.checkTextureUtility(c)}t.removeFromQueue(e)}};qe.checkTextureUtility=function(e){e.invalidatedWidth>=iv*e.width&&this.retireTexture(e)};qe.checkTextureFullness=function(e){var t=this,n=t.getTextureQueue(e.height);e.usedWidth/e.width>av&&e.fullnessChecks>=ov?Jt(n,e):e.fullnessChecks++};qe.retireTexture=function(e){var t=this,n=e.height,r=t.getTextureQueue(n),i=this.lookup;Jt(r,e),e.retired=!0;for(var o=e.eleCaches,a=0;a<o.length;a++){var l=o[a];i.deleteCache(l.key,l.level)}va(o);var s=t.getRetiredTextureQueue(n);s.push(e)};qe.addTexture=function(e,t){var n=this,r=n.getTextureQueue(e),i={};return r.push(i),i.eleCaches=[],i.height=e,i.width=Math.max(tv,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=n.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};qe.recycleTexture=function(e,t){for(var n=this,r=n.getTextureQueue(e),i=n.getRetiredTextureQueue(e),o=0;o<i.length;o++){var a=i[o];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,va(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Jt(i,a),r.push(a),a}};qe.queueElement=function(e,t){var n=this,r=n.getElementQueue(),i=n.getElementKeyToQueue(),o=this.getKey(e),a=i[o];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,r.updateItem(a);else{var l={eles:e.spawn().merge(e),level:t,reqs:1,key:o};r.push(l),i[o]=l}};qe.dequeue=function(e){for(var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),i=[],o=t.lookup,a=0;a<dv&&n.size()>0;a++){var l=n.pop(),s=l.key,u=l.eles[0],c=o.hasCache(u,l.level);if(r[s]=null,!c){i.push(l);var h=t.getBoundingBox(u);t.getElement(u,h,e,l.level,Mn.dequeue)}}return i};qe.removeFromQueue=function(e){var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),i=this.getKey(e),o=r[i];o!=null&&(o.eles.length===1?(o.reqs=ga,n.updateItem(o),n.pop(),r[i]=null):o.eles.unmerge(e))};qe.onDequeue=function(e){this.onDequeues.push(e)};qe.offDequeue=function(e){Jt(this.onDequeues,e)};qe.setupDequeueing=Al.setupDequeueing({deqRedrawThreshold:hv,deqCost:sv,deqAvgCost:lv,deqNoDrawCost:uv,deqFastCost:cv,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var r=e.onDequeues[n];r(t)}},shouldRedraw:function(e,t,n,r){for(var i=0;i<t.length;i++)for(var o=t[i].eles,a=0;a<o.length;a++){var l=o[a].boundingBox();if(ma(l,r))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var gv=1,ur=-4,hi=2,fv=3.99,vv=50,yv=50,mv=.15,bv=.1,xv=.9,wv=.9,Ev=1,qo=250,_v=4e3*4e3,Tv=!0,kl=function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Yt()-2*qo,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=gi(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},yv),n.beforeRender(function(o,a){a-t.lastInvalidationTime<=qo?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,a){return a.reqs-o.reqs};t.layersQueue=new Tr(i),t.setupDequeueing()},tt=kl.prototype,Ho=0,Cv=Math.pow(2,53)-1;tt.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),i=Math.ceil(e.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:Ho=++Ho%Cv,bb:e,level:t,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=a.context,s=-a.bb.x1,u=-a.bb.y1;return l.scale(n,n),l.translate(s,u),a};tt.getLayers=function(e,t,n){var r=this,i=r.renderer,o=i.cy,a=o.zoom(),l=r.firstGet;if(r.firstGet=!1,n==null){if(n=Math.ceil(ya(a*t)),n<ur)n=ur;else if(a>=fv||n>hi)return null}r.validateLayersElesOrdering(n,e);var s=r.layersByLevel,u=Math.pow(2,n),c=s[n]=s[n]||[],h,g=r.levelIsComplete(n,e),d,p=function(){var E=function(M){if(r.validateLayersElesOrdering(M,e),r.levelIsComplete(M,e))return d=s[M],!0},D=function(M){if(!d)for(var L=n+M;ur<=L&&L<=hi&&!E(L);L+=M);};D(1),D(-1);for(var A=c.length-1;A>=0;A--){var k=c[A];k.invalid&&Jt(c,k)}};if(!g)p();else return c;var v=function(){if(!h){h=pt();for(var E=0;E<e.length;E++)Ts(h,e[E].boundingBox())}return h},b=function(E){E=E||{};var D=E.after;v();var A=h.w*u*(h.h*u);if(A>_v)return null;var k=r.makeLayer(h,n);if(D!=null){var M=c.indexOf(D)+1;c.splice(M,0,k)}else(E.insert===void 0||E.insert)&&c.unshift(k);return k};if(r.skipping&&!l)return null;for(var f=null,m=e.length/gv,x=!l,T=0;T<e.length;T++){var _=e[T],C=_._private.rscratch,y=C.imgLayerCaches=C.imgLayerCaches||{},w=y[n];if(w){f=w;continue}if((!f||f.eles.length>=m||!Cs(f.bb,_.boundingBox()))&&(f=b({insert:!0,after:f}),!f))return null;d||x?r.queueLayer(f,_):r.drawEleInLayer(f,_,n,t),f.eles.push(_),y[n]=f}return d||(x?null:c)};tt.getEleLevelForLayerLevel=function(e,t){return e};tt.drawEleInLayer=function(e,t,n,r){var i=this,o=this.renderer,a=e.context,l=t.boundingBox();l.w===0||l.h===0||!t.visible()||(n=i.getEleLevelForLayerLevel(n,r),o.setImgSmoothing(a,!1),o.drawCachedElement(a,t,null,null,n,Tv),o.setImgSmoothing(a,!0))};tt.levelIsComplete=function(e,t){var n=this,r=n.layersByLevel[e];if(!r||r.length===0)return!1;for(var i=0,o=0;o<r.length;o++){var a=r[o];if(a.reqs>0||a.invalid)return!1;i+=a.eles.length}return i===t.length};tt.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<t.length;a++)if(i.eles[0]===t[a]){o=a;break}if(o<0){this.invalidateLayer(i);continue}for(var l=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==t[l+a]){this.invalidateLayer(i);break}}};tt.updateElementsInLayers=function(e,t){for(var n=this,r=Er(e[0]),i=0;i<e.length;i++)for(var o=r?null:e[i],a=r?e[i]:e[i].ele,l=a._private.rscratch,s=l.imgLayerCaches=l.imgLayerCaches||{},u=ur;u<=hi;u++){var c=s[u];c&&(o&&n.getEleLevelForLayerLevel(c.level)!==o.level||t(c,a,o))}};tt.haveLayers=function(){for(var e=this,t=!1,n=ur;n<=hi;n++){var r=e.layersByLevel[n];if(r&&r.length>0){t=!0;break}}return t};tt.invalidateElements=function(e){var t=this;e.length!==0&&(t.lastInvalidationTime=Yt(),!(e.length===0||!t.haveLayers())&&t.updateElementsInLayers(e,function(n,r,i){t.invalidateLayer(n)}))};tt.invalidateLayer=function(e){if(this.lastInvalidationTime=Yt(),!e.invalid){var t=e.level,n=e.eles,r=this.layersByLevel[t];Jt(r,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[t]=null)}}};tt.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(n,r,i){var o=n.replacement;if(o||(o=n.replacement=t.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var a=0;a<o.eles.length;a++)t.queueLayer(o,o.eles[a])})};tt.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()};tt.queueLayer=function(e,t){var n=this,r=n.layersQueue,i=e.elesQueue,o=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(o[t.id()])return;i.push(t),o[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}};tt.dequeue=function(e){for(var t=this,n=t.layersQueue,r=[],i=0;i<Ev&&n.size()!==0;){var o=n.peek();if(o.replacement){n.pop();continue}if(o.replaces&&o!==o.replaces.replacement){n.pop();continue}if(o.invalid){n.pop();continue}var a=o.elesQueue.shift();a&&(t.drawEleInLayer(o,a,o.level,e),i++),r.length===0&&r.push(!0),o.elesQueue.length===0&&(n.pop(),o.reqs=0,o.replaces&&t.applyLayerReplacement(o),t.requestRedraw())}return r};tt.applyLayerReplacement=function(e){var t=this,n=t.layersByLevel[e.level],r=e.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=e;for(var o=0;o<e.eles.length;o++){var a=e.eles[o]._private,l=a.imgLayerCaches=a.imgLayerCaches||{};l&&(l[e.level]=e)}t.requestRedraw()}};tt.requestRedraw=gi(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100);tt.setupDequeueing=Al.setupDequeueing({deqRedrawThreshold:vv,deqCost:mv,deqAvgCost:bv,deqNoDrawCost:xv,deqFastCost:wv,deq:function(e,t){return e.dequeue(t)},onDeqd:fa,shouldRedraw:ms,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Ll={},Wo;function Dv(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}function Av(e,t,n){for(var r,i=0;i<t.length;i++){var o=t[i];i===0&&(r=o),e.lineTo(o.x,o.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}function $o(e,t,n){e.beginPath&&e.beginPath();for(var r=t,i=0;i<r.length;i++){var o=r[i];e.lineTo(o.x,o.y)}var a=n,l=n[0];e.moveTo(l.x,l.y);for(var i=1;i<a.length;i++){var o=a[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()}function kv(e,t,n,r,i){e.beginPath&&e.beginPath(),e.arc(n,r,i,0,Math.PI*2,!1);var o=t,a=o[0];e.moveTo(a.x,a.y);for(var l=0;l<o.length;l++){var s=o[l];e.lineTo(s.x,s.y)}e.closePath&&e.closePath()}function Lv(e,t,n,r){e.arc(t,n,r,0,Math.PI*2,!1)}Ll.arrowShapeImpl=function(e){return(Wo||(Wo={polygon:Dv,"triangle-backcurve":Av,"triangle-tee":$o,"circle-triangle":kv,"triangle-cross":$o,circle:Lv}))[e]};var Ft={};Ft.drawElement=function(e,t,n,r,i,o){var a=this;t.isNode()?a.drawNode(e,t,n,r,i,o):a.drawEdge(e,t,n,r,i,o)};Ft.drawElementOverlay=function(e,t){var n=this;t.isNode()?n.drawNodeOverlay(e,t):n.drawEdgeOverlay(e,t)};Ft.drawElementUnderlay=function(e,t){var n=this;t.isNode()?n.drawNodeUnderlay(e,t):n.drawEdgeUnderlay(e,t)};Ft.drawCachedElementPortion=function(e,t,n,r,i,o,a,l){var s=this,u=n.getBoundingBox(t);if(!(u.w===0||u.h===0)){var c=n.getElement(t,u,r,i,o);if(c!=null){var h=l(s,t);if(h===0)return;var g=a(s,t),d=u.x1,p=u.y1,v=u.w,b=u.h,f,m,x,T,_;if(g!==0){var C=n.getRotationPoint(t);x=C.x,T=C.y,e.translate(x,T),e.rotate(g),_=s.getImgSmoothing(e),_||s.setImgSmoothing(e,!0);var y=n.getRotationOffset(t);f=y.x,m=y.y}else f=d,m=p;var w;h!==1&&(w=e.globalAlpha,e.globalAlpha=w*h),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,f,m,v,b),h!==1&&(e.globalAlpha=w),g!==0&&(e.rotate(-g),e.translate(-x,-T),_||s.setImgSmoothing(e,!1))}else n.drawElement(e,t)}};var Nv=function(){return 0},Mv=function(e,t){return e.getTextAngle(t,null)},Sv=function(e,t){return e.getTextAngle(t,"source")},Ov=function(e,t){return e.getTextAngle(t,"target")},Iv=function(e,t){return t.effectiveOpacity()},Xi=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Ft.drawCachedElement=function(e,t,n,r,i,o){var a=this,l=a.data,s=l.eleTxrCache,u=l.lblTxrCache,c=l.slbTxrCache,h=l.tlbTxrCache,g=t.boundingBox(),d=o===!0?s.reasons.highQuality:null;if(!(g.w===0||g.h===0||!t.visible())&&(!r||ma(g,r))){var p=t.isEdge(),v=t.element()._private.rscratch.badLine;a.drawElementUnderlay(e,t),a.drawCachedElementPortion(e,t,s,n,i,d,Nv,Iv),(!p||!v)&&a.drawCachedElementPortion(e,t,u,n,i,d,Mv,Xi),p&&!v&&(a.drawCachedElementPortion(e,t,c,n,i,d,Sv,Xi),a.drawCachedElementPortion(e,t,h,n,i,d,Ov,Xi)),a.drawElementOverlay(e,t)}};Ft.drawElements=function(e,t){for(var n=this,r=0;r<t.length;r++){var i=t[r];n.drawElement(e,i)}};Ft.drawCachedElements=function(e,t,n,r){for(var i=this,o=0;o<t.length;o++){var a=t[o];i.drawCachedElement(e,a,n,r)}};Ft.drawCachedNodes=function(e,t,n,r){for(var i=this,o=0;o<t.length;o++){var a=t[o];a.isNode()&&i.drawCachedElement(e,a,n,r)}};Ft.drawLayeredElements=function(e,t,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(t,n);if(o)for(var a=0;a<o.length;a++){var l=o[a],s=l.bb;s.w===0||s.h===0||e.drawImage(l.canvas,s.x1,s.y1,s.w,s.h)}else i.drawCachedElements(e,t,n,r)};var jt={};jt.drawEdge=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,l=t._private.rscratch;if(!(o&&!t.visible())&&!(l.badLine||l.allpts==null||isNaN(l.allpts[0]))){var s;n&&(s=n,e.translate(-s.x1,-s.y1));var u=o?t.pstyle("opacity").value:1,c=o?t.pstyle("line-opacity").value:1,h=t.pstyle("curve-style").value,g=t.pstyle("line-style").value,d=t.pstyle("width").pfValue,p=t.pstyle("line-cap").value,v=u*c,b=u*c,f=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;h==="straight-triangle"?(a.eleStrokeStyle(e,t,A),a.drawEdgeTrianglePath(t,e,l.allpts)):(e.lineWidth=d,e.lineCap=p,a.eleStrokeStyle(e,t,A),a.drawEdgePath(t,e,l.allpts,g),e.lineCap="butt")},m=function(){i&&a.drawEdgeOverlay(e,t)},x=function(){i&&a.drawEdgeUnderlay(e,t)},T=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;a.drawArrowheads(e,t,A)},_=function(){a.drawElementText(e,t,null,r)};e.lineJoin="round";var C=t.pstyle("ghost").value==="yes";if(C){var y=t.pstyle("ghost-offset-x").pfValue,w=t.pstyle("ghost-offset-y").pfValue,E=t.pstyle("ghost-opacity").value,D=v*E;e.translate(y,w),f(D),T(D),e.translate(-y,-w)}x(),f(),T(),m(),_(),n&&e.translate(s.x1,s.y1)}};var Nl=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(r!==0){var i=this,o=i.usePaths(),a=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,s=2*l,u=n.pstyle("".concat(e,"-color")).value;t.lineWidth=s,a.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,u[0],u[1],u[2],r),i.drawEdgePath(n,t,a.allpts,"solid")}}}};jt.drawEdgeOverlay=Nl("overlay");jt.drawEdgeUnderlay=Nl("underlay");jt.drawEdgePath=function(e,t,n,r){var i=e._private.rscratch,o=t,a,l=!1,s=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(s){var h=n.join("$"),g=i.pathCacheKey&&i.pathCacheKey===h;g?(a=t=i.pathCache,l=!0):(a=t=new Path2D,i.pathCacheKey=h,i.pathCache=a)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(u),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!l&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)t.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"haystack":for(var p=2;p+1<n.length;p+=2)t.lineTo(n[p],n[p+1]);break;case"segments":if(i.isRound){var v=pu(i.roundCorners),b;try{for(v.s();!(b=v.n()).done;){var f=b.value;bl(t,f)}}catch(x){v.e(x)}finally{v.f()}t.lineTo(n[n.length-2],n[n.length-1])}else for(var m=2;m+1<n.length;m+=2)t.lineTo(n[m],n[m+1]);break}t=o,s?t.stroke(a):t.stroke(),t.setLineDash&&t.setLineDash([])};jt.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var r=e.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var o=[n[i+2]-n[i],n[i+3]-n[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=[o[1]/a,-o[0]/a],s=[l[0]*r/2,l[1]*r/2];t.beginPath(),t.moveTo(n[i]-s[0],n[i+1]-s[1]),t.lineTo(n[i]+s[0],n[i+1]+s[1]),t.lineTo(n[i+2],n[i+3]),t.closePath(),t.fill()}};jt.drawArrowheads=function(e,t,n){var r=t._private.rscratch,i=r.edgeType==="haystack";i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)};jt.drawArrowhead=function(e,t,n,r,i,o,a){if(!(isNaN(r)||r==null||isNaN(i)||i==null||isNaN(o)||o==null)){var l=this,s=t.pstyle(n+"-arrow-shape").value;if(s!=="none"){var u=t.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",c=t.pstyle(n+"-arrow-fill").value,h=t.pstyle("width").pfValue,g=t.pstyle(n+"-arrow-width"),d=g.value==="match-line"?h:g.pfValue;g.units==="%"&&(d*=h);var p=t.pstyle("opacity").value;a===void 0&&(a=p);var v=e.globalCompositeOperation;(a!==1||c==="hollow")&&(e.globalCompositeOperation="destination-out",l.colorFillStyle(e,255,255,255,1),l.colorStrokeStyle(e,255,255,255,1),l.drawArrowShape(t,e,u,h,s,d,r,i,o),e.globalCompositeOperation=v);var b=t.pstyle(n+"-arrow-color").value;l.colorFillStyle(e,b[0],b[1],b[2],a),l.colorStrokeStyle(e,b[0],b[1],b[2],a),l.drawArrowShape(t,e,c,h,s,d,r,i,o)}}};jt.drawArrowShape=function(e,t,n,r,i,o,a,l,s){var u=this,c=this.usePaths()&&i!=="triangle-cross",h=!1,g,d=t,p={x:a,y:l},v=e.pstyle("arrow-scale").value,b=this.getArrowWidth(r,v),f=u.arrowShapes[i];if(c){var m=u.arrowPathCache=u.arrowPathCache||[],x=gn(i),T=m[x];T!=null?(g=t=T,h=!0):(g=t=new Path2D,m[x]=g)}h||(t.beginPath&&t.beginPath(),c?f.draw(t,1,0,{x:0,y:0},1):f.draw(t,b,s,p,r),t.closePath&&t.closePath()),t=d,c&&(t.translate(a,l),t.rotate(s),t.scale(b,b)),(n==="filled"||n==="both")&&(c?t.fill(g):t.fill()),(n==="hollow"||n==="both")&&(t.lineWidth=o/(c?b:1),t.lineJoin="miter",c?t.stroke(g):t.stroke()),c&&(t.scale(1/b,1/b),t.rotate(-s),t.translate(-a,-l))};var Oa={};Oa.safeDrawImage=function(e,t,n,r,i,o,a,l,s,u){if(!(i<=0||o<=0||s<=0||u<=0))try{e.drawImage(t,n,r,i,o,a,l,s,u)}catch(c){ke(c)}};Oa.drawInscribedImage=function(e,t,n,r,i){var o=this,a=n.position(),l=a.x,s=a.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),h=c(n,"background-fit","value",r),g=c(n,"background-repeat","value",r),d=n.width(),p=n.height(),v=n.padding()*2,b=d+(c(n,"background-width-relative-to","value",r)==="inner"?0:v),f=p+(c(n,"background-height-relative-to","value",r)==="inner"?0:v),m=n._private.rscratch,x=c(n,"background-clip","value",r),T=x==="node",_=c(n,"background-image-opacity","value",r)*i,C=c(n,"background-image-smoothing","value",r),y=n.pstyle("corner-radius").value;y!=="auto"&&(y=n.pstyle("corner-radius").pfValue);var w=t.width||t.cachedW,E=t.height||t.cachedH;(w==null||E==null)&&(document.body.appendChild(t),w=t.cachedW=t.width||t.offsetWidth,E=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var D=w,A=E;if(c(n,"background-width","value",r)!=="auto"&&(c(n,"background-width","units",r)==="%"?D=c(n,"background-width","pfValue",r)*b:D=c(n,"background-width","pfValue",r)),c(n,"background-height","value",r)!=="auto"&&(c(n,"background-height","units",r)==="%"?A=c(n,"background-height","pfValue",r)*f:A=c(n,"background-height","pfValue",r)),!(D===0||A===0)){if(h==="contain"){var k=Math.min(b/D,f/A);D*=k,A*=k}else if(h==="cover"){var k=Math.max(b/D,f/A);D*=k,A*=k}var M=l-b/2,L=c(n,"background-position-x","units",r),O=c(n,"background-position-x","pfValue",r);L==="%"?M+=(b-D)*O:M+=O;var R=c(n,"background-offset-x","units",r),I=c(n,"background-offset-x","pfValue",r);R==="%"?M+=(b-D)*I:M+=I;var S=s-f/2,P=c(n,"background-position-y","units",r),z=c(n,"background-position-y","pfValue",r);P==="%"?S+=(f-A)*z:S+=z;var F=c(n,"background-offset-y","units",r),G=c(n,"background-offset-y","pfValue",r);F==="%"?S+=(f-A)*G:S+=G,m.pathCache&&(M-=l,S-=s,l=0,s=0);var Y=e.globalAlpha;e.globalAlpha=_;var W=o.getImgSmoothing(e),Q=!1;if(C==="no"&&W?(o.setImgSmoothing(e,!1),Q=!0):C==="yes"&&!W&&(o.setImgSmoothing(e,!0),Q=!0),g==="no-repeat")T&&(e.save(),m.pathCache?e.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(e,l,s,b,f,y,m),e.clip())),o.safeDrawImage(e,t,0,0,w,E,M,S,D,A),T&&e.restore();else{var B=e.createPattern(t,g);e.fillStyle=B,o.nodeShapes[o.getNodeShape(n)].draw(e,l,s,b,f,y,m),e.translate(M,S),e.fill(),e.translate(-M,-S)}e.globalAlpha=Y,Q&&o.setImgSmoothing(e,W)}};var En={};En.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(ya(n*r));t=Math.pow(2,i)}var o=e.pstyle("font-size").pfValue*t,a=e.pstyle("min-zoomed-font-size").pfValue;return!(o<a)};En.drawElementText=function(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(r==null){if(o&&!a.eleTextBiggerThanMin(t))return}else if(r===!1)return;if(t.isNode()){var l=t.pstyle("label");if(!l||!l.value)return;var s=a.getLabelJustification(t);e.textAlign=s,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,c=t.pstyle("label"),h=t.pstyle("source-label"),g=t.pstyle("target-label");if(u||(!c||!c.value)&&(!h||!h.value)&&(!g||!g.value))return;e.textAlign="center",e.textBaseline="bottom"}var d=!n,p;n&&(p=n,e.translate(-p.x1,-p.y1)),i==null?(a.drawText(e,t,null,d,o),t.isEdge()&&(a.drawText(e,t,"source",d,o),a.drawText(e,t,"target",d,o))):a.drawText(e,t,i,d,o),n&&e.translate(p.x1,p.y1)};En.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t};En.setupTextStyle=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",o=t.pstyle("font-family").strValue,a=t.pstyle("font-weight").strValue,l=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,s=t.pstyle("text-outline-opacity").value*l,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=r+" "+a+" "+i+" "+o,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],l),this.colorStrokeStyle(e,c[0],c[1],c[2],s)};function Ui(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),a?e.stroke():e.fill()}En.getTextAngle=function(e,t){var n,r=e._private,i=r.rscratch,o=t?t+"-":"",a=e.pstyle(o+"text-rotation"),l=At(i,"labelAngle",t);return a.strValue==="autorotate"?n=e.isEdge()?l:0:a.strValue==="none"?n=0:n=a.pfValue,n};En.drawText=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=t._private,a=o.rscratch,l=i?t.effectiveOpacity():1;if(!(i&&(l===0||t.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var s=At(a,"labelX",n),u=At(a,"labelY",n),c,h,g=this.getLabelText(t,n);if(g!=null&&g!==""&&!isNaN(s)&&!isNaN(u)){this.setupTextStyle(e,t,i);var d=n?n+"-":"",p=At(a,"labelWidth",n),v=At(a,"labelHeight",n),b=t.pstyle(d+"text-margin-x").pfValue,f=t.pstyle(d+"text-margin-y").pfValue,m=t.isEdge(),x=t.pstyle("text-halign").value,T=t.pstyle("text-valign").value;m&&(x="center",T="center"),s+=b,u+=f;var _;switch(r?_=this.getTextAngle(t,n):_=0,_!==0&&(c=s,h=u,e.translate(c,h),e.rotate(_),s=0,u=0),T){case"top":break;case"center":u+=v/2;break;case"bottom":u+=v;break}var C=t.pstyle("text-background-opacity").value,y=t.pstyle("text-border-opacity").value,w=t.pstyle("text-border-width").pfValue,E=t.pstyle("text-background-padding").pfValue,D=t.pstyle("text-background-shape").strValue,A=D.indexOf("round")===0,k=2;if(C>0||w>0&&y>0){var M=s-E;switch(x){case"left":M-=p;break;case"center":M-=p/2;break}var L=u-v-E,O=p+2*E,R=v+2*E;if(C>0){var I=e.fillStyle,S=t.pstyle("text-background-color").value;e.fillStyle="rgba("+S[0]+","+S[1]+","+S[2]+","+C*l+")",A?Ui(e,M,L,O,R,k):e.fillRect(M,L,O,R),e.fillStyle=I}if(w>0&&y>0){var P=e.strokeStyle,z=e.lineWidth,F=t.pstyle("text-border-color").value,G=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+F[0]+","+F[1]+","+F[2]+","+y*l+")",e.lineWidth=w,e.setLineDash)switch(G){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=w/4,e.setLineDash([]);break;case"solid":e.setLineDash([]);break}if(A?Ui(e,M,L,O,R,k,"stroke"):e.strokeRect(M,L,O,R),G==="double"){var Y=w/2;A?Ui(e,M+Y,L+Y,O-Y*2,R-Y*2,k,"stroke"):e.strokeRect(M+Y,L+Y,O-Y*2,R-Y*2)}e.setLineDash&&e.setLineDash([]),e.lineWidth=z,e.strokeStyle=P}}var W=2*t.pstyle("text-outline-width").pfValue;if(W>0&&(e.lineWidth=W),t.pstyle("text-wrap").value==="wrap"){var Q=At(a,"labelWrapCachedLines",n),B=At(a,"labelLineHeight",n),U=p/2,X=this.getLabelJustification(t);switch(X==="auto"||(x==="left"?X==="left"?s+=-p:X==="center"&&(s+=-U):x==="center"?X==="left"?s+=-U:X==="right"&&(s+=U):x==="right"&&(X==="center"?s+=U:X==="right"&&(s+=p))),T){case"top":u-=(Q.length-1)*B;break;case"center":case"bottom":u-=(Q.length-1)*B;break}for(var $=0;$<Q.length;$++)W>0&&e.strokeText(Q[$],s,u),e.fillText(Q[$],s,u),u+=B}else W>0&&e.strokeText(g,s,u),e.fillText(g,s,u);_!==0&&(e.rotate(-_),e.translate(-c,-h))}}};var $n={};$n.drawNode=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,l,s,u=t._private,c=u.rscratch,h=t.position();if(!(!ne(h.x)||!ne(h.y))&&!(o&&!t.visible())){var g=o?t.effectiveOpacity():1,d=a.usePaths(),p,v=!1,b=t.padding();l=t.width()+2*b,s=t.height()+2*b;var f;n&&(f=n,e.translate(-f.x1,-f.y1));for(var m=t.pstyle("background-image"),x=m.value,T=new Array(x.length),_=new Array(x.length),C=0,y=0;y<x.length;y++){var w=x[y],E=T[y]=w!=null&&w!=="none";if(E){var D=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",y);C++,_[y]=a.getCachedImage(w,D,function(){u.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var A=t.pstyle("background-blacken").value,k=t.pstyle("border-width").pfValue,M=t.pstyle("background-opacity").value*g,L=t.pstyle("border-color").value,O=t.pstyle("border-style").value,R=t.pstyle("border-join").value,I=t.pstyle("border-cap").value,S=t.pstyle("border-position").value,P=t.pstyle("border-dash-pattern").pfValue,z=t.pstyle("border-dash-offset").pfValue,F=t.pstyle("border-opacity").value*g,G=t.pstyle("outline-width").pfValue,Y=t.pstyle("outline-color").value,W=t.pstyle("outline-style").value,Q=t.pstyle("outline-opacity").value*g,B=t.pstyle("outline-offset").value,U=t.pstyle("corner-radius").value;U!=="auto"&&(U=t.pstyle("corner-radius").pfValue);var X=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;a.eleFillStyle(e,t,te)},$=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;a.colorStrokeStyle(e,L[0],L[1],L[2],te)},Z=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q;a.colorStrokeStyle(e,Y[0],Y[1],Y[2],te)},re=function(te,q,ee,pe){var fe=a.nodePathCache=a.nodePathCache||[],le=ys(ee==="polygon"?ee+","+pe.join(","):ee,""+q,""+te,""+U),me=fe[le],se,ue=!1;return me!=null?(se=me,ue=!0,c.pathCache=se):(se=new Path2D,fe[le]=c.pathCache=se),{path:se,cacheHit:ue}},ge=t.pstyle("shape").strValue,de=t.pstyle("shape-polygon-points").pfValue;if(d){e.translate(h.x,h.y);var J=re(l,s,ge,de);p=J.path,v=J.cacheHit}var oe=function(){if(!v){var te=h;d&&(te={x:0,y:0}),a.nodeShapes[a.getNodeShape(t)].draw(p||e,te.x,te.y,l,s,U,c)}d?e.fill(p):e.fill()},ie=function(){for(var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ee=u.backgrounding,pe=0,fe=0;fe<_.length;fe++){var le=t.cy().style().getIndexedStyle(t,"background-image-containment","value",fe);if(q&&le==="over"||!q&&le==="inside"){pe++;continue}T[fe]&&_[fe].complete&&!_[fe].error&&(pe++,a.drawInscribedImage(e,_[fe],t,fe,te))}u.backgrounding=pe!==C,ee!==u.backgrounding&&t.updateStyle(!1)},ce=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;a.hasPie(t)&&(a.drawPie(e,t,q),te&&(d||a.nodeShapes[a.getNodeShape(t)].draw(e,h.x,h.y,l,s,U,c)))},ye=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,q=(A>0?A:-A)*te,ee=A>0?0:255;A!==0&&(a.colorFillStyle(e,ee,ee,ee,q),d?e.fill(p):e.fill())},be=function(){if(k>0){if(e.lineWidth=k,e.lineCap=I,e.lineJoin=R,e.setLineDash)switch(O){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(P),e.lineDashOffset=z;break;case"solid":case"double":e.setLineDash([]);break}if(S!=="center"){if(e.save(),e.lineWidth*=2,S==="inside")d?e.clip(p):e.clip();else{var te=new Path2D;te.rect(-l/2-k,-s/2-k,l+2*k,s+2*k),te.addPath(p),e.clip(te,"evenodd")}d?e.stroke(p):e.stroke(),e.restore()}else d?e.stroke(p):e.stroke();if(O==="double"){e.lineWidth=k/3;var q=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",d?e.stroke(p):e.stroke(),e.globalCompositeOperation=q}e.setLineDash&&e.setLineDash([])}},xe=function(){if(G>0){if(e.lineWidth=G,e.lineCap="butt",e.setLineDash)switch(W){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}var te=h;d&&(te={x:0,y:0});var q=a.getNodeShape(t),ee=k;S==="inside"&&(ee=0),S==="outside"&&(ee*=2);var pe=(l+ee+(G+B))/l,fe=(s+ee+(G+B))/s,le=l*pe,me=s*fe,se=a.nodeShapes[q].points,ue;if(d){var ze=re(le,me,q,se);ue=ze.path}if(q==="ellipse")a.drawEllipsePath(ue||e,te.x,te.y,le,me);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(q)){var Pe=0,lt=0,Ke=0;q==="round-diamond"?Pe=(ee+B+G)*1.4:q==="round-heptagon"?(Pe=(ee+B+G)*1.075,Ke=-(ee/2+B+G)/35):q==="round-hexagon"?Pe=(ee+B+G)*1.12:q==="round-pentagon"?(Pe=(ee+B+G)*1.13,Ke=-(ee/2+B+G)/15):q==="round-tag"?(Pe=(ee+B+G)*1.12,lt=(ee/2+G+B)*.07):q==="round-triangle"&&(Pe=(ee+B+G)*(Math.PI/2),Ke=-(ee+B/2+G)/Math.PI),Pe!==0&&(pe=(l+Pe)/l,le=l*pe,["round-hexagon","round-tag"].includes(q)||(fe=(s+Pe)/s,me=s*fe)),U=U==="auto"?ks(le,me):U;for(var Ge=le/2,ct=me/2,He=U+(ee+G+B)/2,gt=new Array(se.length/2),xt=new Array(se.length/2),ht=0;ht<se.length/2;ht++)gt[ht]={x:te.x+lt+Ge*se[ht*2],y:te.y+Ke+ct*se[ht*2+1]};var wt,Nt,zt,Et,Ye=gt.length;for(Nt=gt[Ye-1],wt=0;wt<Ye;wt++)zt=gt[wt%Ye],Et=gt[(wt+1)%Ye],xt[wt]=Ma(Nt,zt,Et,He),Nt=zt,zt=Et;a.drawRoundPolygonPath(ue||e,te.x+lt,te.y+Ke,l*pe,s*fe,se,xt)}else if(["roundrectangle","round-rectangle"].includes(q))U=U==="auto"?vn(le,me):U,a.drawRoundRectanglePath(ue||e,te.x,te.y,le,me,U+(ee+G+B)/2);else if(["cutrectangle","cut-rectangle"].includes(q))U=U==="auto"?ba():U,a.drawCutRectanglePath(ue||e,te.x,te.y,le,me,null,U+(ee+G+B)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(q))U=U==="auto"?vn(le,me):U,a.drawBottomRoundRectanglePath(ue||e,te.x,te.y,le,me,U+(ee+G+B)/2);else if(q==="barrel")a.drawBarrelPath(ue||e,te.x,te.y,le,me);else if(q.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(q)){var We=(ee+G+B)/l;se=ii(ai(se,We)),a.drawPolygonPath(ue||e,te.x,te.y,l,s,se)}else{var nt=(ee+G+B)/l;se=ii(ai(se,-nt)),a.drawPolygonPath(ue||e,te.x,te.y,l,s,se)}if(d?e.stroke(ue):e.stroke(),W==="double"){e.lineWidth=ee/3;var Mt=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",d?e.stroke(ue):e.stroke(),e.globalCompositeOperation=Mt}e.setLineDash&&e.setLineDash([])}},Le=function(){i&&a.drawNodeOverlay(e,t,h,l,s)},we=function(){i&&a.drawNodeUnderlay(e,t,h,l,s)},Te=function(){a.drawElementText(e,t,null,r)},N=t.pstyle("ghost").value==="yes";if(N){var V=t.pstyle("ghost-offset-x").pfValue,K=t.pstyle("ghost-offset-y").pfValue,H=t.pstyle("ghost-opacity").value,j=H*g;e.translate(V,K),Z(),xe(),X(H*M),oe(),ie(j,!0),$(H*F),be(),ce(A!==0||k!==0),ie(j,!1),ye(j),e.translate(-V,-K)}d&&e.translate(-h.x,-h.y),we(),d&&e.translate(h.x,h.y),Z(),xe(),X(),oe(),ie(g,!0),$(),be(),ce(A!==0||k!==0),ie(g,!1),ye(),d&&e.translate(-h.x,-h.y),Te(),Le(),n&&e.translate(f.x1,f.y1)}};var Ml=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,r,i,o){var a=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-opacity")).value,u=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(s>0){if(r=r||n.position(),i==null||o==null){var g=n.padding();i=n.width()+2*g,o=n.height()+2*g}a.colorFillStyle(t,u[0],u[1],u[2],s),a.nodeShapes[c].draw(t,r.x,r.y,i+l*2,o+l*2,h),t.fill()}}}};$n.drawNodeOverlay=Ml("overlay");$n.drawNodeUnderlay=Ml("underlay");$n.hasPie=function(e){return e=e[0],e._private.hasPie};$n.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var i=t.cy().style(),o=t.pstyle("pie-size"),a=r.x,l=r.y,s=t.width(),u=t.height(),c=Math.min(s,u)/2,h=0,g=this.usePaths();g&&(a=0,l=0),o.units==="%"?c=c*o.pfValue:o.pfValue!==void 0&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var p=t.pstyle("pie-"+d+"-background-size").value,v=t.pstyle("pie-"+d+"-background-color").value,b=t.pstyle("pie-"+d+"-background-opacity").value*n,f=p/100;f+h>1&&(f=1-h);var m=1.5*Math.PI+2*Math.PI*h,x=2*Math.PI*f,T=m+x;p===0||h>=1||h+f>1||(e.beginPath(),e.moveTo(a,l),e.arc(a,l,c,m,T),e.closePath(),this.colorFillStyle(e,v[0],v[1],v[2],b),e.fill(),h+=f)}};var vt={},Pv=100;vt.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t};vt.paintCache=function(e){for(var t=this.paintCaches=this.paintCaches||[],n=!0,r,i=0;i<t.length;i++)if(r=t[i],r.context===e){n=!1;break}return n&&(r={context:e},t.push(r)),r};vt.createGradientStyleFor=function(e,t,n,r,i){var o,a=this.usePaths(),l=n.pstyle(t+"-gradient-stop-colors").value,s=n.pstyle(t+"-gradient-stop-positions").pfValue;if(r==="radial-gradient")if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),g=fn(u,h),d=fn(c,h);o=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(g,d))}else{var p=a?{x:0,y:0}:n.position(),v=n.paddedWidth(),b=n.paddedHeight();o=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(v,b))}else if(n.isEdge()){var f=n.sourceEndpoint(),m=n.targetEndpoint();o=e.createLinearGradient(f.x,f.y,m.x,m.y)}else{var x=a?{x:0,y:0}:n.position(),T=n.paddedWidth(),_=n.paddedHeight(),C=T/2,y=_/2,w=n.pstyle("background-gradient-direction").value;switch(w){case"to-bottom":o=e.createLinearGradient(x.x,x.y-y,x.x,x.y+y);break;case"to-top":o=e.createLinearGradient(x.x,x.y+y,x.x,x.y-y);break;case"to-left":o=e.createLinearGradient(x.x+C,x.y,x.x-C,x.y);break;case"to-right":o=e.createLinearGradient(x.x-C,x.y,x.x+C,x.y);break;case"to-bottom-right":case"to-right-bottom":o=e.createLinearGradient(x.x-C,x.y-y,x.x+C,x.y+y);break;case"to-top-right":case"to-right-top":o=e.createLinearGradient(x.x-C,x.y+y,x.x+C,x.y-y);break;case"to-bottom-left":case"to-left-bottom":o=e.createLinearGradient(x.x+C,x.y-y,x.x-C,x.y+y);break;case"to-top-left":case"to-left-top":o=e.createLinearGradient(x.x+C,x.y+y,x.x-C,x.y-y);break}}if(!o)return null;for(var E=s.length===l.length,D=l.length,A=0;A<D;A++)o.addColorStop(E?s[A]:A/(D-1),"rgba("+l[A][0]+","+l[A][1]+","+l[A][2]+","+i+")");return o};vt.gradientFillStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"background",t,n,r);if(!i)return null;e.fillStyle=i};vt.colorFillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"};vt.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientFillStyle(e,t,r,n);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],n)}};vt.gradientStrokeStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"line",t,n,r);if(!i)return null;e.strokeStyle=i};vt.colorStrokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"};vt.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientStrokeStyle(e,t,r,n);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],n)}};vt.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),i=r[2],o=r[3],a=t.getPixelRatio(),l=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(a=l);var s=i*a,u=o*a,c;if(!(s===t.canvasWidth&&u===t.canvasHeight)){t.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var g=0;g<t.CANVAS_LAYERS;g++)c=n.canvases[g],c.width=s,c.height=u,c.style.width=i+"px",c.style.height=o+"px";for(var g=0;g<t.BUFFER_COUNT;g++)c=n.bufferCanvases[g],c.width=s,c.height=u,c.style.width=i+"px",c.style.height=o+"px";t.textureMult=1,a<=1&&(c=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,c.width=s*t.textureMult,c.height=u*t.textureMult),t.canvasWidth=s,t.canvasHeight=u}};vt.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})};vt.render=function(e){e=e||ws();var t=e.forcedContext,n=e.drawAllLayers,r=e.drawOnlyNodeLayer,i=e.forcedZoom,o=e.forcedPan,a=this,l=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio,s=a.cy,u=a.data,c=u.canvasNeedsRedraw,h=a.textureOnViewport&&!t&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),g=e.motionBlur!==void 0?e.motionBlur:a.motionBlur,d=a.motionBlurPxRatio,p=s.hasCompoundNodes(),v=a.hoverData.draggingEles,b=!!(a.hoverData.selecting||a.touchData.selecting);g=g&&!t&&a.motionBlurEnabled&&!b;var f=g;t||(a.prevPxRatio!==l&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=l),!t&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),g&&(a.mbFrames==null&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(f=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!h&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var m=s.style(),x=s.zoom(),T=i!==void 0?i:x,_=s.pan(),C={x:_.x,y:_.y},y={zoom:x,pan:{x:_.x,y:_.y}},w=a.prevViewport,E=w===void 0||y.zoom!==w.zoom||y.pan.x!==w.pan.x||y.pan.y!==w.pan.y;!E&&!(v&&!p)&&(a.motionBlurPxRatio=1),o&&(C=o),T*=l,C.x*=l,C.y*=l;var D=a.getCachedZSortedEles();function A(J,oe,ie,ce,ye){var be=J.globalCompositeOperation;J.globalCompositeOperation="destination-out",a.colorFillStyle(J,255,255,255,a.motionBlurTransparency),J.fillRect(oe,ie,ce,ye),J.globalCompositeOperation=be}function k(J,oe){var ie,ce,ye,be;!a.clearingMotionBlur&&(J===u.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]||J===u.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG])?(ie={x:_.x*d,y:_.y*d},ce=x*d,ye=a.canvasWidth*d,be=a.canvasHeight*d):(ie=C,ce=T,ye=a.canvasWidth,be=a.canvasHeight),J.setTransform(1,0,0,1,0,0),oe==="motionBlur"?A(J,0,0,ye,be):!t&&(oe===void 0||oe)&&J.clearRect(0,0,ye,be),n||(J.translate(ie.x,ie.y),J.scale(ce,ce)),o&&J.translate(o.x,o.y),i&&J.scale(i,i)}if(h||(a.textureDrawLastFrame=!1),h){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=s.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var M=a.data.bufferContexts[a.TEXTURE_BUFFER];M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:M,drawOnlyNodeLayer:!0,forcedPxRatio:l*a.textureMult});var y=a.textureCache.viewport={zoom:s.zoom(),pan:s.pan(),width:a.canvasWidth,height:a.canvasHeight};y.mpan={x:(0-y.pan.x)/y.zoom,y:(0-y.pan.y)/y.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var L=u.contexts[a.NODE],O=a.textureCache.texture,y=a.textureCache.viewport;L.setTransform(1,0,0,1,0,0),g?A(L,0,0,y.width,y.height):L.clearRect(0,0,y.width,y.height);var R=m.core("outside-texture-bg-color").value,I=m.core("outside-texture-bg-opacity").value;a.colorFillStyle(L,R[0],R[1],R[2],I),L.fillRect(0,0,y.width,y.height);var x=s.zoom();k(L,!1),L.clearRect(y.mpan.x,y.mpan.y,y.width/y.zoom/l,y.height/y.zoom/l),L.drawImage(O,y.mpan.x,y.mpan.y,y.width/y.zoom/l,y.height/y.zoom/l)}else a.textureOnViewport&&!t&&(a.textureCache=null);var S=s.extent(),P=a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles||a.cy.animated(),z=a.hideEdgesOnViewport&&P,F=[];if(F[a.NODE]=!c[a.NODE]&&g&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,F[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),F[a.DRAG]=!c[a.DRAG]&&g&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,F[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||n||r||F[a.NODE]){var G=g&&!F[a.NODE]&&d!==1,L=t||(G?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:u.contexts[a.NODE]),Y=g&&!G?"motionBlur":void 0;k(L,Y),z?a.drawCachedNodes(L,D.nondrag,l,S):a.drawLayeredElements(L,D.nondrag,l,S),a.debug&&a.drawDebugPoints(L,D.nondrag),!n&&!g&&(c[a.NODE]=!1)}if(!r&&(c[a.DRAG]||n||F[a.DRAG])){var G=g&&!F[a.DRAG]&&d!==1,L=t||(G?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:u.contexts[a.DRAG]);k(L,g&&!G?"motionBlur":void 0),z?a.drawCachedNodes(L,D.drag,l,S):a.drawCachedElements(L,D.drag,l,S),a.debug&&a.drawDebugPoints(L,D.drag),!n&&!g&&(c[a.DRAG]=!1)}if(a.showFps||!r&&c[a.SELECT_BOX]&&!n){var L=t||u.contexts[a.SELECT_BOX];if(k(L),a.selection[4]==1&&(a.hoverData.selecting||a.touchData.selecting)){var x=a.cy.zoom(),W=m.core("selection-box-border-width").value/x;L.lineWidth=W,L.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",L.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),W>0&&(L.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",L.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(u.bgActivePosistion&&!a.hoverData.selecting){var x=a.cy.zoom(),Q=u.bgActivePosistion;L.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",L.beginPath(),L.arc(Q.x,Q.y,m.core("active-bg-size").pfValue/x,0,2*Math.PI),L.fill()}var B=a.lastRedrawTime;if(a.showFps&&B){B=Math.round(B);var U=Math.round(1e3/B);L.setTransform(1,0,0,1,0,0),L.fillStyle="rgba(255, 0, 0, 0.75)",L.strokeStyle="rgba(255, 0, 0, 0.75)",L.lineWidth=1,L.fillText("1 frame = "+B+" ms = "+U+" fps",0,20);var X=60;L.strokeRect(0,30,250,20),L.fillRect(0,30,250*Math.min(U/X,1),20)}n||(c[a.SELECT_BOX]=!1)}if(g&&d!==1){var $=u.contexts[a.NODE],Z=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],re=u.contexts[a.DRAG],ge=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],de=function(J,oe,ie){J.setTransform(1,0,0,1,0,0),ie||!f?J.clearRect(0,0,a.canvasWidth,a.canvasHeight):A(J,0,0,a.canvasWidth,a.canvasHeight);var ce=d;J.drawImage(oe,0,0,a.canvasWidth*ce,a.canvasHeight*ce,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||F[a.NODE])&&(de($,Z,F[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||F[a.DRAG])&&(de(re,ge,F[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=y,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),g&&(a.motionBlurTimeout=setTimeout(function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!h,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()},Pv)),t||s.emit("render")};var on={};on.drawPolygonPath=function(e,t,n,r,i,o){var a=r/2,l=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*o[0],n+l*o[1]);for(var s=1;s<o.length/2;s++)e.lineTo(t+a*o[s*2],n+l*o[s*2+1]);e.closePath()};on.drawRoundPolygonPath=function(e,t,n,r,i,o,a){a.forEach(function(l){return bl(e,l)}),e.closePath()};on.drawRoundRectanglePath=function(e,t,n,r,i,o){var a=r/2,l=i/2,s=o==="auto"?vn(r,i):Math.min(o,l,a);e.beginPath&&e.beginPath(),e.moveTo(t,n-l),e.arcTo(t+a,n-l,t+a,n,s),e.arcTo(t+a,n+l,t,n+l,s),e.arcTo(t-a,n+l,t-a,n,s),e.arcTo(t-a,n-l,t,n-l,s),e.lineTo(t,n-l),e.closePath()};on.drawBottomRoundRectanglePath=function(e,t,n,r,i,o){var a=r/2,l=i/2,s=o==="auto"?vn(r,i):o;e.beginPath&&e.beginPath(),e.moveTo(t,n-l),e.lineTo(t+a,n-l),e.lineTo(t+a,n),e.arcTo(t+a,n+l,t,n+l,s),e.arcTo(t-a,n+l,t-a,n,s),e.lineTo(t-a,n-l),e.lineTo(t,n-l),e.closePath()};on.drawCutRectanglePath=function(e,t,n,r,i,o,a){var l=r/2,s=i/2,u=a==="auto"?ba():a;e.beginPath&&e.beginPath(),e.moveTo(t-l+u,n-s),e.lineTo(t+l-u,n-s),e.lineTo(t+l,n-s+u),e.lineTo(t+l,n+s-u),e.lineTo(t+l-u,n+s),e.lineTo(t-l+u,n+s),e.lineTo(t-l,n+s-u),e.lineTo(t-l,n-s+u),e.closePath()};on.drawBarrelPath=function(e,t,n,r,i){var o=r/2,a=i/2,l=t-o,s=t+o,u=n-a,c=n+a,h=qi(r,i),g=h.widthOffset,d=h.heightOffset,p=h.ctrlPtOffsetPct*g;e.beginPath&&e.beginPath(),e.moveTo(l,u+d),e.lineTo(l,c-d),e.quadraticCurveTo(l+p,c,l+g,c),e.lineTo(s-g,c),e.quadraticCurveTo(s-p,c,s,c-d),e.lineTo(s,u+d),e.quadraticCurveTo(s-p,u,s-g,u),e.lineTo(l+g,u),e.quadraticCurveTo(l+p,u,l,u+d),e.closePath()};var Ko=Math.sin(0),Zo=Math.cos(0),ia={},aa={},Sl=Math.PI/40;for(var kn=0*Math.PI;kn<2*Math.PI;kn+=Sl)ia[kn]=Math.sin(kn),aa[kn]=Math.cos(kn);on.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,l=r/2,s=i/2,u=0*Math.PI;u<2*Math.PI;u+=Sl)o=t-l*ia[u]*Ko+l*aa[u]*Zo,a=n+s*aa[u]*Ko+s*ia[u]*Zo,u===0?e.moveTo(o,a):e.lineTo(o,a);e.closePath()};var Lr={};Lr.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]};Lr.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements(),r=n.boundingBox(),i=this.findContainerClientCoords(),o=e.full?Math.ceil(r.w):i[2],a=e.full?Math.ceil(r.h):i[3],l=ne(e.maxWidth)||ne(e.maxHeight),s=this.getPixelRatio(),u=1;if(e.scale!==void 0)o*=e.scale,a*=e.scale,u=e.scale;else if(l){var c=1/0,h=1/0;ne(e.maxWidth)&&(c=u*e.maxWidth/o),ne(e.maxHeight)&&(h=u*e.maxHeight/a),u=Math.min(c,h),o*=u,a*=u}l||(o*=s,a*=s,u*=s);var g=document.createElement("canvas");g.width=o,g.height=a,g.style.width=o+"px",g.style.height=a+"px";var d=g.getContext("2d");if(o>0&&a>0){d.clearRect(0,0,o,a),d.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(e.full)d.translate(-r.x1*u,-r.y1*u),d.scale(u,u),this.drawElements(d,p),d.scale(1/u,1/u),d.translate(r.x1*u,r.y1*u);else{var v=t.pan(),b={x:v.x*u,y:v.y*u};u*=t.zoom(),d.translate(b.x,b.y),d.scale(u,u),this.drawElements(d,p),d.scale(1/u,1/u),d.translate(-b.x,-b.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,o,a),d.fill())}return g};function Rv(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:t})}function Qo(e){var t=e.indexOf(",");return e.substr(t+1)}function Ol(e,t,n){var r=function(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new Yn(function(i,o){try{t.toBlob(function(a){a!=null?i(a):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(a){o(a)}});case"blob":return Rv(Qo(r()),n);case"base64":return Qo(r());case"base64uri":default:return r()}}Lr.png=function(e){return Ol(e,this.bufferCanvasImage(e),"image/png")};Lr.jpg=function(e){return Ol(e,this.bufferCanvasImage(e),"image/jpeg")};var Il={};Il.nodeShapeImpl=function(e,t,n,r,i,o,a,l){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,i,o);case"polygon":return this.drawPolygonPath(t,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(t,n,r,i,o,a,l);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,i,o,l);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,i,o,a,l);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,i,o,l);case"barrel":return this.drawBarrelPath(t,n,r,i,o)}};var Bv=Pl,Ce=Pl.prototype;Ce.CANVAS_LAYERS=3;Ce.SELECT_BOX=0;Ce.DRAG=1;Ce.NODE=2;Ce.BUFFER_COUNT=3;Ce.TEXTURE_BUFFER=0;Ce.MOTIONBLUR_BUFFER_NODE=1;Ce.MOTIONBLUR_BUFFER_DRAG=2;function Pl(e){var t=this;t.data={canvases:new Array(Ce.CANVAS_LAYERS),contexts:new Array(Ce.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ce.CANVAS_LAYERS),bufferCanvases:new Array(Ce.BUFFER_COUNT),bufferContexts:new Array(Ce.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",r="rgba(0,0,0,0)";t.data.canvasContainer=document.createElement("div");var i=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=r,i.position="relative",i.zIndex="0",i.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[n]=r;var a={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};_u()&&(a["-ms-touch-action"]="none",a["touch-action"]="none");for(var l=0;l<Ce.CANVAS_LAYERS;l++){var s=t.data.canvases[l]=document.createElement("canvas");t.data.contexts[l]=s.getContext("2d"),Object.keys(a).forEach(function(B){s.style[B]=a[B]}),s.style.position="absolute",s.setAttribute("data-id","layer"+l),s.style.zIndex=String(Ce.CANVAS_LAYERS-l),t.data.canvasContainer.appendChild(s),t.data.canvasNeedsRedraw[l]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[Ce.NODE].setAttribute("data-id","layer"+Ce.NODE+"-node"),t.data.canvases[Ce.SELECT_BOX].setAttribute("data-id","layer"+Ce.SELECT_BOX+"-selectbox"),t.data.canvases[Ce.DRAG].setAttribute("data-id","layer"+Ce.DRAG+"-drag");for(var l=0;l<Ce.BUFFER_COUNT;l++)t.data.bufferCanvases[l]=document.createElement("canvas"),t.data.bufferContexts[l]=t.data.bufferCanvases[l].getContext("2d"),t.data.bufferCanvases[l].style.position="absolute",t.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),t.data.bufferCanvases[l].style.zIndex=String(-l-1),t.data.bufferCanvases[l].style.visibility="hidden";t.pathsEnabled=!0;var u=pt(),c=function(B){return{x:(B.x1+B.x2)/2,y:(B.y1+B.y2)/2}},h=function(B){return{x:-B.w/2,y:-B.h/2}},g=function(B){var U=B[0]._private,X=U.oldBackgroundTimestamp===U.backgroundTimestamp;return!X},d=function(B){return B[0]._private.nodeKey},p=function(B){return B[0]._private.labelStyleKey},v=function(B){return B[0]._private.sourceLabelStyleKey},b=function(B){return B[0]._private.targetLabelStyleKey},f=function(B,U,X,$,Z){return t.drawElement(B,U,X,!1,!1,Z)},m=function(B,U,X,$,Z){return t.drawElementText(B,U,X,$,"main",Z)},x=function(B,U,X,$,Z){return t.drawElementText(B,U,X,$,"source",Z)},T=function(B,U,X,$,Z){return t.drawElementText(B,U,X,$,"target",Z)},_=function(B){return B.boundingBox(),B[0]._private.bodyBounds},C=function(B){return B.boundingBox(),B[0]._private.labelBounds.main||u},y=function(B){return B.boundingBox(),B[0]._private.labelBounds.source||u},w=function(B){return B.boundingBox(),B[0]._private.labelBounds.target||u},E=function(B,U){return U},D=function(B){return c(_(B))},A=function(B,U,X){var $=B?B+"-":"";return{x:U.x+X.pstyle($+"text-margin-x").pfValue,y:U.y+X.pstyle($+"text-margin-y").pfValue}},k=function(B,U,X){var $=B[0]._private.rscratch;return{x:$[U],y:$[X]}},M=function(B){return A("",k(B,"labelX","labelY"),B)},L=function(B){return A("source",k(B,"sourceLabelX","sourceLabelY"),B)},O=function(B){return A("target",k(B,"targetLabelX","targetLabelY"),B)},R=function(B){return h(_(B))},I=function(B){return h(y(B))},S=function(B){return h(w(B))},P=function(B){var U=C(B),X=h(C(B));if(B.isNode()){switch(B.pstyle("text-halign").value){case"left":X.x=-U.w;break;case"right":X.x=0;break}switch(B.pstyle("text-valign").value){case"top":X.y=-U.h;break;case"bottom":X.y=0;break}}return X},z=t.data.eleTxrCache=new sr(t,{getKey:d,doesEleInvalidateKey:g,drawElement:f,getBoundingBox:_,getRotationPoint:D,getRotationOffset:R,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),F=t.data.lblTxrCache=new sr(t,{getKey:p,drawElement:m,getBoundingBox:C,getRotationPoint:M,getRotationOffset:P,isVisible:E}),G=t.data.slbTxrCache=new sr(t,{getKey:v,drawElement:x,getBoundingBox:y,getRotationPoint:L,getRotationOffset:I,isVisible:E}),Y=t.data.tlbTxrCache=new sr(t,{getKey:b,drawElement:T,getBoundingBox:w,getRotationPoint:O,getRotationOffset:S,isVisible:E}),W=t.data.lyrTxrCache=new kl(t);t.onUpdateEleCalcs(function(B,U){z.invalidateElements(U),F.invalidateElements(U),G.invalidateElements(U),Y.invalidateElements(U),W.invalidateElements(U);for(var X=0;X<U.length;X++){var $=U[X]._private;$.oldBackgroundTimestamp=$.backgroundTimestamp}});var Q=function(B){for(var U=0;U<B.length;U++)W.enqueueElementRefinement(B[U].ele)};z.onDequeue(Q),F.onDequeue(Q),G.onDequeue(Q),Y.onDequeue(Q)}Ce.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[Ce.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[Ce.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[Ce.SELECT_BOX]=t;break}};var Fv=typeof Path2D<"u";Ce.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=!!e};Ce.usePaths=function(){return Fv&&this.pathsEnabled};Ce.setImgSmoothing=function(e,t){e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)};Ce.getImgSmoothing=function(e){return e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled};Ce.makeOffscreenCanvas=function(e,t){var n;return(typeof OffscreenCanvas>"u"?"undefined":je(OffscreenCanvas))!=="undefined"?n=new OffscreenCanvas(e,t):(n=document.createElement("canvas"),n.width=e,n.height=t),n};[Ll,Ft,jt,Oa,En,$n,vt,on,Lr,Il].forEach(function(e){ve(Ce,e)});var zv=[{name:"null",impl:vl},{name:"base",impl:Dl},{name:"canvas",impl:Bv}],Gv=[{type:"layout",extensions:qf},{type:"renderer",extensions:zv}],Rl={},Bl={};function Fl(e,t,n){var r=n,i=function(y){ke("Can not register `"+t+"` for `"+e+"` since `"+y+"` already exists in the prototype and can not be overridden")};if(e==="core"){if(xr.prototype[t])return i(t);xr.prototype[t]=n}else if(e==="collection"){if(Je.prototype[t])return i(t);Je.prototype[t]=n}else if(e==="layout"){for(var o=function(y){this.options=y,n.call(this,y),_e(this._private)||(this._private={}),this._private.cy=y.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),l=[],s=0;s<l.length;s++){var u=l[s];a[u]=a[u]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var y=this.options;if(y&&y.animate){var w=this.animations;if(w)for(var E=0;E<w.length;E++)w[E].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(y){return y._private.cy},g={addEventFields:function(y,w){w.layout=y,w.cy=h(y),w.target=y},bubble:function(){return!0},parent:function(y){return h(y)}};ve(a,{createEmitter:function(){return this._private.emitter=new Ei(g,this),this},emitter:function(){return this._private.emitter},on:function(y,w){return this.emitter().on(y,w),this},one:function(y,w){return this.emitter().one(y,w),this},once:function(y,w){return this.emitter().one(y,w),this},removeListener:function(y,w){return this.emitter().removeListener(y,w),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(y,w){return this.emitter().emit(y,w),this}}),Ae.eventAliasesOn(a),r=o}else if(e==="renderer"&&t!=="null"&&t!=="base"){var d=zl("renderer","base"),p=d.prototype,v=n,b=n.prototype,f=function(){d.apply(this,arguments),v.apply(this,arguments)},m=f.prototype;for(var x in p){var T=p[x],_=b[x]!=null;if(_)return i(x);m[x]=T}for(var C in b)m[C]=b[C];p.clientFunctions.forEach(function(y){m[y]=m[y]||function(){Be("Renderer does not implement `renderer."+y+"()` on its prototype")}}),r=f}else if(e==="__proto__"||e==="constructor"||e==="prototype")return Be(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return cs({map:Rl,keys:[e,t],value:r})}function zl(e,t){return hs({map:Rl,keys:[e,t]})}function Yv(e,t,n,r,i){return cs({map:Bl,keys:[e,t,n,r],value:i})}function Vv(e,t,n,r){return hs({map:Bl,keys:[e,t,n,r]})}var oa=function(){if(arguments.length===2)return zl.apply(null,arguments);if(arguments.length===3)return Fl.apply(null,arguments);if(arguments.length===4)return Vv.apply(null,arguments);if(arguments.length===5)return Yv.apply(null,arguments);Be("Invalid extension access syntax")};xr.prototype.extension=oa;Gv.forEach(function(e){e.extensions.forEach(function(t){Fl(e.type,t.name,t.impl)})});var Gl=function e(){if(!(this instanceof e))return new e;this.length=0},bn=Gl.prototype;bn.instanceString=function(){return"stylesheet"};bn.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this};bn.css=function(e,t){var n=this.length-1;if(he(e))this[n].properties.push({name:e,value:t});else if(_e(e))for(var r=e,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],l=r[a];if(l!=null){var s=rt.properties[a]||rt.properties[di(a)];if(s!=null){var u=s.name,c=l;this[n].properties.push({name:u,value:c})}}}return this};bn.style=bn.css;bn.generateStyle=function(e){var t=new rt(e);return this.appendToStyle(t)};bn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,i=n.properties;e.selector(r);for(var o=0;o<i.length;o++){var a=i[o];e.css(a.name,a.value)}}return e};var Xv="3.29.0",rn=function(e){if(e===void 0&&(e={}),_e(e))return new xr(e);if(he(e))return oa.apply(oa,arguments)};rn.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(rn),e.apply(null,t),this};rn.warnings=function(e){return bs(e)};rn.version=Xv;rn.stylesheet=rn.Stylesheet=Gl;var Yl={exports:{}},Jo={exports:{}},es={exports:{}},ts;function Uv(){return ts||(ts=1,function(e,t){(function(n,r){e.exports=r()})(ua,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.i=function(o){return o},i.d=function(o,a,l){i.o(o,a)||Object.defineProperty(o,a,{configurable:!1,enumerable:!0,get:l})},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=26)}([function(n,r,i){function o(){}o.QUALITY=1,o.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,o.DEFAULT_INCREMENTAL=!1,o.DEFAULT_ANIMATION_ON_LAYOUT=!0,o.DEFAULT_ANIMATION_DURING_LAYOUT=!1,o.DEFAULT_ANIMATION_PERIOD=50,o.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,o.DEFAULT_GRAPH_MARGIN=15,o.NODE_DIMENSIONS_INCLUDE_LABELS=!1,o.SIMPLE_NODE_SIZE=40,o.SIMPLE_NODE_HALF_SIZE=o.SIMPLE_NODE_SIZE/2,o.EMPTY_COMPOUND_NODE_SIZE=40,o.MIN_EDGE_LENGTH=1,o.WORLD_BOUNDARY=1e6,o.INITIAL_WORLD_BOUNDARY=o.WORLD_BOUNDARY/1e3,o.WORLD_CENTER_X=1200,o.WORLD_CENTER_Y=900,n.exports=o},function(n,r,i){var o=i(2),a=i(8),l=i(9);function s(c,h,g){o.call(this,g),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=g,this.bendpoints=[],this.source=c,this.target=h}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];s.prototype.getSource=function(){return this.source},s.prototype.getTarget=function(){return this.target},s.prototype.isInterGraph=function(){return this.isInterGraph},s.prototype.getLength=function(){return this.length},s.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},s.prototype.getBendpoints=function(){return this.bendpoints},s.prototype.getLca=function(){return this.lca},s.prototype.getSourceInLca=function(){return this.sourceInLca},s.prototype.getTargetInLca=function(){return this.targetInLca},s.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},s.prototype.getOtherEndInGraph=function(c,h){for(var g=this.getOtherEnd(c),d=h.getGraphManager().getRoot();;){if(g.getOwner()==h)return g;if(g.getOwner()==d)break;g=g.getOwner().getParent()}return null},s.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=a.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=l.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=l.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},s.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=l.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=l.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},n.exports=s},function(n,r,i){function o(a){this.vGraphObject=a}n.exports=o},function(n,r,i){var o=i(2),a=i(10),l=i(13),s=i(0),u=i(16),c=i(4);function h(d,p,v,b){v==null&&b==null&&(b=p),o.call(this,b),d.graphManager!=null&&(d=d.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=b,this.edges=[],this.graphManager=d,v!=null&&p!=null?this.rect=new l(p.x,p.y,v.width,v.height):this.rect=new l}h.prototype=Object.create(o.prototype);for(var g in o)h[g]=o[g];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(d){this.rect.width=d},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(d){this.rect.height=d},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(d,p){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=p.width,this.rect.height=p.height},h.prototype.setCenter=function(d,p){this.rect.x=d-this.rect.width/2,this.rect.y=p-this.rect.height/2},h.prototype.setLocation=function(d,p){this.rect.x=d,this.rect.y=p},h.prototype.moveBy=function(d,p){this.rect.x+=d,this.rect.y+=p},h.prototype.getEdgeListToNode=function(d){var p=[],v=this;return v.edges.forEach(function(b){if(b.target==d){if(b.source!=v)throw"Incorrect edge source!";p.push(b)}}),p},h.prototype.getEdgesBetween=function(d){var p=[],v=this;return v.edges.forEach(function(b){if(!(b.source==v||b.target==v))throw"Incorrect edge source and/or target";(b.target==d||b.source==d)&&p.push(b)}),p},h.prototype.getNeighborsList=function(){var d=new Set,p=this;return p.edges.forEach(function(v){if(v.source==p)d.add(v.target);else{if(v.target!=p)throw"Incorrect incidency!";d.add(v.source)}}),d},h.prototype.withChildren=function(){var d=new Set,p,v;if(d.add(this),this.child!=null)for(var b=this.child.getNodes(),f=0;f<b.length;f++)p=b[f],v=p.withChildren(),v.forEach(function(m){d.add(m)});return d},h.prototype.getNoOfChildren=function(){var d=0,p;if(this.child==null)d=1;else for(var v=this.child.getNodes(),b=0;b<v.length;b++)p=v[b],d+=p.getNoOfChildren();return d==0&&(d=1),d},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var d,p,v=-s.INITIAL_WORLD_BOUNDARY,b=s.INITIAL_WORLD_BOUNDARY;d=s.WORLD_CENTER_X+u.nextDouble()*(b-v)+v;var f=-s.INITIAL_WORLD_BOUNDARY,m=s.INITIAL_WORLD_BOUNDARY;p=s.WORLD_CENTER_Y+u.nextDouble()*(m-f)+f,this.rect.x=d,this.rect.y=p},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),s.NODE_DIMENSIONS_INCLUDE_LABELS){var p=d.getRight()-d.getLeft(),v=d.getBottom()-d.getTop();this.labelWidth>p&&(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)),this.labelHeight>v&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-v)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-v),this.setHeight(this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(d){var p=this.rect.x;p>s.WORLD_BOUNDARY?p=s.WORLD_BOUNDARY:p<-s.WORLD_BOUNDARY&&(p=-s.WORLD_BOUNDARY);var v=this.rect.y;v>s.WORLD_BOUNDARY?v=s.WORLD_BOUNDARY:v<-s.WORLD_BOUNDARY&&(v=-s.WORLD_BOUNDARY);var b=new c(p,v),f=d.inverseTransformPoint(b);this.setLocation(f.x,f.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},n.exports=h},function(n,r,i){function o(a,l){a==null&&l==null?(this.x=0,this.y=0):(this.x=a,this.y=l)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.setX=function(a){this.x=a},o.prototype.setY=function(a){this.y=a},o.prototype.getDifference=function(a){return new DimensionD(this.x-a.x,this.y-a.y)},o.prototype.getCopy=function(){return new o(this.x,this.y)},o.prototype.translate=function(a){return this.x+=a.width,this.y+=a.height,this},n.exports=o},function(n,r,i){var o=i(2),a=i(10),l=i(0),s=i(6),u=i(3),c=i(1),h=i(13),g=i(12),d=i(11);function p(b,f,m){o.call(this,m),this.estimatedSize=a.MIN_VALUE,this.margin=l.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=b,f!=null&&f instanceof s?this.graphManager=f:f!=null&&f instanceof Layout&&(this.graphManager=f.graphManager)}p.prototype=Object.create(o.prototype);for(var v in o)p[v]=o[v];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(b,f,m){if(f==null&&m==null){var x=b;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(x)>-1)throw"Node already in graph!";return x.owner=this,this.getNodes().push(x),x}else{var T=b;if(!(this.getNodes().indexOf(f)>-1&&this.getNodes().indexOf(m)>-1))throw"Source or target not in graph!";if(!(f.owner==m.owner&&f.owner==this))throw"Both owners must be this graph!";return f.owner!=m.owner?null:(T.source=f,T.target=m,T.isInterGraph=!1,this.getEdges().push(T),f.edges.push(T),m!=f&&m.edges.push(T),T)}},p.prototype.remove=function(b){var f=b;if(b instanceof u){if(f==null)throw"Node is null!";if(!(f.owner!=null&&f.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var m=f.edges.slice(),x,T=m.length,_=0;_<T;_++)x=m[_],x.isInterGraph?this.graphManager.remove(x):x.source.owner.remove(x);var C=this.nodes.indexOf(f);if(C==-1)throw"Node not in owner node list!";this.nodes.splice(C,1)}else if(b instanceof c){var x=b;if(x==null)throw"Edge is null!";if(!(x.source!=null&&x.target!=null))throw"Source and/or target is null!";if(!(x.source.owner!=null&&x.target.owner!=null&&x.source.owner==this&&x.target.owner==this))throw"Source and/or target owner is invalid!";var y=x.source.edges.indexOf(x),w=x.target.edges.indexOf(x);if(!(y>-1&&w>-1))throw"Source and/or target doesn't know this edge!";x.source.edges.splice(y,1),x.target!=x.source&&x.target.edges.splice(w,1);var C=x.source.owner.getEdges().indexOf(x);if(C==-1)throw"Not in owner's edge list!";x.source.owner.getEdges().splice(C,1)}},p.prototype.updateLeftTop=function(){for(var b=a.MAX_VALUE,f=a.MAX_VALUE,m,x,T,_=this.getNodes(),C=_.length,y=0;y<C;y++){var w=_[y];m=w.getTop(),x=w.getLeft(),b>m&&(b=m),f>x&&(f=x)}return b==a.MAX_VALUE?null:(_[0].getParent().paddingLeft!=null?T=_[0].getParent().paddingLeft:T=this.margin,this.left=f-T,this.top=b-T,new g(this.left,this.top))},p.prototype.updateBounds=function(b){for(var f=a.MAX_VALUE,m=-a.MAX_VALUE,x=a.MAX_VALUE,T=-a.MAX_VALUE,_,C,y,w,E,D=this.nodes,A=D.length,k=0;k<A;k++){var M=D[k];b&&M.child!=null&&M.updateBounds(),_=M.getLeft(),C=M.getRight(),y=M.getTop(),w=M.getBottom(),f>_&&(f=_),m<C&&(m=C),x>y&&(x=y),T<w&&(T=w)}var L=new h(f,x,m-f,T-x);f==a.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),D[0].getParent().paddingLeft!=null?E=D[0].getParent().paddingLeft:E=this.margin,this.left=L.x-E,this.right=L.x+L.width+E,this.top=L.y-E,this.bottom=L.y+L.height+E},p.calculateBounds=function(b){for(var f=a.MAX_VALUE,m=-a.MAX_VALUE,x=a.MAX_VALUE,T=-a.MAX_VALUE,_,C,y,w,E=b.length,D=0;D<E;D++){var A=b[D];_=A.getLeft(),C=A.getRight(),y=A.getTop(),w=A.getBottom(),f>_&&(f=_),m<C&&(m=C),x>y&&(x=y),T<w&&(T=w)}var k=new h(f,x,m-f,T-x);return k},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var b=0,f=this.nodes,m=f.length,x=0;x<m;x++){var T=f[x];b+=T.calcEstimatedSize()}return b==0?this.estimatedSize=l.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=b/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var b=this;if(this.nodes.length==0){this.isConnected=!0;return}var f=new d,m=new Set,x=this.nodes[0],T,_,C=x.withChildren();for(C.forEach(function(k){f.push(k),m.add(k)});f.length!==0;){x=f.shift(),T=x.getEdges();for(var y=T.length,w=0;w<y;w++){var E=T[w];if(_=E.getOtherEndInGraph(x,this),_!=null&&!m.has(_)){var D=_.withChildren();D.forEach(function(k){f.push(k),m.add(k)})}}}if(this.isConnected=!1,m.size>=this.nodes.length){var A=0;m.forEach(function(k){k.owner==b&&A++}),A==this.nodes.length&&(this.isConnected=!0)}},n.exports=p},function(n,r,i){var o,a=i(1);function l(s){o=i(5),this.layout=s,this.graphs=[],this.edges=[]}l.prototype.addRoot=function(){var s=this.layout.newGraph(),u=this.layout.newNode(null),c=this.add(s,u);return this.setRootGraph(c),this.rootGraph},l.prototype.add=function(s,u,c,h,g){if(c==null&&h==null&&g==null){if(s==null)throw"Graph is null!";if(u==null)throw"Parent node is null!";if(this.graphs.indexOf(s)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(s),s.parent!=null)throw"Already has a parent!";if(u.child!=null)throw"Already has a child!";return s.parent=u,u.child=s,s}else{g=c,h=u,c=s;var d=h.getOwner(),p=g.getOwner();if(!(d!=null&&d.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(p!=null&&p.getGraphManager()==this))throw"Target not in this graph mgr!";if(d==p)return c.isInterGraph=!1,d.add(c,h,g);if(c.isInterGraph=!0,c.source=h,c.target=g,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},l.prototype.remove=function(s){if(s instanceof o){var u=s;if(u.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(u==this.rootGraph||u.parent!=null&&u.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(u.getEdges());for(var h,g=c.length,d=0;d<g;d++)h=c[d],u.remove(h);var p=[];p=p.concat(u.getNodes());var v;g=p.length;for(var d=0;d<g;d++)v=p[d],u.remove(v);u==this.rootGraph&&this.setRootGraph(null);var b=this.graphs.indexOf(u);this.graphs.splice(b,1),u.parent=null}else if(s instanceof a){if(h=s,h==null)throw"Edge is null!";if(!h.isInterGraph)throw"Not an inter-graph edge!";if(!(h.source!=null&&h.target!=null))throw"Source and/or target is null!";if(!(h.source.edges.indexOf(h)!=-1&&h.target.edges.indexOf(h)!=-1))throw"Source and/or target doesn't know this edge!";var b=h.source.edges.indexOf(h);if(h.source.edges.splice(b,1),b=h.target.edges.indexOf(h),h.target.edges.splice(b,1),!(h.source.owner!=null&&h.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(h.source.owner.getGraphManager().edges.indexOf(h)==-1)throw"Not in owner graph manager's edge list!";var b=h.source.owner.getGraphManager().edges.indexOf(h);h.source.owner.getGraphManager().edges.splice(b,1)}},l.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},l.prototype.getGraphs=function(){return this.graphs},l.prototype.getAllNodes=function(){if(this.allNodes==null){for(var s=[],u=this.getGraphs(),c=u.length,h=0;h<c;h++)s=s.concat(u[h].getNodes());this.allNodes=s}return this.allNodes},l.prototype.resetAllNodes=function(){this.allNodes=null},l.prototype.resetAllEdges=function(){this.allEdges=null},l.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},l.prototype.getAllEdges=function(){if(this.allEdges==null){var s=[],u=this.getGraphs();u.length;for(var c=0;c<u.length;c++)s=s.concat(u[c].getEdges());s=s.concat(this.edges),this.allEdges=s}return this.allEdges},l.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},l.prototype.setAllNodesToApplyGravitation=function(s){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=s},l.prototype.getRoot=function(){return this.rootGraph},l.prototype.setRootGraph=function(s){if(s.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=s,s.parent==null&&(s.parent=this.layout.newNode("Root node"))},l.prototype.getLayout=function(){return this.layout},l.prototype.isOneAncestorOfOther=function(s,u){if(!(s!=null&&u!=null))throw"assert failed";if(s==u)return!0;var c=s.getOwner(),h;do{if(h=c.getParent(),h==null)break;if(h==u)return!0;if(c=h.getOwner(),c==null)break}while(!0);c=u.getOwner();do{if(h=c.getParent(),h==null)break;if(h==s)return!0;if(c=h.getOwner(),c==null)break}while(!0);return!1},l.prototype.calcLowestCommonAncestors=function(){for(var s,u,c,h,g,d=this.getAllEdges(),p=d.length,v=0;v<p;v++){if(s=d[v],u=s.source,c=s.target,s.lca=null,s.sourceInLca=u,s.targetInLca=c,u==c){s.lca=u.getOwner();continue}for(h=u.getOwner();s.lca==null;){for(s.targetInLca=c,g=c.getOwner();s.lca==null;){if(g==h){s.lca=g;break}if(g==this.rootGraph)break;if(s.lca!=null)throw"assert failed";s.targetInLca=g.getParent(),g=s.targetInLca.getOwner()}if(h==this.rootGraph)break;s.lca==null&&(s.sourceInLca=h.getParent(),h=s.sourceInLca.getOwner())}if(s.lca==null)throw"assert failed"}},l.prototype.calcLowestCommonAncestor=function(s,u){if(s==u)return s.getOwner();var c=s.getOwner();do{if(c==null)break;var h=u.getOwner();do{if(h==null)break;if(h==c)return h;h=h.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},l.prototype.calcInclusionTreeDepths=function(s,u){s==null&&u==null&&(s=this.rootGraph,u=1);for(var c,h=s.getNodes(),g=h.length,d=0;d<g;d++)c=h[d],c.inclusionTreeDepth=u,c.child!=null&&this.calcInclusionTreeDepths(c.child,u+1)},l.prototype.includesInvalidEdge=function(){for(var s,u=this.edges.length,c=0;c<u;c++)if(s=this.edges[c],this.isOneAncestorOfOther(s.source,s.target))return!0;return!1},n.exports=l},function(n,r,i){var o=i(0);function a(){}for(var l in o)a[l]=o[l];a.MAX_ITERATIONS=2500,a.DEFAULT_EDGE_LENGTH=50,a.DEFAULT_SPRING_STRENGTH=.45,a.DEFAULT_REPULSION_STRENGTH=4500,a.DEFAULT_GRAVITY_STRENGTH=.4,a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,a.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,a.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,a.COOLING_ADAPTATION_FACTOR=.33,a.ADAPTATION_LOWER_NODE_LIMIT=1e3,a.ADAPTATION_UPPER_NODE_LIMIT=5e3,a.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,a.MAX_NODE_DISPLACEMENT=a.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,a.MIN_REPULSION_DIST=a.DEFAULT_EDGE_LENGTH/10,a.CONVERGENCE_CHECK_PERIOD=100,a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,a.MIN_EDGE_LENGTH=1,a.GRID_CALCULATION_CHECK_PERIOD=10,n.exports=a},function(n,r,i){var o=i(12);function a(){}a.calcSeparationAmount=function(l,s,u,c){if(!l.intersects(s))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(l,s,h),u[0]=Math.min(l.getRight(),s.getRight())-Math.max(l.x,s.x),u[1]=Math.min(l.getBottom(),s.getBottom())-Math.max(l.y,s.y),l.getX()<=s.getX()&&l.getRight()>=s.getRight()?u[0]+=Math.min(s.getX()-l.getX(),l.getRight()-s.getRight()):s.getX()<=l.getX()&&s.getRight()>=l.getRight()&&(u[0]+=Math.min(l.getX()-s.getX(),s.getRight()-l.getRight())),l.getY()<=s.getY()&&l.getBottom()>=s.getBottom()?u[1]+=Math.min(s.getY()-l.getY(),l.getBottom()-s.getBottom()):s.getY()<=l.getY()&&s.getBottom()>=l.getBottom()&&(u[1]+=Math.min(l.getY()-s.getY(),s.getBottom()-l.getBottom()));var g=Math.abs((s.getCenterY()-l.getCenterY())/(s.getCenterX()-l.getCenterX()));s.getCenterY()===l.getCenterY()&&s.getCenterX()===l.getCenterX()&&(g=1);var d=g*u[0],p=u[1]/g;u[0]<p?p=u[0]:d=u[1],u[0]=-1*h[0]*(p/2+c),u[1]=-1*h[1]*(d/2+c)},a.decideDirectionsForOverlappingNodes=function(l,s,u){l.getCenterX()<s.getCenterX()?u[0]=-1:u[0]=1,l.getCenterY()<s.getCenterY()?u[1]=-1:u[1]=1},a.getIntersection2=function(l,s,u){var c=l.getCenterX(),h=l.getCenterY(),g=s.getCenterX(),d=s.getCenterY();if(l.intersects(s))return u[0]=c,u[1]=h,u[2]=g,u[3]=d,!0;var p=l.getX(),v=l.getY(),b=l.getRight(),f=l.getX(),m=l.getBottom(),x=l.getRight(),T=l.getWidthHalf(),_=l.getHeightHalf(),C=s.getX(),y=s.getY(),w=s.getRight(),E=s.getX(),D=s.getBottom(),A=s.getRight(),k=s.getWidthHalf(),M=s.getHeightHalf(),L=!1,O=!1;if(c===g){if(h>d)return u[0]=c,u[1]=v,u[2]=g,u[3]=D,!1;if(h<d)return u[0]=c,u[1]=m,u[2]=g,u[3]=y,!1}else if(h===d){if(c>g)return u[0]=p,u[1]=h,u[2]=w,u[3]=d,!1;if(c<g)return u[0]=b,u[1]=h,u[2]=C,u[3]=d,!1}else{var R=l.height/l.width,I=s.height/s.width,S=(d-h)/(g-c),P=void 0,z=void 0,F=void 0,G=void 0,Y=void 0,W=void 0;if(-R===S?c>g?(u[0]=f,u[1]=m,L=!0):(u[0]=b,u[1]=v,L=!0):R===S&&(c>g?(u[0]=p,u[1]=v,L=!0):(u[0]=x,u[1]=m,L=!0)),-I===S?g>c?(u[2]=E,u[3]=D,O=!0):(u[2]=w,u[3]=y,O=!0):I===S&&(g>c?(u[2]=C,u[3]=y,O=!0):(u[2]=A,u[3]=D,O=!0)),L&&O)return!1;if(c>g?h>d?(P=this.getCardinalDirection(R,S,4),z=this.getCardinalDirection(I,S,2)):(P=this.getCardinalDirection(-R,S,3),z=this.getCardinalDirection(-I,S,1)):h>d?(P=this.getCardinalDirection(-R,S,1),z=this.getCardinalDirection(-I,S,3)):(P=this.getCardinalDirection(R,S,2),z=this.getCardinalDirection(I,S,4)),!L)switch(P){case 1:G=v,F=c+-_/S,u[0]=F,u[1]=G;break;case 2:F=x,G=h+T*S,u[0]=F,u[1]=G;break;case 3:G=m,F=c+_/S,u[0]=F,u[1]=G;break;case 4:F=f,G=h+-T*S,u[0]=F,u[1]=G;break}if(!O)switch(z){case 1:W=y,Y=g+-M/S,u[2]=Y,u[3]=W;break;case 2:Y=A,W=d+k*S,u[2]=Y,u[3]=W;break;case 3:W=D,Y=g+M/S,u[2]=Y,u[3]=W;break;case 4:Y=E,W=d+-k*S,u[2]=Y,u[3]=W;break}}return!1},a.getCardinalDirection=function(l,s,u){return l>s?u:1+u%4},a.getIntersection=function(l,s,u,c){if(c==null)return this.getIntersection2(l,s,u);var h=l.x,g=l.y,d=s.x,p=s.y,v=u.x,b=u.y,f=c.x,m=c.y,x=void 0,T=void 0,_=void 0,C=void 0,y=void 0,w=void 0,E=void 0,D=void 0,A=void 0;return _=p-g,y=h-d,E=d*g-h*p,C=m-b,w=v-f,D=f*b-v*m,A=_*w-C*y,A===0?null:(x=(y*D-w*E)/A,T=(C*E-_*D)/A,new o(x,T))},a.angleOfVector=function(l,s,u,c){var h=void 0;return l!==u?(h=Math.atan((c-s)/(u-l)),u<l?h+=Math.PI:c<s&&(h+=this.TWO_PI)):c<s?h=this.ONE_AND_HALF_PI:h=this.HALF_PI,h},a.doIntersect=function(l,s,u,c){var h=l.x,g=l.y,d=s.x,p=s.y,v=u.x,b=u.y,f=c.x,m=c.y,x=(d-h)*(m-b)-(f-v)*(p-g);if(x===0)return!1;var T=((m-b)*(f-h)+(v-f)*(m-g))/x,_=((g-p)*(f-h)+(d-h)*(m-g))/x;return 0<T&&T<1&&0<_&&_<1},a.HALF_PI=.5*Math.PI,a.ONE_AND_HALF_PI=1.5*Math.PI,a.TWO_PI=2*Math.PI,a.THREE_PI=3*Math.PI,n.exports=a},function(n,r,i){function o(){}o.sign=function(a){return a>0?1:a<0?-1:0},o.floor=function(a){return a<0?Math.ceil(a):Math.floor(a)},o.ceil=function(a){return a<0?Math.floor(a):Math.ceil(a)},n.exports=o},function(n,r,i){function o(){}o.MAX_VALUE=2147483647,o.MIN_VALUE=-2147483648,n.exports=o},function(n,r,i){var o=function(){function h(g,d){for(var p=0;p<d.length;p++){var v=d[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,d,p){return d&&h(g.prototype,d),p&&h(g,p),g}}();function a(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}var l=function(h){return{value:h,next:null,prev:null}},s=function(h,g,d,p){return h!==null?h.next=g:p.head=g,d!==null?d.prev=g:p.tail=g,g.prev=h,g.next=d,p.length++,g},u=function(h,g){var d=h.prev,p=h.next;return d!==null?d.next=p:g.head=p,p!==null?p.prev=d:g.tail=d,h.prev=h.next=null,g.length--,h},c=function(){function h(g){var d=this;a(this,h),this.length=0,this.head=null,this.tail=null,g!=null&&g.forEach(function(p){return d.push(p)})}return o(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(g,d){return s(d.prev,l(g),d,this)}},{key:"insertAfter",value:function(g,d){return s(d,l(g),d.next,this)}},{key:"insertNodeBefore",value:function(g,d){return s(d.prev,g,d,this)}},{key:"insertNodeAfter",value:function(g,d){return s(d,g,d.next,this)}},{key:"push",value:function(g){return s(this.tail,l(g),null,this)}},{key:"unshift",value:function(g){return s(null,l(g),this.head,this)}},{key:"remove",value:function(g){return u(g,this)}},{key:"pop",value:function(){return u(this.tail,this).value}},{key:"popNode",value:function(){return u(this.tail,this)}},{key:"shift",value:function(){return u(this.head,this).value}},{key:"shiftNode",value:function(){return u(this.head,this)}},{key:"get_object_at",value:function(g){if(g<=this.length()){for(var d=1,p=this.head;d<g;)p=p.next,d++;return p.value}}},{key:"set_object_at",value:function(g,d){if(g<=this.length()){for(var p=1,v=this.head;p<g;)v=v.next,p++;v.value=d}}}]),h}();n.exports=c},function(n,r,i){function o(a,l,s){this.x=null,this.y=null,a==null&&l==null&&s==null?(this.x=0,this.y=0):typeof a=="number"&&typeof l=="number"&&s==null?(this.x=a,this.y=l):a.constructor.name=="Point"&&l==null&&s==null&&(s=a,this.x=s.x,this.y=s.y)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.getLocation=function(){return new o(this.x,this.y)},o.prototype.setLocation=function(a,l,s){a.constructor.name=="Point"&&l==null&&s==null?(s=a,this.setLocation(s.x,s.y)):typeof a=="number"&&typeof l=="number"&&s==null&&(parseInt(a)==a&&parseInt(l)==l?this.move(a,l):(this.x=Math.floor(a+.5),this.y=Math.floor(l+.5)))},o.prototype.move=function(a,l){this.x=a,this.y=l},o.prototype.translate=function(a,l){this.x+=a,this.y+=l},o.prototype.equals=function(a){if(a.constructor.name=="Point"){var l=a;return this.x==l.x&&this.y==l.y}return this==a},o.prototype.toString=function(){return new o().constructor.name+"[x="+this.x+",y="+this.y+"]"},n.exports=o},function(n,r,i){function o(a,l,s,u){this.x=0,this.y=0,this.width=0,this.height=0,a!=null&&l!=null&&s!=null&&u!=null&&(this.x=a,this.y=l,this.width=s,this.height=u)}o.prototype.getX=function(){return this.x},o.prototype.setX=function(a){this.x=a},o.prototype.getY=function(){return this.y},o.prototype.setY=function(a){this.y=a},o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},o.prototype.getRight=function(){return this.x+this.width},o.prototype.getBottom=function(){return this.y+this.height},o.prototype.intersects=function(a){return!(this.getRight()<a.x||this.getBottom()<a.y||a.getRight()<this.x||a.getBottom()<this.y)},o.prototype.getCenterX=function(){return this.x+this.width/2},o.prototype.getMinX=function(){return this.getX()},o.prototype.getMaxX=function(){return this.getX()+this.width},o.prototype.getCenterY=function(){return this.y+this.height/2},o.prototype.getMinY=function(){return this.getY()},o.prototype.getMaxY=function(){return this.getY()+this.height},o.prototype.getWidthHalf=function(){return this.width/2},o.prototype.getHeightHalf=function(){return this.height/2},n.exports=o},function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};function a(){}a.lastID=0,a.createID=function(l){return a.isPrimitive(l)?l:(l.uniqueID!=null||(l.uniqueID=a.getString(),a.lastID++),l.uniqueID)},a.getString=function(l){return l==null&&(l=a.lastID),"Object#"+l},a.isPrimitive=function(l){var s=typeof l>"u"?"undefined":o(l);return l==null||s!="object"&&s!="function"},n.exports=a},function(n,r,i){function o(v){if(Array.isArray(v)){for(var b=0,f=Array(v.length);b<v.length;b++)f[b]=v[b];return f}else return Array.from(v)}var a=i(0),l=i(6),s=i(3),u=i(1),c=i(5),h=i(4),g=i(17),d=i(27);function p(v){d.call(this),this.layoutQuality=a.QUALITY,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=a.DEFAULT_INCREMENTAL,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new l(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,v!=null&&(this.isRemoteUse=v)}p.RANDOM_SEED=1,p.prototype=Object.create(d.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var v=new l(this);return this.graphManager=v,v},p.prototype.newGraph=function(v){return new c(null,this.graphManager,v)},p.prototype.newNode=function(v){return new s(this.graphManager,v)},p.prototype.newEdge=function(v){return new u(null,null,v)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var v;return this.checkLayoutSuccess()?v=!1:v=this.layout(),a.ANIMATE==="during"?!1:(v&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,v)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var v=this.graphManager.getAllEdges(),b=0;b<v.length;b++)v[b];for(var f=this.graphManager.getRoot().getNodes(),b=0;b<f.length;b++)f[b];this.update(this.graphManager.getRoot())}},p.prototype.update=function(v){if(v==null)this.update2();else if(v instanceof s){var b=v;if(b.getChild()!=null)for(var f=b.getChild().getNodes(),m=0;m<f.length;m++)update(f[m]);if(b.vGraphObject!=null){var x=b.vGraphObject;x.update(b)}}else if(v instanceof u){var T=v;if(T.vGraphObject!=null){var _=T.vGraphObject;_.update(T)}}else if(v instanceof c){var C=v;if(C.vGraphObject!=null){var y=C.vGraphObject;y.update(C)}}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=a.QUALITY,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=a.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(v){if(v==null)this.transform(new h(0,0));else{var b=new g,f=this.graphManager.getRoot().updateLeftTop();if(f!=null){b.setWorldOrgX(v.x),b.setWorldOrgY(v.y),b.setDeviceOrgX(f.x),b.setDeviceOrgY(f.y);for(var m=this.getAllNodes(),x,T=0;T<m.length;T++)x=m[T],x.transform(b)}}},p.prototype.positionNodesRandomly=function(v){if(v==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var b,f,m=v.getNodes(),x=0;x<m.length;x++)b=m[x],f=b.getChild(),f==null||f.getNodes().length==0?b.scatter():(this.positionNodesRandomly(f),b.updateBounds())},p.prototype.getFlatForest=function(){for(var v=[],b=!0,f=this.graphManager.getRoot().getNodes(),m=!0,x=0;x<f.length;x++)f[x].getChild()!=null&&(m=!1);if(!m)return v;var T=new Set,_=[],C=new Map,y=[];for(y=y.concat(f);y.length>0&&b;){for(_.push(y[0]);_.length>0&&b;){var w=_[0];_.splice(0,1),T.add(w);for(var E=w.getEdges(),x=0;x<E.length;x++){var D=E[x].getOtherEnd(w);if(C.get(w)!=D)if(!T.has(D))_.push(D),C.set(D,w);else{b=!1;break}}}if(!b)v=[];else{var A=[].concat(o(T));v.push(A);for(var x=0;x<A.length;x++){var k=A[x],M=y.indexOf(k);M>-1&&y.splice(M,1)}T=new Set,C=new Map}}return v},p.prototype.createDummyNodesForBendpoints=function(v){for(var b=[],f=v.source,m=this.graphManager.calcLowestCommonAncestor(v.source,v.target),x=0;x<v.bendpoints.length;x++){var T=this.newNode(null);T.setRect(new Point(0,0),new Dimension(1,1)),m.add(T);var _=this.newEdge(null);this.graphManager.add(_,f,T),b.add(T),f=T}var _=this.newEdge(null);return this.graphManager.add(_,f,v.target),this.edgeToDummyNodes.set(v,b),v.isInterGraph()?this.graphManager.remove(v):m.remove(v),b},p.prototype.createBendpointsFromDummyNodes=function(){var v=[];v=v.concat(this.graphManager.getAllEdges()),v=[].concat(o(this.edgeToDummyNodes.keys())).concat(v);for(var b=0;b<v.length;b++){var f=v[b];if(f.bendpoints.length>0){for(var m=this.edgeToDummyNodes.get(f),x=0;x<m.length;x++){var T=m[x],_=new h(T.getCenterX(),T.getCenterY()),C=f.bendpoints.get(x);C.x=_.x,C.y=_.y,T.getOwner().remove(T)}this.graphManager.add(f,f.source,f.target)}}},p.transform=function(v,b,f,m){if(f!=null&&m!=null){var x=b;if(v<=50){var T=b/f;x-=(b-T)/50*(50-v)}else{var _=b*m;x+=(_-b)/50*(v-50)}return x}else{var C,y;return v<=50?(C=9*b/500,y=b/10):(C=9*b/50,y=-8*b),C*v+y}},p.findCenterOfTree=function(v){var b=[];b=b.concat(v);var f=[],m=new Map,x=!1,T=null;(b.length==1||b.length==2)&&(x=!0,T=b[0]);for(var _=0;_<b.length;_++){var C=b[_],y=C.getNeighborsList().size;m.set(C,C.getNeighborsList().size),y==1&&f.push(C)}var w=[];for(w=w.concat(f);!x;){var E=[];E=E.concat(w),w=[];for(var _=0;_<b.length;_++){var C=b[_],D=b.indexOf(C);D>=0&&b.splice(D,1);var A=C.getNeighborsList();A.forEach(function(L){if(f.indexOf(L)<0){var O=m.get(L),R=O-1;R==1&&w.push(L),m.set(L,R)}})}f=f.concat(w),(b.length==1||b.length==2)&&(x=!0,T=b[0])}return T},p.prototype.setGraphManager=function(v){this.graphManager=v},n.exports=p},function(n,r,i){function o(){}o.seed=1,o.x=0,o.nextDouble=function(){return o.x=Math.sin(o.seed++)*1e4,o.x-Math.floor(o.x)},n.exports=o},function(n,r,i){var o=i(4);function a(l,s){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}a.prototype.getWorldOrgX=function(){return this.lworldOrgX},a.prototype.setWorldOrgX=function(l){this.lworldOrgX=l},a.prototype.getWorldOrgY=function(){return this.lworldOrgY},a.prototype.setWorldOrgY=function(l){this.lworldOrgY=l},a.prototype.getWorldExtX=function(){return this.lworldExtX},a.prototype.setWorldExtX=function(l){this.lworldExtX=l},a.prototype.getWorldExtY=function(){return this.lworldExtY},a.prototype.setWorldExtY=function(l){this.lworldExtY=l},a.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},a.prototype.setDeviceOrgX=function(l){this.ldeviceOrgX=l},a.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},a.prototype.setDeviceOrgY=function(l){this.ldeviceOrgY=l},a.prototype.getDeviceExtX=function(){return this.ldeviceExtX},a.prototype.setDeviceExtX=function(l){this.ldeviceExtX=l},a.prototype.getDeviceExtY=function(){return this.ldeviceExtY},a.prototype.setDeviceExtY=function(l){this.ldeviceExtY=l},a.prototype.transformX=function(l){var s=0,u=this.lworldExtX;return u!=0&&(s=this.ldeviceOrgX+(l-this.lworldOrgX)*this.ldeviceExtX/u),s},a.prototype.transformY=function(l){var s=0,u=this.lworldExtY;return u!=0&&(s=this.ldeviceOrgY+(l-this.lworldOrgY)*this.ldeviceExtY/u),s},a.prototype.inverseTransformX=function(l){var s=0,u=this.ldeviceExtX;return u!=0&&(s=this.lworldOrgX+(l-this.ldeviceOrgX)*this.lworldExtX/u),s},a.prototype.inverseTransformY=function(l){var s=0,u=this.ldeviceExtY;return u!=0&&(s=this.lworldOrgY+(l-this.ldeviceOrgY)*this.lworldExtY/u),s},a.prototype.inverseTransformPoint=function(l){var s=new o(this.inverseTransformX(l.x),this.inverseTransformY(l.y));return s},n.exports=a},function(n,r,i){function o(d){if(Array.isArray(d)){for(var p=0,v=Array(d.length);p<d.length;p++)v[p]=d[p];return v}else return Array.from(d)}var a=i(15),l=i(7),s=i(0),u=i(8),c=i(9);function h(){a.call(this),this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.springConstant=l.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=l.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*l.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=l.MAX_ITERATIONS}h.prototype=Object.create(a.prototype);for(var g in a)h[g]=a[g];h.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=l.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},h.prototype.calcIdealEdgeLengths=function(){for(var d,p,v,b,f,m,x=this.getGraphManager().getAllEdges(),T=0;T<x.length;T++)d=x[T],d.idealLength=this.idealEdgeLength,d.isInterGraph&&(v=d.getSource(),b=d.getTarget(),f=d.getSourceInLca().getEstimatedSize(),m=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=f+m-2*s.SIMPLE_NODE_SIZE),p=d.getLca().getInclusionTreeDepth(),d.idealLength+=l.DEFAULT_EDGE_LENGTH*l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(v.getInclusionTreeDepth()+b.getInclusionTreeDepth()-2*p))},h.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>l.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*l.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-l.ADAPTATION_LOWER_NODE_LIMIT)/(l.ADAPTATION_UPPER_NODE_LIMIT-l.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-l.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=l.MAX_NODE_DISPLACEMENT_INCREMENTAL):(d>l.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(l.COOLING_ADAPTATION_FACTOR,1-(d-l.ADAPTATION_LOWER_NODE_LIMIT)/(l.ADAPTATION_UPPER_NODE_LIMIT-l.ADAPTATION_LOWER_NODE_LIMIT)*(1-l.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=l.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},h.prototype.calcSpringForces=function(){for(var d=this.getAllEdges(),p,v=0;v<d.length;v++)p=d[v],this.calcSpringForce(p,p.idealLength)},h.prototype.calcRepulsionForces=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v,b,f,m,x=this.getAllNodes(),T;if(this.useFRGridVariant)for(this.totalIterations%l.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),T=new Set,v=0;v<x.length;v++)f=x[v],this.calculateRepulsionForceOfANode(f,T,d,p),T.add(f);else for(v=0;v<x.length;v++)for(f=x[v],b=v+1;b<x.length;b++)m=x[b],f.getOwner()==m.getOwner()&&this.calcRepulsionForce(f,m)},h.prototype.calcGravitationalForces=function(){for(var d,p=this.getAllNodesToApplyGravitation(),v=0;v<p.length;v++)d=p[v],this.calcGravitationalForce(d)},h.prototype.moveNodes=function(){for(var d=this.getAllNodes(),p,v=0;v<d.length;v++)p=d[v],p.move()},h.prototype.calcSpringForce=function(d,p){var v=d.getSource(),b=d.getTarget(),f,m,x,T;if(this.uniformLeafNodeSizes&&v.getChild()==null&&b.getChild()==null)d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;f=d.getLength(),f!=0&&(m=this.springConstant*(f-p),x=m*(d.lengthX/f),T=m*(d.lengthY/f),v.springForceX+=x,v.springForceY+=T,b.springForceX-=x,b.springForceY-=T)},h.prototype.calcRepulsionForce=function(d,p){var v=d.getRect(),b=p.getRect(),f=new Array(2),m=new Array(4),x,T,_,C,y,w,E;if(v.intersects(b)){u.calcSeparationAmount(v,b,f,l.DEFAULT_EDGE_LENGTH/2),w=2*f[0],E=2*f[1];var D=d.noOfChildren*p.noOfChildren/(d.noOfChildren+p.noOfChildren);d.repulsionForceX-=D*w,d.repulsionForceY-=D*E,p.repulsionForceX+=D*w,p.repulsionForceY+=D*E}else this.uniformLeafNodeSizes&&d.getChild()==null&&p.getChild()==null?(x=b.getCenterX()-v.getCenterX(),T=b.getCenterY()-v.getCenterY()):(u.getIntersection(v,b,m),x=m[2]-m[0],T=m[3]-m[1]),Math.abs(x)<l.MIN_REPULSION_DIST&&(x=c.sign(x)*l.MIN_REPULSION_DIST),Math.abs(T)<l.MIN_REPULSION_DIST&&(T=c.sign(T)*l.MIN_REPULSION_DIST),_=x*x+T*T,C=Math.sqrt(_),y=this.repulsionConstant*d.noOfChildren*p.noOfChildren/_,w=y*x/C,E=y*T/C,d.repulsionForceX-=w,d.repulsionForceY-=E,p.repulsionForceX+=w,p.repulsionForceY+=E},h.prototype.calcGravitationalForce=function(d){var p,v,b,f,m,x,T,_;p=d.getOwner(),v=(p.getRight()+p.getLeft())/2,b=(p.getTop()+p.getBottom())/2,f=d.getCenterX()-v,m=d.getCenterY()-b,x=Math.abs(f)+d.getWidth()/2,T=Math.abs(m)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(_=p.getEstimatedSize()*this.gravityRangeFactor,(x>_||T>_)&&(d.gravitationForceX=-this.gravityConstant*f,d.gravitationForceY=-this.gravityConstant*m)):(_=p.getEstimatedSize()*this.compoundGravityRangeFactor,(x>_||T>_)&&(d.gravitationForceX=-this.gravityConstant*f*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*m*this.compoundGravityConstant))},h.prototype.isConverged=function(){var d,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||p},h.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},h.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,p=this.graphManager.getAllNodes(),v=0;v<p.length;v++)d=p[v],d.noOfChildren=d.getNoOfChildren()},h.prototype.calcGrid=function(d){var p=0,v=0;p=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),v=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var b=new Array(p),f=0;f<p;f++)b[f]=new Array(v);for(var f=0;f<p;f++)for(var m=0;m<v;m++)b[f][m]=new Array;return b},h.prototype.addNodeToGrid=function(d,p,v){var b=0,f=0,m=0,x=0;b=parseInt(Math.floor((d.getRect().x-p)/this.repulsionRange)),f=parseInt(Math.floor((d.getRect().width+d.getRect().x-p)/this.repulsionRange)),m=parseInt(Math.floor((d.getRect().y-v)/this.repulsionRange)),x=parseInt(Math.floor((d.getRect().height+d.getRect().y-v)/this.repulsionRange));for(var T=b;T<=f;T++)for(var _=m;_<=x;_++)this.grid[T][_].push(d),d.setGridCoordinates(b,f,m,x)},h.prototype.updateGrid=function(){var d,p,v=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<v.length;d++)p=v[d],this.addNodeToGrid(p,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},h.prototype.calculateRepulsionForceOfANode=function(d,p,v,b){if(this.totalIterations%l.GRID_CALCULATION_CHECK_PERIOD==1&&v||b){var f=new Set;d.surrounding=new Array;for(var m,x=this.grid,T=d.startX-1;T<d.finishX+2;T++)for(var _=d.startY-1;_<d.finishY+2;_++)if(!(T<0||_<0||T>=x.length||_>=x[0].length)){for(var C=0;C<x[T][_].length;C++)if(m=x[T][_][C],!(d.getOwner()!=m.getOwner()||d==m)&&!p.has(m)&&!f.has(m)){var y=Math.abs(d.getCenterX()-m.getCenterX())-(d.getWidth()/2+m.getWidth()/2),w=Math.abs(d.getCenterY()-m.getCenterY())-(d.getHeight()/2+m.getHeight()/2);y<=this.repulsionRange&&w<=this.repulsionRange&&f.add(m)}}d.surrounding=[].concat(o(f))}for(T=0;T<d.surrounding.length;T++)this.calcRepulsionForce(d,d.surrounding[T])},h.prototype.calcRepulsionRange=function(){return 0},n.exports=h},function(n,r,i){var o=i(1),a=i(7);function l(u,c,h){o.call(this,u,c,h),this.idealLength=a.DEFAULT_EDGE_LENGTH}l.prototype=Object.create(o.prototype);for(var s in o)l[s]=o[s];n.exports=l},function(n,r,i){var o=i(3);function a(s,u,c,h){o.call(this,s,u,c,h),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(o.prototype);for(var l in o)a[l]=o[l];a.prototype.setGridCoordinates=function(s,u,c,h){this.startX=s,this.finishX=u,this.startY=c,this.finishY=h},n.exports=a},function(n,r,i){function o(a,l){this.width=0,this.height=0,a!==null&&l!==null&&(this.height=l,this.width=a)}o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},n.exports=o},function(n,r,i){var o=i(14);function a(){this.map={},this.keys=[]}a.prototype.put=function(l,s){var u=o.createID(l);this.contains(u)||(this.map[u]=s,this.keys.push(l))},a.prototype.contains=function(l){return o.createID(l),this.map[l]!=null},a.prototype.get=function(l){var s=o.createID(l);return this.map[s]},a.prototype.keySet=function(){return this.keys},n.exports=a},function(n,r,i){var o=i(14);function a(){this.set={}}a.prototype.add=function(l){var s=o.createID(l);this.contains(s)||(this.set[s]=l)},a.prototype.remove=function(l){delete this.set[o.createID(l)]},a.prototype.clear=function(){this.set={}},a.prototype.contains=function(l){return this.set[o.createID(l)]==l},a.prototype.isEmpty=function(){return this.size()===0},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAllTo=function(l){for(var s=Object.keys(this.set),u=s.length,c=0;c<u;c++)l.push(this.set[s[c]])},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAll=function(l){for(var s=l.length,u=0;u<s;u++){var c=l[u];this.add(c)}},n.exports=a},function(n,r,i){var o=function(){function u(c,h){for(var g=0;g<h.length;g++){var d=h[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,h,g){return h&&u(c.prototype,h),g&&u(c,g),c}}();function a(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}var l=i(11),s=function(){function u(c,h){a(this,u),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var g=void 0;c instanceof l?g=c.size():g=c.length,this._quicksort(c,0,g-1)}return o(u,[{key:"_quicksort",value:function(c,h,g){if(h<g){var d=this._partition(c,h,g);this._quicksort(c,h,d),this._quicksort(c,d+1,g)}}},{key:"_partition",value:function(c,h,g){for(var d=this._get(c,h),p=h,v=g;;){for(;this.compareFunction(d,this._get(c,v));)v--;for(;this.compareFunction(this._get(c,p),d);)p++;if(p<v)this._swap(c,p,v),p++,v--;else return v}}},{key:"_get",value:function(c,h){return c instanceof l?c.get_object_at(h):c[h]}},{key:"_set",value:function(c,h,g){c instanceof l?c.set_object_at(h,g):c[h]=g}},{key:"_swap",value:function(c,h,g){var d=this._get(c,h);this._set(c,h,this._get(c,g)),this._set(c,g,d)}},{key:"_defaultCompareFunction",value:function(c,h){return h>c}}]),u}();n.exports=s},function(n,r,i){var o=function(){function s(u,c){for(var h=0;h<c.length;h++){var g=c[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,c,h){return c&&s(u.prototype,c),h&&s(u,h),u}}();function a(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}var l=function(){function s(u,c){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;a(this,s),this.sequence1=u,this.sequence2=c,this.match_score=h,this.mismatch_penalty=g,this.gap_penalty=d,this.iMax=u.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var v=0;v<this.jMax;v++)this.grid[p][v]=0}this.tracebackGrid=new Array(this.iMax);for(var b=0;b<this.iMax;b++){this.tracebackGrid[b]=new Array(this.jMax);for(var f=0;f<this.jMax;f++)this.tracebackGrid[b][f]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return o(s,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var u=1;u<this.jMax;u++)this.grid[0][u]=this.grid[0][u-1]+this.gap_penalty,this.tracebackGrid[0][u]=[!1,!1,!0];for(var c=1;c<this.iMax;c++)this.grid[c][0]=this.grid[c-1][0]+this.gap_penalty,this.tracebackGrid[c][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var g=1;g<this.jMax;g++){var d=void 0;this.sequence1[h-1]===this.sequence2[g-1]?d=this.grid[h-1][g-1]+this.match_score:d=this.grid[h-1][g-1]+this.mismatch_penalty;var p=this.grid[h-1][g]+this.gap_penalty,v=this.grid[h][g-1]+this.gap_penalty,b=[d,p,v],f=this.arrayAllMaxIndexes(b);this.grid[h][g]=b[f[0]],this.tracebackGrid[h][g]=[f.includes(0),f.includes(1),f.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var u=[];for(u.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});u[0];){var c=u[0],h=this.tracebackGrid[c.pos[0]][c.pos[1]];h[0]&&u.push({pos:[c.pos[0]-1,c.pos[1]-1],seq1:this.sequence1[c.pos[0]-1]+c.seq1,seq2:this.sequence2[c.pos[1]-1]+c.seq2}),h[1]&&u.push({pos:[c.pos[0]-1,c.pos[1]],seq1:this.sequence1[c.pos[0]-1]+c.seq1,seq2:"-"+c.seq2}),h[2]&&u.push({pos:[c.pos[0],c.pos[1]-1],seq1:"-"+c.seq1,seq2:this.sequence2[c.pos[1]-1]+c.seq2}),c.pos[0]===0&&c.pos[1]===0&&this.alignments.push({sequence1:c.seq1,sequence2:c.seq2}),u.shift()}return this.alignments}},{key:"getAllIndexes",value:function(u,c){for(var h=[],g=-1;(g=u.indexOf(c,g+1))!==-1;)h.push(g);return h}},{key:"arrayAllMaxIndexes",value:function(u){return this.getAllIndexes(u,Math.max.apply(null,u))}}]),s}();n.exports=l},function(n,r,i){var o=function(){};o.FDLayout=i(18),o.FDLayoutConstants=i(7),o.FDLayoutEdge=i(19),o.FDLayoutNode=i(20),o.DimensionD=i(21),o.HashMap=i(22),o.HashSet=i(23),o.IGeometry=i(8),o.IMath=i(9),o.Integer=i(10),o.Point=i(12),o.PointD=i(4),o.RandomSeed=i(16),o.RectangleD=i(13),o.Transform=i(17),o.UniqueIDGeneretor=i(14),o.Quicksort=i(24),o.LinkedList=i(11),o.LGraphObject=i(2),o.LGraph=i(5),o.LEdge=i(1),o.LGraphManager=i(6),o.LNode=i(3),o.Layout=i(15),o.LayoutConstants=i(0),o.NeedlemanWunsch=i(25),n.exports=o},function(n,r,i){function o(){this.listeners=[]}var a=o.prototype;a.addListener=function(l,s){this.listeners.push({event:l,callback:s})},a.removeListener=function(l,s){for(var u=this.listeners.length;u>=0;u--){var c=this.listeners[u];c.event===l&&c.callback===s&&this.listeners.splice(u,1)}},a.emit=function(l,s){for(var u=0;u<this.listeners.length;u++){var c=this.listeners[u];l===c.event&&c.callback(s)}},n.exports=o}])})}(es)),es.exports}var ns;function jv(){return ns||(ns=1,function(e,t){(function(n,r){e.exports=r(Uv())})(ua,function(n){return function(r){var i={};function o(a){if(i[a])return i[a].exports;var l=i[a]={i:a,l:!1,exports:{}};return r[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=r,o.c=i,o.i=function(a){return a},o.d=function(a,l,s){o.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:s})},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s=7)}([function(r,i){r.exports=n},function(r,i,o){var a=o(0).FDLayoutConstants;function l(){}for(var s in a)l[s]=a[s];l.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,l.DEFAULT_RADIAL_SEPARATION=a.DEFAULT_EDGE_LENGTH,l.DEFAULT_COMPONENT_SEPERATION=60,l.TILE=!0,l.TILING_PADDING_VERTICAL=10,l.TILING_PADDING_HORIZONTAL=10,l.TREE_REDUCTION_ON_INCREMENTAL=!1,r.exports=l},function(r,i,o){var a=o(0).FDLayoutEdge;function l(u,c,h){a.call(this,u,c,h)}l.prototype=Object.create(a.prototype);for(var s in a)l[s]=a[s];r.exports=l},function(r,i,o){var a=o(0).LGraph;function l(u,c,h){a.call(this,u,c,h)}l.prototype=Object.create(a.prototype);for(var s in a)l[s]=a[s];r.exports=l},function(r,i,o){var a=o(0).LGraphManager;function l(u){a.call(this,u)}l.prototype=Object.create(a.prototype);for(var s in a)l[s]=a[s];r.exports=l},function(r,i,o){var a=o(0).FDLayoutNode,l=o(0).IMath;function s(c,h,g,d){a.call(this,c,h,g,d)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];s.prototype.move=function(){var c=this.graphManager.getLayout();this.displacementX=c.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=c.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementX=c.coolingFactor*c.maxNodeDisplacement*l.sign(this.displacementX)),Math.abs(this.displacementY)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementY=c.coolingFactor*c.maxNodeDisplacement*l.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),c.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},s.prototype.propogateDisplacementToChildren=function(c,h){for(var g=this.getChild().getNodes(),d,p=0;p<g.length;p++)d=g[p],d.getChild()==null?(d.moveBy(c,h),d.displacementX+=c,d.displacementY+=h):d.propogateDisplacementToChildren(c,h)},s.prototype.setPred1=function(c){this.pred1=c},s.prototype.getPred1=function(){return pred1},s.prototype.getPred2=function(){return pred2},s.prototype.setNext=function(c){this.next=c},s.prototype.getNext=function(){return next},s.prototype.setProcessed=function(c){this.processed=c},s.prototype.isProcessed=function(){return processed},r.exports=s},function(r,i,o){var a=o(0).FDLayout,l=o(4),s=o(3),u=o(5),c=o(2),h=o(1),g=o(0).FDLayoutConstants,d=o(0).LayoutConstants,p=o(0).Point,v=o(0).PointD,b=o(0).Layout,f=o(0).Integer,m=o(0).IGeometry,x=o(0).LGraph,T=o(0).Transform;function _(){a.call(this),this.toBeTiled={}}_.prototype=Object.create(a.prototype);for(var C in a)_[C]=a[C];_.prototype.newGraphManager=function(){var y=new l(this);return this.graphManager=y,y},_.prototype.newGraph=function(y){return new s(null,this.graphManager,y)},_.prototype.newNode=function(y){return new u(this.graphManager,y)},_.prototype.newEdge=function(y){return new c(null,null,y)},_.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.isSubLayout||(h.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=h.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=h.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=g.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=g.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=g.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=g.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=g.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=g.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/g.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=g.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},_.prototype.layout=function(){var y=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return y&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},_.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(h.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var y=new Set(this.getAllNodes()),w=this.nodesWithGravity.filter(function(D){return y.has(D)});this.graphManager.setAllNodesToApplyGravitation(w)}}else{var E=this.getFlatForest();if(E.length>0)this.positionNodesRadially(E);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var y=new Set(this.getAllNodes()),w=this.nodesWithGravity.filter(function(k){return y.has(k)});this.graphManager.setAllNodesToApplyGravitation(w),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},_.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%g.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var y=new Set(this.getAllNodes()),w=this.nodesWithGravity.filter(function(A){return y.has(A)});this.graphManager.setAllNodesToApplyGravitation(w),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=g.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=g.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var E=!this.isTreeGrowing&&!this.isGrowthFinished,D=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(E,D),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},_.prototype.getPositionsData=function(){for(var y=this.graphManager.getAllNodes(),w={},E=0;E<y.length;E++){var D=y[E].rect,A=y[E].id;w[A]={id:A,x:D.getCenterX(),y:D.getCenterY(),w:D.width,h:D.height}}return w},_.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var y=!1;if(g.ANIMATE==="during")this.emit("layoutstarted");else{for(;!y;)y=this.tick();this.graphManager.updateBounds()}},_.prototype.calculateNodesToApplyGravitationTo=function(){var y=[],w,E=this.graphManager.getGraphs(),D=E.length,A;for(A=0;A<D;A++)w=E[A],w.updateConnected(),w.isConnected||(y=y.concat(w.getNodes()));return y},_.prototype.createBendpoints=function(){var y=[];y=y.concat(this.graphManager.getAllEdges());var w=new Set,E;for(E=0;E<y.length;E++){var D=y[E];if(!w.has(D)){var A=D.getSource(),k=D.getTarget();if(A==k)D.getBendpoints().push(new v),D.getBendpoints().push(new v),this.createDummyNodesForBendpoints(D),w.add(D);else{var M=[];if(M=M.concat(A.getEdgeListToNode(k)),M=M.concat(k.getEdgeListToNode(A)),!w.has(M[0])){if(M.length>1){var L;for(L=0;L<M.length;L++){var O=M[L];O.getBendpoints().push(new v),this.createDummyNodesForBendpoints(O)}}M.forEach(function(R){w.add(R)})}}}if(w.size==y.length)break}},_.prototype.positionNodesRadially=function(y){for(var w=new p(0,0),E=Math.ceil(Math.sqrt(y.length)),D=0,A=0,k=0,M=new v(0,0),L=0;L<y.length;L++){L%E==0&&(k=0,A=D,L!=0&&(A+=h.DEFAULT_COMPONENT_SEPERATION),D=0);var O=y[L],R=b.findCenterOfTree(O);w.x=k,w.y=A,M=_.radialLayout(O,R,w),M.y>D&&(D=Math.floor(M.y)),k=Math.floor(M.x+h.DEFAULT_COMPONENT_SEPERATION)}this.transform(new v(d.WORLD_CENTER_X-M.x/2,d.WORLD_CENTER_Y-M.y/2))},_.radialLayout=function(y,w,E){var D=Math.max(this.maxDiagonalInTree(y),h.DEFAULT_RADIAL_SEPARATION);_.branchRadialLayout(w,null,0,359,0,D);var A=x.calculateBounds(y),k=new T;k.setDeviceOrgX(A.getMinX()),k.setDeviceOrgY(A.getMinY()),k.setWorldOrgX(E.x),k.setWorldOrgY(E.y);for(var M=0;M<y.length;M++){var L=y[M];L.transform(k)}var O=new v(A.getMaxX(),A.getMaxY());return k.inverseTransformPoint(O)},_.branchRadialLayout=function(y,w,E,D,A,k){var M=(D-E+1)/2;M<0&&(M+=180);var L=(M+E)%360,O=L*m.TWO_PI/360,R=A*Math.cos(O),I=A*Math.sin(O);y.setCenter(R,I);var S=[];S=S.concat(y.getEdges());var P=S.length;w!=null&&P--;for(var z=0,F=S.length,G,Y=y.getEdgesBetween(w);Y.length>1;){var W=Y[0];Y.splice(0,1);var Q=S.indexOf(W);Q>=0&&S.splice(Q,1),F--,P--}w!=null?G=(S.indexOf(Y[0])+1)%F:G=0;for(var B=Math.abs(D-E)/P,U=G;z!=P;U=++U%F){var X=S[U].getOtherEnd(y);if(X!=w){var $=(E+z*B)%360,Z=($+B)%360;_.branchRadialLayout(X,y,$,Z,A+k,k),z++}}},_.maxDiagonalInTree=function(y){for(var w=f.MIN_VALUE,E=0;E<y.length;E++){var D=y[E],A=D.getDiagonal();A>w&&(w=A)}return w},_.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},_.prototype.groupZeroDegreeMembers=function(){var y=this,w={};this.memberGroups={},this.idToDummyNode={};for(var E=[],D=this.graphManager.getAllNodes(),A=0;A<D.length;A++){var k=D[A],M=k.getParent();this.getNodeDegreeWithChildren(k)===0&&(M.id==null||!this.getToBeTiled(M))&&E.push(k)}for(var A=0;A<E.length;A++){var k=E[A],L=k.getParent().id;typeof w[L]>"u"&&(w[L]=[]),w[L]=w[L].concat(k)}Object.keys(w).forEach(function(O){if(w[O].length>1){var R="DummyCompound_"+O;y.memberGroups[R]=w[O];var I=w[O][0].getParent(),S=new u(y.graphManager);S.id=R,S.paddingLeft=I.paddingLeft||0,S.paddingRight=I.paddingRight||0,S.paddingBottom=I.paddingBottom||0,S.paddingTop=I.paddingTop||0,y.idToDummyNode[R]=S;var P=y.getGraphManager().add(y.newGraph(),S),z=I.getChild();z.add(S);for(var F=0;F<w[O].length;F++){var G=w[O][F];z.remove(G),P.add(G)}}})},_.prototype.clearCompounds=function(){var y={},w={};this.performDFSOnCompounds();for(var E=0;E<this.compoundOrder.length;E++)w[this.compoundOrder[E].id]=this.compoundOrder[E],y[this.compoundOrder[E].id]=[].concat(this.compoundOrder[E].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[E].getChild()),this.compoundOrder[E].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(y,w)},_.prototype.clearZeroDegreeMembers=function(){var y=this,w=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(E){var D=y.idToDummyNode[E];w[E]=y.tileNodes(y.memberGroups[E],D.paddingLeft+D.paddingRight),D.rect.width=w[E].width,D.rect.height=w[E].height})},_.prototype.repopulateCompounds=function(){for(var y=this.compoundOrder.length-1;y>=0;y--){var w=this.compoundOrder[y],E=w.id,D=w.paddingLeft,A=w.paddingTop;this.adjustLocations(this.tiledMemberPack[E],w.rect.x,w.rect.y,D,A)}},_.prototype.repopulateZeroDegreeMembers=function(){var y=this,w=this.tiledZeroDegreePack;Object.keys(w).forEach(function(E){var D=y.idToDummyNode[E],A=D.paddingLeft,k=D.paddingTop;y.adjustLocations(w[E],D.rect.x,D.rect.y,A,k)})},_.prototype.getToBeTiled=function(y){var w=y.id;if(this.toBeTiled[w]!=null)return this.toBeTiled[w];var E=y.getChild();if(E==null)return this.toBeTiled[w]=!1,!1;for(var D=E.getNodes(),A=0;A<D.length;A++){var k=D[A];if(this.getNodeDegree(k)>0)return this.toBeTiled[w]=!1,!1;if(k.getChild()==null){this.toBeTiled[k.id]=!1;continue}if(!this.getToBeTiled(k))return this.toBeTiled[w]=!1,!1}return this.toBeTiled[w]=!0,!0},_.prototype.getNodeDegree=function(y){y.id;for(var w=y.getEdges(),E=0,D=0;D<w.length;D++){var A=w[D];A.getSource().id!==A.getTarget().id&&(E=E+1)}return E},_.prototype.getNodeDegreeWithChildren=function(y){var w=this.getNodeDegree(y);if(y.getChild()==null)return w;for(var E=y.getChild().getNodes(),D=0;D<E.length;D++){var A=E[D];w+=this.getNodeDegreeWithChildren(A)}return w},_.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},_.prototype.fillCompexOrderByDFS=function(y){for(var w=0;w<y.length;w++){var E=y[w];E.getChild()!=null&&this.fillCompexOrderByDFS(E.getChild().getNodes()),this.getToBeTiled(E)&&this.compoundOrder.push(E)}},_.prototype.adjustLocations=function(y,w,E,D,A){w+=D,E+=A;for(var k=w,M=0;M<y.rows.length;M++){var L=y.rows[M];w=k;for(var O=0,R=0;R<L.length;R++){var I=L[R];I.rect.x=w,I.rect.y=E,w+=I.rect.width+y.horizontalPadding,I.rect.height>O&&(O=I.rect.height)}E+=O+y.verticalPadding}},_.prototype.tileCompoundMembers=function(y,w){var E=this;this.tiledMemberPack=[],Object.keys(y).forEach(function(D){var A=w[D];E.tiledMemberPack[D]=E.tileNodes(y[D],A.paddingLeft+A.paddingRight),A.rect.width=E.tiledMemberPack[D].width,A.rect.height=E.tiledMemberPack[D].height})},_.prototype.tileNodes=function(y,w){var E=h.TILING_PADDING_VERTICAL,D=h.TILING_PADDING_HORIZONTAL,A={rows:[],rowWidth:[],rowHeight:[],width:0,height:w,verticalPadding:E,horizontalPadding:D};y.sort(function(L,O){return L.rect.width*L.rect.height>O.rect.width*O.rect.height?-1:L.rect.width*L.rect.height<O.rect.width*O.rect.height?1:0});for(var k=0;k<y.length;k++){var M=y[k];A.rows.length==0?this.insertNodeToRow(A,M,0,w):this.canAddHorizontal(A,M.rect.width,M.rect.height)?this.insertNodeToRow(A,M,this.getShortestRowIndex(A),w):this.insertNodeToRow(A,M,A.rows.length,w),this.shiftToLastRow(A)}return A},_.prototype.insertNodeToRow=function(y,w,E,D){var A=D;if(E==y.rows.length){var k=[];y.rows.push(k),y.rowWidth.push(A),y.rowHeight.push(0)}var M=y.rowWidth[E]+w.rect.width;y.rows[E].length>0&&(M+=y.horizontalPadding),y.rowWidth[E]=M,y.width<M&&(y.width=M);var L=w.rect.height;E>0&&(L+=y.verticalPadding);var O=0;L>y.rowHeight[E]&&(O=y.rowHeight[E],y.rowHeight[E]=L,O=y.rowHeight[E]-O),y.height+=O,y.rows[E].push(w)},_.prototype.getShortestRowIndex=function(y){for(var w=-1,E=Number.MAX_VALUE,D=0;D<y.rows.length;D++)y.rowWidth[D]<E&&(w=D,E=y.rowWidth[D]);return w},_.prototype.getLongestRowIndex=function(y){for(var w=-1,E=Number.MIN_VALUE,D=0;D<y.rows.length;D++)y.rowWidth[D]>E&&(w=D,E=y.rowWidth[D]);return w},_.prototype.canAddHorizontal=function(y,w,E){var D=this.getShortestRowIndex(y);if(D<0)return!0;var A=y.rowWidth[D];if(A+y.horizontalPadding+w<=y.width)return!0;var k=0;y.rowHeight[D]<E&&D>0&&(k=E+y.verticalPadding-y.rowHeight[D]);var M;y.width-A>=w+y.horizontalPadding?M=(y.height+k)/(A+w+y.horizontalPadding):M=(y.height+k)/y.width,k=E+y.verticalPadding;var L;return y.width<w?L=(y.height+k)/w:L=(y.height+k)/y.width,L<1&&(L=1/L),M<1&&(M=1/M),M<L},_.prototype.shiftToLastRow=function(y){var w=this.getLongestRowIndex(y),E=y.rowWidth.length-1,D=y.rows[w],A=D[D.length-1],k=A.width+y.horizontalPadding;if(y.width-y.rowWidth[E]>k&&w!=E){D.splice(-1,1),y.rows[E].push(A),y.rowWidth[w]=y.rowWidth[w]-k,y.rowWidth[E]=y.rowWidth[E]+k,y.width=y.rowWidth[instance.getLongestRowIndex(y)];for(var M=Number.MIN_VALUE,L=0;L<D.length;L++)D[L].height>M&&(M=D[L].height);w>0&&(M+=y.verticalPadding);var O=y.rowHeight[w]+y.rowHeight[E];y.rowHeight[w]=M,y.rowHeight[E]<A.height+y.verticalPadding&&(y.rowHeight[E]=A.height+y.verticalPadding);var R=y.rowHeight[w]+y.rowHeight[E];y.height+=R-O,this.shiftToLastRow(y)}},_.prototype.tilingPreLayout=function(){h.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},_.prototype.tilingPostLayout=function(){h.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},_.prototype.reduceTrees=function(){for(var y=[],w=!0,E;w;){var D=this.graphManager.getAllNodes(),A=[];w=!1;for(var k=0;k<D.length;k++)E=D[k],E.getEdges().length==1&&!E.getEdges()[0].isInterGraph&&E.getChild()==null&&(A.push([E,E.getEdges()[0],E.getOwner()]),w=!0);if(w==!0){for(var M=[],L=0;L<A.length;L++)A[L][0].getEdges().length==1&&(M.push(A[L]),A[L][0].getOwner().remove(A[L][0]));y.push(M),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=y},_.prototype.growTree=function(y){for(var w=y.length,E=y[w-1],D,A=0;A<E.length;A++)D=E[A],this.findPlaceforPrunedNode(D),D[2].add(D[0]),D[2].add(D[1],D[1].source,D[1].target);y.splice(y.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},_.prototype.findPlaceforPrunedNode=function(y){var w,E,D=y[0];D==y[1].source?E=y[1].target:E=y[1].source;var A=E.startX,k=E.finishX,M=E.startY,L=E.finishY,O=0,R=0,I=0,S=0,P=[O,I,R,S];if(M>0)for(var z=A;z<=k;z++)P[0]+=this.grid[z][M-1].length+this.grid[z][M].length-1;if(k<this.grid.length-1)for(var z=M;z<=L;z++)P[1]+=this.grid[k+1][z].length+this.grid[k][z].length-1;if(L<this.grid[0].length-1)for(var z=A;z<=k;z++)P[2]+=this.grid[z][L+1].length+this.grid[z][L].length-1;if(A>0)for(var z=M;z<=L;z++)P[3]+=this.grid[A-1][z].length+this.grid[A][z].length-1;for(var F=f.MAX_VALUE,G,Y,W=0;W<P.length;W++)P[W]<F?(F=P[W],G=1,Y=W):P[W]==F&&G++;if(G==3&&F==0)P[0]==0&&P[1]==0&&P[2]==0?w=1:P[0]==0&&P[1]==0&&P[3]==0?w=0:P[0]==0&&P[2]==0&&P[3]==0?w=3:P[1]==0&&P[2]==0&&P[3]==0&&(w=2);else if(G==2&&F==0){var Q=Math.floor(Math.random()*2);P[0]==0&&P[1]==0?Q==0?w=0:w=1:P[0]==0&&P[2]==0?Q==0?w=0:w=2:P[0]==0&&P[3]==0?Q==0?w=0:w=3:P[1]==0&&P[2]==0?Q==0?w=1:w=2:P[1]==0&&P[3]==0?Q==0?w=1:w=3:Q==0?w=2:w=3}else if(G==4&&F==0){var Q=Math.floor(Math.random()*4);w=Q}else w=Y;w==0?D.setCenter(E.getCenterX(),E.getCenterY()-E.getHeight()/2-g.DEFAULT_EDGE_LENGTH-D.getHeight()/2):w==1?D.setCenter(E.getCenterX()+E.getWidth()/2+g.DEFAULT_EDGE_LENGTH+D.getWidth()/2,E.getCenterY()):w==2?D.setCenter(E.getCenterX(),E.getCenterY()+E.getHeight()/2+g.DEFAULT_EDGE_LENGTH+D.getHeight()/2):D.setCenter(E.getCenterX()-E.getWidth()/2-g.DEFAULT_EDGE_LENGTH-D.getWidth()/2,E.getCenterY())},r.exports=_},function(r,i,o){var a={};a.layoutBase=o(0),a.CoSEConstants=o(1),a.CoSEEdge=o(2),a.CoSEGraph=o(3),a.CoSEGraphManager=o(4),a.CoSELayout=o(6),a.CoSENode=o(5),r.exports=a}])})}(Jo)),Jo.exports}(function(e,t){(function(n,r){e.exports=r(jv())})(ua,function(n){return function(r){var i={};function o(a){if(i[a])return i[a].exports;var l=i[a]={i:a,l:!1,exports:{}};return r[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=r,o.c=i,o.i=function(a){return a},o.d=function(a,l,s){o.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:s})},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s=1)}([function(r,i){r.exports=n},function(r,i,o){var a=o(0).layoutBase.LayoutConstants,l=o(0).layoutBase.FDLayoutConstants,s=o(0).CoSEConstants,u=o(0).CoSELayout,c=o(0).CoSENode,h=o(0).layoutBase.PointD,g=o(0).layoutBase.DimensionD,d={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function p(m,x){var T={};for(var _ in m)T[_]=m[_];for(var _ in x)T[_]=x[_];return T}function v(m){this.options=p(d,m),b(this.options)}var b=function(m){m.nodeRepulsion!=null&&(s.DEFAULT_REPULSION_STRENGTH=l.DEFAULT_REPULSION_STRENGTH=m.nodeRepulsion),m.idealEdgeLength!=null&&(s.DEFAULT_EDGE_LENGTH=l.DEFAULT_EDGE_LENGTH=m.idealEdgeLength),m.edgeElasticity!=null&&(s.DEFAULT_SPRING_STRENGTH=l.DEFAULT_SPRING_STRENGTH=m.edgeElasticity),m.nestingFactor!=null&&(s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=m.nestingFactor),m.gravity!=null&&(s.DEFAULT_GRAVITY_STRENGTH=l.DEFAULT_GRAVITY_STRENGTH=m.gravity),m.numIter!=null&&(s.MAX_ITERATIONS=l.MAX_ITERATIONS=m.numIter),m.gravityRange!=null&&(s.DEFAULT_GRAVITY_RANGE_FACTOR=l.DEFAULT_GRAVITY_RANGE_FACTOR=m.gravityRange),m.gravityCompound!=null&&(s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=m.gravityCompound),m.gravityRangeCompound!=null&&(s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=m.gravityRangeCompound),m.initialEnergyOnIncremental!=null&&(s.DEFAULT_COOLING_FACTOR_INCREMENTAL=l.DEFAULT_COOLING_FACTOR_INCREMENTAL=m.initialEnergyOnIncremental),m.quality=="draft"?a.QUALITY=0:m.quality=="proof"?a.QUALITY=2:a.QUALITY=1,s.NODE_DIMENSIONS_INCLUDE_LABELS=l.NODE_DIMENSIONS_INCLUDE_LABELS=a.NODE_DIMENSIONS_INCLUDE_LABELS=m.nodeDimensionsIncludeLabels,s.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=a.DEFAULT_INCREMENTAL=!m.randomize,s.ANIMATE=l.ANIMATE=a.ANIMATE=m.animate,s.TILE=m.tile,s.TILING_PADDING_VERTICAL=typeof m.tilingPaddingVertical=="function"?m.tilingPaddingVertical.call():m.tilingPaddingVertical,s.TILING_PADDING_HORIZONTAL=typeof m.tilingPaddingHorizontal=="function"?m.tilingPaddingHorizontal.call():m.tilingPaddingHorizontal};v.prototype.run=function(){var m,x,T=this.options;this.idToLNode={};var _=this.layout=new u,C=this;C.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var y=_.newGraphManager();this.gm=y;var w=this.options.eles.nodes(),E=this.options.eles.edges();this.root=y.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(w),_);for(var D=0;D<E.length;D++){var A=E[D],k=this.idToLNode[A.data("source")],M=this.idToLNode[A.data("target")];if(k!==M&&k.getEdgesBetween(M).length==0){var L=y.add(_.newEdge(),k,M);L.id=A.id()}}var O=function(I,S){typeof I=="number"&&(I=S);var P=I.data("id"),z=C.idToLNode[P];return{x:z.getRect().getCenterX(),y:z.getRect().getCenterY()}},R=function I(){for(var S=function(){T.fit&&T.cy.fit(T.eles,T.padding),m||(m=!0,C.cy.one("layoutready",T.ready),C.cy.trigger({type:"layoutready",layout:C}))},P=C.options.refresh,z,F=0;F<P&&!z;F++)z=C.stopped||C.layout.tick();if(z){_.checkLayoutSuccess()&&!_.isSubLayout&&_.doPostLayout(),_.tilingPostLayout&&_.tilingPostLayout(),_.isLayoutFinished=!0,C.options.eles.nodes().positions(O),S(),C.cy.one("layoutstop",C.options.stop),C.cy.trigger({type:"layoutstop",layout:C}),x&&cancelAnimationFrame(x),m=!1;return}var G=C.layout.getPositionsData();T.eles.nodes().positions(function(Y,W){if(typeof Y=="number"&&(Y=W),!Y.isParent()){for(var Q=Y.id(),B=G[Q],U=Y;B==null&&(B=G[U.data("parent")]||G["DummyCompound_"+U.data("parent")],G[Q]=B,U=U.parent()[0],U!=null););return B!=null?{x:B.x,y:B.y}:{x:Y.position("x"),y:Y.position("y")}}}),S(),x=requestAnimationFrame(I)};return _.addListener("layoutstarted",function(){C.options.animate==="during"&&(x=requestAnimationFrame(R))}),_.runLayout(),this.options.animate!=="during"&&(C.options.eles.nodes().not(":parent").layoutPositions(C,C.options,O),m=!1),this},v.prototype.getTopMostNodes=function(m){for(var x={},T=0;T<m.length;T++)x[m[T].id()]=!0;var _=m.filter(function(C,y){typeof C=="number"&&(C=y);for(var w=C.parent()[0];w!=null;){if(x[w.id()])return!1;w=w.parent()[0]}return!0});return _},v.prototype.processChildrenList=function(m,x,T){for(var _=x.length,C=0;C<_;C++){var y=x[C],w=y.children(),E,D=y.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(y.outerWidth()!=null&&y.outerHeight()!=null?E=m.add(new c(T.graphManager,new h(y.position("x")-D.w/2,y.position("y")-D.h/2),new g(parseFloat(D.w),parseFloat(D.h)))):E=m.add(new c(this.graphManager)),E.id=y.data("id"),E.paddingLeft=parseInt(y.css("padding")),E.paddingTop=parseInt(y.css("padding")),E.paddingRight=parseInt(y.css("padding")),E.paddingBottom=parseInt(y.css("padding")),this.options.nodeDimensionsIncludeLabels&&y.isParent()){var A=y.boundingBox({includeLabels:!0,includeNodes:!1}).w,k=y.boundingBox({includeLabels:!0,includeNodes:!1}).h,M=y.css("text-halign");E.labelWidth=A,E.labelHeight=k,E.labelPos=M}if(this.idToLNode[y.data("id")]=E,isNaN(E.rect.x)&&(E.rect.x=0),isNaN(E.rect.y)&&(E.rect.y=0),w!=null&&w.length>0){var L;L=T.getGraphManager().add(T.newGraph(),E),this.processChildrenList(L,w,T)}}},v.prototype.stop=function(){return this.stopped=!0,this};var f=function(m){m("layout","cose-bilkent",v)};typeof cytoscape<"u"&&f(cytoscape),r.exports=f}])})})(Yl);var qv=Yl.exports;const Hv=su(qv);var sa=function(){var e=function(T,_,C,y){for(C=C||{},y=T.length;y--;C[T[y]]=_);return C},t=[1,4],n=[1,13],r=[1,12],i=[1,15],o=[1,16],a=[1,20],l=[1,19],s=[6,7,8],u=[1,26],c=[1,24],h=[1,25],g=[6,7,11],d=[1,6,13,15,16,19,22],p=[1,33],v=[1,34],b=[1,6,7,11,13,15,16,19,22],f={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(T,_,C,y,w,E,D){var A=E.length-1;switch(w){case 6:case 7:return y;case 8:y.getLogger().trace("Stop NL ");break;case 9:y.getLogger().trace("Stop EOF ");break;case 11:y.getLogger().trace("Stop NL2 ");break;case 12:y.getLogger().trace("Stop EOF2 ");break;case 15:y.getLogger().info("Node: ",E[A].id),y.addNode(E[A-1].length,E[A].id,E[A].descr,E[A].type);break;case 16:y.getLogger().trace("Icon: ",E[A]),y.decorateNode({icon:E[A]});break;case 17:case 21:y.decorateNode({class:E[A]});break;case 18:y.getLogger().trace("SPACELIST");break;case 19:y.getLogger().trace("Node: ",E[A].id),y.addNode(0,E[A].id,E[A].descr,E[A].type);break;case 20:y.decorateNode({icon:E[A]});break;case 25:y.getLogger().trace("node found ..",E[A-2]),this.$={id:E[A-1],descr:E[A-1],type:y.getType(E[A-2],E[A])};break;case 26:this.$={id:E[A],descr:E[A],type:y.nodeType.DEFAULT};break;case 27:y.getLogger().trace("node found ..",E[A-3]),this.$={id:E[A-3],descr:E[A-1],type:y.getType(E[A-2],E[A])};break}},table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:n,7:[1,10],9:9,12:11,13:r,14:14,15:i,16:o,17:17,18:18,19:a,22:l},e(s,[2,3]),{1:[2,2]},e(s,[2,4]),e(s,[2,5]),{1:[2,6],6:n,12:21,13:r,14:14,15:i,16:o,17:17,18:18,19:a,22:l},{6:n,9:22,12:11,13:r,14:14,15:i,16:o,17:17,18:18,19:a,22:l},{6:u,7:c,10:23,11:h},e(g,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:a,22:l}),e(g,[2,18]),e(g,[2,19]),e(g,[2,20]),e(g,[2,21]),e(g,[2,23]),e(g,[2,24]),e(g,[2,26],{19:[1,30]}),{20:[1,31]},{6:u,7:c,10:32,11:h},{1:[2,7],6:n,12:21,13:r,14:14,15:i,16:o,17:17,18:18,19:a,22:l},e(d,[2,14],{7:p,11:v}),e(b,[2,8]),e(b,[2,9]),e(b,[2,10]),e(g,[2,15]),e(g,[2,16]),e(g,[2,17]),{20:[1,35]},{21:[1,36]},e(d,[2,13],{7:p,11:v}),e(b,[2,11]),e(b,[2,12]),{21:[1,37]},e(g,[2,25]),e(g,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(T,_){if(_.recoverable)this.trace(T);else{var C=new Error(T);throw C.hash=_,C}},parse:function(T){var _=this,C=[0],y=[],w=[null],E=[],D=this.table,A="",k=0,M=0,L=2,O=1,R=E.slice.call(arguments,1),I=Object.create(this.lexer),S={yy:{}};for(var P in this.yy)Object.prototype.hasOwnProperty.call(this.yy,P)&&(S.yy[P]=this.yy[P]);I.setInput(T,S.yy),S.yy.lexer=I,S.yy.parser=this,typeof I.yylloc>"u"&&(I.yylloc={});var z=I.yylloc;E.push(z);var F=I.options&&I.options.ranges;typeof S.yy.parseError=="function"?this.parseError=S.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function G(){var de;return de=y.pop()||I.lex()||O,typeof de!="number"&&(de instanceof Array&&(y=de,de=y.pop()),de=_.symbols_[de]||de),de}for(var Y,W,Q,B,U={},X,$,Z,re;;){if(W=C[C.length-1],this.defaultActions[W]?Q=this.defaultActions[W]:((Y===null||typeof Y>"u")&&(Y=G()),Q=D[W]&&D[W][Y]),typeof Q>"u"||!Q.length||!Q[0]){var ge="";re=[];for(X in D[W])this.terminals_[X]&&X>L&&re.push("'"+this.terminals_[X]+"'");I.showPosition?ge="Parse error on line "+(k+1)+`:
`+I.showPosition()+`
Expecting `+re.join(", ")+", got '"+(this.terminals_[Y]||Y)+"'":ge="Parse error on line "+(k+1)+": Unexpected "+(Y==O?"end of input":"'"+(this.terminals_[Y]||Y)+"'"),this.parseError(ge,{text:I.match,token:this.terminals_[Y]||Y,line:I.yylineno,loc:z,expected:re})}if(Q[0]instanceof Array&&Q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+W+", token: "+Y);switch(Q[0]){case 1:C.push(Y),w.push(I.yytext),E.push(I.yylloc),C.push(Q[1]),Y=null,M=I.yyleng,A=I.yytext,k=I.yylineno,z=I.yylloc;break;case 2:if($=this.productions_[Q[1]][1],U.$=w[w.length-$],U._$={first_line:E[E.length-($||1)].first_line,last_line:E[E.length-1].last_line,first_column:E[E.length-($||1)].first_column,last_column:E[E.length-1].last_column},F&&(U._$.range=[E[E.length-($||1)].range[0],E[E.length-1].range[1]]),B=this.performAction.apply(U,[A,M,k,S.yy,Q[1],w,E].concat(R)),typeof B<"u")return B;$&&(C=C.slice(0,-1*$*2),w=w.slice(0,-1*$),E=E.slice(0,-1*$)),C.push(this.productions_[Q[1]][0]),w.push(U.$),E.push(U._$),Z=D[C[C.length-2]][C[C.length-1]],C.push(Z);break;case 3:return!0}}return!0}},m=function(){var T={EOF:1,parseError:function(_,C){if(this.yy.parser)this.yy.parser.parseError(_,C);else throw new Error(_)},setInput:function(_,C){return this.yy=C||this.yy||{},this._input=_,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var _=this._input[0];this.yytext+=_,this.yyleng++,this.offset++,this.match+=_,this.matched+=_;var C=_.match(/(?:\r\n?|\n).*/g);return C?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_},unput:function(_){var C=_.length,y=_.split(/(?:\r\n?|\n)/g);this._input=_+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-C),this.offset-=C;var w=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var E=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===w.length?this.yylloc.first_column:0)+w[w.length-y.length].length-y[0].length:this.yylloc.first_column-C},this.options.ranges&&(this.yylloc.range=[E[0],E[0]+this.yyleng-C]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(_){this.unput(this.match.slice(_))},pastInput:function(){var _=this.matched.substr(0,this.matched.length-this.match.length);return(_.length>20?"...":"")+_.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var _=this.match;return _.length<20&&(_+=this._input.substr(0,20-_.length)),(_.substr(0,20)+(_.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var _=this.pastInput(),C=new Array(_.length+1).join("-");return _+this.upcomingInput()+`
`+C+"^"},test_match:function(_,C){var y,w,E;if(this.options.backtrack_lexer&&(E={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(E.yylloc.range=this.yylloc.range.slice(0))),w=_[0].match(/(?:\r\n?|\n).*/g),w&&(this.yylineno+=w.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:w?w[w.length-1].length-w[w.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_[0].length},this.yytext+=_[0],this.match+=_[0],this.matches=_,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_[0].length),this.matched+=_[0],y=this.performAction.call(this,this.yy,this,C,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var D in E)this[D]=E[D];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var _,C,y,w;this._more||(this.yytext="",this.match="");for(var E=this._currentRules(),D=0;D<E.length;D++)if(y=this._input.match(this.rules[E[D]]),y&&(!C||y[0].length>C[0].length)){if(C=y,w=D,this.options.backtrack_lexer){if(_=this.test_match(y,E[D]),_!==!1)return _;if(this._backtrack){C=!1;continue}else return!1}else if(!this.options.flex)break}return C?(_=this.test_match(C,E[w]),_!==!1?_:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var _=this.next();return _||this.lex()},begin:function(_){this.conditionStack.push(_)},popState:function(){var _=this.conditionStack.length-1;return _>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(_){return _=this.conditionStack.length-1-Math.abs(_||0),_>=0?this.conditionStack[_]:"INITIAL"},pushState:function(_){this.begin(_)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(_,C,y,w){switch(y){case 0:return _.getLogger().trace("Found comment",C.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:_.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return _.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:_.getLogger().trace("end icon"),this.popState();break;case 10:return _.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return _.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return _.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return _.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:_.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return _.getLogger().trace("description:",C.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),_.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),_.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),_.getLogger().trace("node end ...",C.yytext),"NODE_DEND";case 30:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),_.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),_.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 35:return _.getLogger().trace("Long description:",C.yytext),20;case 36:return _.getLogger().trace("Long description:",C.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return T}();f.lexer=m;function x(){this.yy={}}return x.prototype=f,f.Parser=x,new x}();sa.parser=sa;const Wv=sa;let Lt=[],Vl=0,Ia={};const $v=()=>{Lt=[],Vl=0,Ia={}},Kv=function(e){for(let t=Lt.length-1;t>=0;t--)if(Lt[t].level<e)return Lt[t];return null},Zv=()=>Lt.length>0?Lt[0]:null,Qv=(e,t,n,r)=>{var i,o,a,l;xn.info("addNode",e,t,n,r);const s=la();let u=(i=(a=s.mindmap)==null?void 0:a.padding)!=null?i:Jr.mindmap.padding;switch(r){case Xe.ROUNDED_RECT:case Xe.RECT:case Xe.HEXAGON:u*=2}const c={id:Vl++,nodeId:ei(t,s),level:e,descr:ei(n,s),type:r,children:[],width:(o=(l=s.mindmap)==null?void 0:l.maxNodeWidth)!=null?o:Jr.mindmap.maxNodeWidth,padding:u},h=Kv(e);if(h)h.children.push(c),Lt.push(c);else if(Lt.length===0)Lt.push(c);else throw new Error('There can be only one root. No parent could be found for ("'+c.descr+'")')},Xe={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},Jv=(e,t)=>{switch(xn.debug("In get type",e,t),e){case"[":return Xe.RECT;case"(":return t===")"?Xe.ROUNDED_RECT:Xe.CLOUD;case"((":return Xe.CIRCLE;case")":return Xe.CLOUD;case"))":return Xe.BANG;case"{{":return Xe.HEXAGON;default:return Xe.DEFAULT}},e0=(e,t)=>{Ia[e]=t},t0=e=>{if(!e)return;const t=la(),n=Lt[Lt.length-1];e.icon&&(n.icon=ei(e.icon,t)),e.class&&(n.class=ei(e.class,t))},n0=e=>{switch(e){case Xe.DEFAULT:return"no-border";case Xe.RECT:return"rect";case Xe.ROUNDED_RECT:return"rounded-rect";case Xe.CIRCLE:return"circle";case Xe.CLOUD:return"cloud";case Xe.BANG:return"bang";case Xe.HEXAGON:return"hexgon";default:return"no-border"}},r0=()=>xn,i0=e=>Ia[e],a0={clear:$v,addNode:Qv,getMindmap:Zv,nodeType:Xe,getType:Jv,setElementForId:e0,decorateNode:t0,type2Str:n0,getLogger:r0,getElementById:i0},o0=a0,s0=12,l0=function(e,t,n,r){t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 ${n.height-5} v${-n.height+2*5} q0,-5 5,-5 h${n.width-2*5} q5,0 5,5 v${n.height-5} H0 Z`),t.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",n.height).attr("x2",n.width).attr("y2",n.height)},u0=function(e,t,n){t.append("rect").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("height",n.height).attr("width",n.width)},c0=function(e,t,n){const r=n.width,i=n.height,o=.15*r,a=.25*r,l=.35*r,s=.2*r;t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 0 a${o},${o} 0 0,1 ${r*.25},${-1*r*.1}
      a${l},${l} 1 0,1 ${r*.4},${-1*r*.1}
      a${a},${a} 1 0,1 ${r*.35},${1*r*.2}

      a${o},${o} 1 0,1 ${r*.15},${1*i*.35}
      a${s},${s} 1 0,1 ${-1*r*.15},${1*i*.65}

      a${a},${o} 1 0,1 ${-1*r*.25},${r*.15}
      a${l},${l} 1 0,1 ${-1*r*.5},0
      a${o},${o} 1 0,1 ${-1*r*.25},${-1*r*.15}

      a${o},${o} 1 0,1 ${-1*r*.1},${-1*i*.35}
      a${s},${s} 1 0,1 ${r*.1},${-1*i*.65}

    H0 V0 Z`)},h0=function(e,t,n){const r=n.width,i=n.height,o=.15*r;t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 0 a${o},${o} 1 0,0 ${r*.25},${-1*i*.1}
      a${o},${o} 1 0,0 ${r*.25},0
      a${o},${o} 1 0,0 ${r*.25},0
      a${o},${o} 1 0,0 ${r*.25},${1*i*.1}

      a${o},${o} 1 0,0 ${r*.15},${1*i*.33}
      a${o*.8},${o*.8} 1 0,0 0,${1*i*.34}
      a${o},${o} 1 0,0 ${-1*r*.15},${1*i*.33}

      a${o},${o} 1 0,0 ${-1*r*.25},${i*.15}
      a${o},${o} 1 0,0 ${-1*r*.25},0
      a${o},${o} 1 0,0 ${-1*r*.25},0
      a${o},${o} 1 0,0 ${-1*r*.25},${-1*i*.15}

      a${o},${o} 1 0,0 ${-1*r*.1},${-1*i*.33}
      a${o*.8},${o*.8} 1 0,0 0,${-1*i*.34}
      a${o},${o} 1 0,0 ${r*.1},${-1*i*.33}

    H0 V0 Z`)},d0=function(e,t,n){t.append("circle").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("r",n.width/2)};function p0(e,t,n,r,i){return e.insert("polygon",":first-child").attr("points",r.map(function(o){return o.x+","+o.y}).join(" ")).attr("transform","translate("+(i.width-t)/2+", "+n+")")}const g0=function(e,t,n){const r=n.height,i=r/4,o=n.width-n.padding+2*i,a=[{x:i,y:0},{x:o-i,y:0},{x:o,y:-r/2},{x:o-i,y:-r},{x:i,y:-r},{x:0,y:-r/2}];p0(t,o,r,a,n)},f0=function(e,t,n){t.append("rect").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("height",n.height).attr("rx",n.padding).attr("ry",n.padding).attr("width",n.width)},v0=function(e,t,n,r,i){const o=i.htmlLabels,a=r%(s0-1),l=t.append("g");n.section=a;let s="section-"+a;a<0&&(s+=" section-root"),l.attr("class",(n.class?n.class+" ":"")+"mindmap-node "+s);const u=l.append("g"),c=l.append("g"),h=n.descr.replace(/(<br\/*>)/g,`
`);lu(c,h,{useHtmlLabels:o,width:n.width,classes:"mindmap-node-label"}),o||c.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const g=c.node().getBBox(),[d]=ou(i.fontSize);if(n.height=g.height+d*1.1*.5+n.padding,n.width=g.width+2*n.padding,n.icon)if(n.type===e.nodeType.CIRCLE)n.height+=50,n.width+=50,l.append("foreignObject").attr("height","50px").attr("width",n.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+n.icon),c.attr("transform","translate("+n.width/2+", "+(n.height/2-1.5*n.padding)+")");else{n.width+=50;const p=n.height;n.height=Math.max(p,60);const v=Math.abs(n.height-p);l.append("foreignObject").attr("width","60px").attr("height",n.height).attr("style","text-align: center;margin-top:"+v/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+n.icon),c.attr("transform","translate("+(25+n.width/2)+", "+(v/2+n.padding/2)+")")}else if(o){const p=(n.width-g.width)/2,v=(n.height-g.height)/2;c.attr("transform","translate("+p+", "+v+")")}else{const p=n.width/2,v=n.padding/2;c.attr("transform","translate("+p+", "+v+")")}switch(n.type){case e.nodeType.DEFAULT:l0(e,u,n,a);break;case e.nodeType.ROUNDED_RECT:f0(e,u,n);break;case e.nodeType.RECT:u0(e,u,n);break;case e.nodeType.CIRCLE:u.attr("transform","translate("+n.width/2+", "+ +n.height/2+")"),d0(e,u,n);break;case e.nodeType.CLOUD:c0(e,u,n);break;case e.nodeType.BANG:h0(e,u,n);break;case e.nodeType.HEXAGON:g0(e,u,n);break}return e.setElementForId(n.id,l),n.height},y0=function(e,t){const n=e.getElementById(t.id),r=t.x||0,i=t.y||0;n.attr("transform","translate("+r+","+i+")")};rn.use(Hv);function Xl(e,t,n,r,i){v0(e,t,n,r,i),n.children&&n.children.forEach((o,a)=>{Xl(e,t,o,r<0?a:r,i)})}function m0(e,t){t.edges().map((n,r)=>{const i=n.data();if(n[0]._private.bodyBounds){const o=n[0]._private.rscratch;xn.trace("Edge: ",r,i),e.insert("path").attr("d",`M ${o.startX},${o.startY} L ${o.midX},${o.midY} L${o.endX},${o.endY} `).attr("class","edge section-edge-"+i.section+" edge-depth-"+i.depth)}})}function Ul(e,t,n,r){t.add({group:"nodes",data:{id:e.id.toString(),labelText:e.descr,height:e.height,width:e.width,level:r,nodeId:e.id,padding:e.padding,type:e.type},position:{x:e.x,y:e.y}}),e.children&&e.children.forEach(i=>{Ul(i,t,n,r+1),t.add({group:"edges",data:{id:`${e.id}_${i.id}`,source:e.id,target:i.id,depth:r,section:i.section}})})}function b0(e,t){return new Promise(n=>{const r=nu("body").append("div").attr("id","cy").attr("style","display:none"),i=rn({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});r.remove(),Ul(e,i,t,0),i.nodes().forEach(function(o){o.layoutDimensions=()=>{const a=o.data();return{w:a.width,h:a.height}}}),i.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),i.ready(o=>{xn.info("Ready",o),n(i)})})}function x0(e,t){t.nodes().map((n,r)=>{const i=n.data();i.x=n.position().x,i.y=n.position().y,y0(e,i);const o=e.getElementById(i.nodeId);xn.info("Id:",r,"Position: (",n.position().x,", ",n.position().y,")",i),o.attr("transform",`translate(${n.position().x-i.width/2}, ${n.position().y-i.height/2})`),o.attr("attr",`apa-${r})`)})}const w0=async(e,t,n,r)=>{var i,o,a,l;xn.debug(`Rendering mindmap diagram
`+e);const s=r.db,u=s.getMindmap();if(!u)return;const c=la();c.htmlLabels=!1;const h=eu(t),g=h.append("g");g.attr("class","mindmap-edges");const d=h.append("g");d.attr("class","mindmap-nodes"),Xl(s,d,u,-1,c);const p=await b0(u,c);m0(g,p),x0(s,p),tu(void 0,h,(i=(a=c.mindmap)==null?void 0:a.padding)!=null?i:Jr.mindmap.padding,(o=(l=c.mindmap)==null?void 0:l.useMaxWidth)!=null?o:Jr.mindmap.useMaxWidth)},E0={draw:w0},_0=e=>{let t="";for(let n=0;n<e.THEME_COLOR_LIMIT;n++)e["lineColor"+n]=e["lineColor"+n]||e["cScaleInv"+n],ru(e["lineColor"+n])?e["lineColor"+n]=iu(e["lineColor"+n],20):e["lineColor"+n]=au(e["lineColor"+n],20);for(let n=0;n<e.THEME_COLOR_LIMIT;n++){const r=""+(17-3*n);t+=`
    .section-${n-1} rect, .section-${n-1} path, .section-${n-1} circle, .section-${n-1} polygon, .section-${n-1} path  {
      fill: ${e["cScale"+n]};
    }
    .section-${n-1} text {
     fill: ${e["cScaleLabel"+n]};
    }
    .node-icon-${n-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+n]};
    }
    .section-edge-${n-1}{
      stroke: ${e["cScale"+n]};
    }
    .edge-depth-${n-1}{
      stroke-width: ${r};
    }
    .section-${n-1} line {
      stroke: ${e["cScaleInv"+n]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},T0=e=>`
  .edge {
    stroke-width: 3;
  }
  ${_0(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,C0=T0,M0={db:o0,renderer:E0,parser:Wv,styles:C0};export{M0 as diagram};
